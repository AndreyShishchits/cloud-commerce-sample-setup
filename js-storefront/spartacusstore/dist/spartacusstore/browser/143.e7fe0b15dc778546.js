"use strict";(self.webpackChunkstorefrontapp=self.webpackChunkstorefrontapp||[]).push([[143],{2143:(kn,Q,l)=>{l.r(Q),l.d(Q,{AsmModule:()=>Un});var t=l(4650),a=l(4006),c=l(1742),St=l(591),h=l(2654),A=l(1086),vt=l(7274),G=l(6053),E=l(2198),S=l(2994),B=l(1406),Tt=l(537),Lt=l(13),q=l(5778),M=l(7545),f=l(4850),z=l(2986),H=l(6789),_=l(8353),m=l(9764),p=l(6895),j=l(7039),L=l(7221),U=l(9309),d=l(8555),C=l(5024);class K{}let b=(()=>{class n{constructor(e){this.asmAdapter=e}customerSearch(e){return this.asmAdapter.customerSearch(e)}customerLists(){return this.asmAdapter.customerLists()}bindCart(e){return this.asmAdapter.bindCart(e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(K))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bt=new t.OlP("CustomerSearchPageNormalizer"),yt=new t.OlP("CustomerListsNormalizer");let W=(()=>{class n{constructor(e,o,i){this.commandService=e,this.asmConnector=o,this.userAccountFacade=i,this.bindCartCommand$=this.commandService.create(r=>this.userAccountFacade.get().pipe((0,f.U)(u=>{if(u?.uid)return u.uid;throw new Error("No identifier for authenticated user found.")}),(0,z.q)(1),(0,B.b)(u=>this.asmConnector.bindCart({cartId:r,customerId:u}))))}bindCart(e){return this.bindCartCommand$.execute(e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.VDr),t.LFG(b),t.LFG(U.gf))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),V=(()=>{class n{constructor(e,o){this.queryService=e,this.asmConnector=o,this.customerListQuery$=this.queryService.create(()=>this.asmConnector.customerLists(),{reloadOn:void 0,resetOn:void 0})}getCustomerLists(){return this.customerListQuery$.get()}getCustomerListsState(){return this.customerListQuery$.getState()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c._7J),t.LFG(b))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();const Zt=[V,{provide:_.AH,useExisting:V},W,{provide:_.AE,useExisting:W}],F="[Asm] UI Update";class O{constructor(s){this.payload=s,this.type=F}}const v="[asm] Customer search data",T="[asm] Customer list customers search data",k="[Asm] Customer Search",R="[Asm] Customer List Customers Search";class it extends c.kPG.LoaderLoadAction{constructor(s){super(v),this.payload=s,this.type=k}}class rt extends c.kPG.LoaderFailAction{constructor(s){super(v),this.payload=s,this.type="[Asm] Customer Search Fail"}}class ct extends c.kPG.LoaderSuccessAction{constructor(s){super(v),this.payload=s,this.type="[Asm] Customer Search Success"}}class at extends c.kPG.LoaderResetAction{constructor(){super(v),this.type="[Asm] Customer Search Reset"}}class lt extends c.kPG.LoaderLoadAction{constructor(s){super(T),this.payload=s,this.type=R}}class ut extends c.kPG.LoaderFailAction{constructor(s){super(T),this.payload=s,this.type="[Asm] Customer List Customers Search Fail"}}class mt extends c.kPG.LoaderSuccessAction{constructor(s){super(T),this.payload=s,this.type="[Asm] Customer List Customers Search Success"}}class pt extends c.kPG.LoaderResetAction{constructor(){super(T),this.type="[Asm] Customer List Customers Search Reset"}}const Et=[(()=>{class n{constructor(e,o){this.actions$=e,this.asmConnector=o,this.customerSearch$=(0,C.GW)(()=>this.actions$.pipe((0,C.l4)(k),(0,f.U)(i=>i.payload),(0,M.w)(i=>this.asmConnector.customerSearch(i).pipe((0,f.U)(r=>new ct(r)),(0,L.K)(r=>(0,A.of)(new rt((0,c.cxH)(r)))))))),this.customerListCustomersSearch$=(0,C.GW)(()=>this.actions$.pipe((0,C.l4)(R),(0,f.U)(i=>i.payload),(0,M.w)(i=>this.asmConnector.customerSearch(i).pipe((0,f.U)(r=>new mt(r)),(0,L.K)(r=>(0,A.of)(new ut((0,c.cxH)(r))))))))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(C.eX),t.LFG(b))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})()],Mt={collapsed:!1};function Ut(n=Mt,s){return s.type===F?{...n,...s.payload}:n}const dt=new t.OlP("AsmReducers"),Ot={provide:dt,useFactory:function Ft(){return{customerSearchResult:c.kPG.loaderReducer(v),customerListCustomersSearchResult:c.kPG.loaderReducer(T),asmUi:Ut}}},Rt=[function kt(n){return function(s,e){return"[Auth] Logout Customer Support Agent"===e.type&&(s={...s,customerSearchResult:{}}),n(s,e)}}],y=(0,d.ZF)("asm"),N=(0,d.P1)(y,n=>n.asmUi),D=(0,d.P1)(y,n=>n.customerSearchResult),gt=(0,d.P1)(D,n=>c.kPG.loaderValueSelector(n)),_t=(0,d.P1)(D,n=>c.kPG.loaderLoadingSelector(n)),J=(0,d.P1)(y,n=>n.customerListCustomersSearchResult),ft=(0,d.P1)(J,n=>c.kPG.loaderValueSelector(n)),ht=(0,d.P1)(J,n=>c.kPG.loaderLoadingSelector(n));let wt=(()=>{class n{constructor(e,o,i){this.statePersistenceService=e,this.store=o,this.authStorageService=i,this.subscription=new h.w,this.key="asm"}initSync(){this.subscription.add(this.statePersistenceService.syncWithStorage({key:this.key,state$:this.getAsmState(),onRead:e=>this.onRead(e)}))}getAsmState(){return(0,G.aj)([this.store.pipe((0,E.h)(e=>!!e.asm),(0,d.Ys)(N)),(0,A.of)(this.authStorageService.getEmulatedUserToken()),this.authStorageService.getTokenTarget()]).pipe((0,f.U)(([e,o,i])=>{let r=o;return r&&(r={...o},delete r.refresh_token),{ui:e,emulatedUserToken:r,tokenTarget:i}}))}onRead(e){e&&(e.ui&&this.store.dispatch(new O(e.ui)),e.emulatedUserToken&&this.authStorageService.setEmulatedUserToken(e.emulatedUserToken),e.tokenTarget&&this.authStorageService.setTokenTarget(e.tokenTarget))}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.WBb),t.LFG(d.yh),t.LFG(_.JW))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Nt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[Ot],imports:[p.ez,c.vUS,d.Aw.forFeature("asm",dt,{metaReducers:Rt}),C.sQ.forFeature(Et)]}),n})();function Dt(n){return()=>n.initSync()}let Jt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[b,{provide:c.z4I,useFactory:Dt,deps:[wt],multi:!0},...Zt],imports:[p.ez,Nt]}),n})(),Z=(()=>{class n extends _.hc{}return n.\u0275fac=function(){let s;return function(o){return(s||(s=t.n5z(n)))(o||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:function(e){let o=null;return o=e?new(e||n):t.LFG(c.DeH),o},providedIn:"root"}),n})(),I=(()=>{class n{constructor(e){this.store=e}customerSearch(e){this.store.dispatch(new it(e))}customerSearchReset(){this.store.dispatch(new at)}getCustomerSearchResults(){return this.store.pipe((0,d.Ys)(gt))}getCustomerSearchResultsLoading(){return this.store.pipe((0,d.Ys)(_t))}customerListCustomersSearch(e){this.store.dispatch(new lt(e))}getCustomerListCustomersSearchResults(){return this.store.pipe((0,d.Ys)(ft))}getCustomerListCustomersSearchResultsLoading(){return this.store.pipe((0,d.Ys)(ht))}customerListCustomersSearchReset(){this.store.dispatch(new pt)}updateAsmUiState(e){this.store.dispatch(new O(e))}getAsmUiState(){return this.store.pipe((0,d.Ys)(N))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(d.yh))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Yt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSubmit())}),t.TgZ(1,"label"),t._UZ(2,"input",3),t.ALo(3,"cxTranslate"),t.ALo(4,"cxTranslate"),t._UZ(5,"cx-form-errors",4),t.qZA(),t.TgZ(6,"label"),t._UZ(7,"input",5),t.ALo(8,"cxTranslate"),t.ALo(9,"cxTranslate"),t._UZ(10,"cx-form-errors",4),t.qZA(),t.TgZ(11,"button",6),t._uU(12),t.ALo(13,"cxTranslate"),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.csAgentLoginForm),t.xp6(2),t.s9C("placeholder",t.lcZ(3,8,"asm.loginForm.userId.label")),t.uIk("aria-label",t.lcZ(4,10,"asm.loginForm.userId.label")),t.xp6(3),t.Q6J("control",e.csAgentLoginForm.get("userId")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,12,"asm.loginForm.password.label")),t.uIk("aria-label",t.lcZ(9,14,"asm.loginForm.password.label")),t.xp6(3),t.Q6J("control",e.csAgentLoginForm.get("password")),t.xp6(2),t.hij(" ",t.lcZ(13,16,"asm.loginForm.submit")," ")}}function Pt(n,s){1&n&&(t.TgZ(0,"div",7),t.ALo(1,"cxTranslate"),t._UZ(2,"div")(3,"div")(4,"div"),t.qZA()),2&n&&t.uIk("aria-label",t.lcZ(1,1,"common.loading"))}const Qt=["resultList"],Gt=["searchTerm"];function Bt(n,s){1&n&&(t.TgZ(0,"button",7),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"asm.customerSearch.submit")," "))}function qt(n,s){if(1&n&&(t.TgZ(0,"button",7),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n){const e=t.oxw();t.ekj("active",e.selectedCustomer),t.xp6(1),t.hij(" ",t.lcZ(2,3,"asm.customerSearch.submit")," ")}}function zt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){const r=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.selectCustomerFromList(r))}),t.TgZ(1,"span",13),t._uU(2),t.qZA(),t.TgZ(3,"span",14),t._uU(4),t.qZA()()}if(2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.uid)}}function Ht(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.closeResults())}),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"asm.customerSearch.noMatch")," "))}function jt(n,s){if(1&n&&(t.TgZ(0,"div",8,9),t.YNc(2,zt,5,2,"button",10),t.YNc(3,Ht,3,3,"button",11),t.ALo(4,"async"),t.qZA()),2&n){const e=s.ngIf,o=t.oxw(),i=t.MAs(3);t.xp6(2),t.Q6J("ngForOf",e.entries),t.xp6(1),t.Q6J("ngIf",!t.lcZ(4,2,o.searchResultsLoading$)&&i.value.length>=3&&!!e.entries&&e.entries.length<=0)}}function Kt(n,s){1&n&&(t.TgZ(0,"div",8)(1,"div",15),t.ALo(2,"cxTranslate"),t._UZ(3,"div")(4,"div")(5,"div"),t.qZA()()),2&n&&(t.xp6(1),t.uIk("aria-label",t.lcZ(2,1,"common.loading")))}function Wt(n,s){if(1&n&&(t.ynx(0),t._UZ(1,"input",3),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.hYB("placeholder","",null==e.customer?null:e.customer.name,", ",null==e.customer?null:e.customer.uid,"")}}function Vt(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"div",4)(2,"label",5),t._uU(3),t.qZA(),t.TgZ(4,"label",6),t._uU(5),t.qZA()(),t._UZ(6,"cx-asm-bind-cart"),t.BQk()),2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(null==e.customer?null:e.customer.name),t.xp6(2),t.Oqu(null==e.customer?null:e.customer.uid)}}function Xt(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,Wt,2,2,"ng-container",1),t.YNc(2,Vt,7,2,"ng-container",1),t.TgZ(3,"button",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.logoutCustomer())}),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.BQk()}2&n&&(t.xp6(1),t.Q6J("cxFeatureLevel","!5.1"),t.xp6(1),t.Q6J("cxFeatureLevel","5.1"),t.xp6(2),t.hij(" ",t.lcZ(5,3,"asm.endSession")," "))}function $t(n,s){1&n&&(t.TgZ(0,"span",3),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"asm.toggleUi.collapse")," "))}function te(n,s){1&n&&(t.TgZ(0,"span",3),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"asm.toggleUi.expand")," "))}const ee=["customerListLink"];function ne(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",10),t._UZ(1,"cx-icon",11),t.TgZ(2,"a",12,13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showCustomList())}),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"cxTranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("type",e.iconTypes.USER_FRIENDS),t.xp6(4),t.Oqu(t.lcZ(6,2,"asm.customers"))}}function se(n,s){if(1&n&&(t.ynx(0),t.YNc(1,ne,7,4,"div",9),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.customerSupportAgentLoggedIn$))}}function oe(n,s){1&n&&t._UZ(0,"cx-asm-session-timer")}function ie(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.hideUi())}),t.ALo(1,"cxTranslate"),t.qZA()}2&n&&t.s9C("title",t.lcZ(1,1,"asm.hideUi"))}function re(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.logout())}),t.ALo(1,"cxTranslate"),t.qZA()}2&n&&t.s9C("title",t.lcZ(1,1,"asm.logout"))}function ce(n,s){1&n&&t._UZ(0,"cx-customer-emulation")}function ae(n,s){if(1&n&&(t.ynx(0),t.YNc(1,ce,1,0,"cx-customer-emulation",6),t.BQk()),2&n){const e=t.oxw(2).ngIf;t.xp6(1),t.Q6J("ngIf",e)}}function le(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"cx-customer-selection",20),t.NdJ("submitEvent",function(i){t.CHM(e);const r=t.oxw(4);return t.KtG(r.startCustomerEmulationSession(i))}),t.qZA()}}function ue(n,s){if(1&n&&t.YNc(0,le,1,0,"cx-customer-selection",19),2&n){const e=t.oxw(2).ngIf;t.Q6J("ngIf",e)}}function me(n,s){if(1&n&&(t.ynx(0),t.YNc(1,ae,2,1,"ng-container",16),t.ALo(2,"async"),t.YNc(3,ue,1,1,"ng-template",null,18,t.W1O),t.BQk()),2&n){const e=t.MAs(4),o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,o.customer$))("ngIfElse",e)}}function pe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"cx-csagent-login-form",22),t.NdJ("submitEvent",function(i){t.CHM(e);const r=t.oxw(3);return t.KtG(r.loginCustomerSupportAgent(i))}),t.ALo(1,"async"),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("csAgentTokenLoading",t.lcZ(1,1,e.csAgentTokenLoading$))}}function de(n,s){if(1&n&&t.YNc(0,pe,2,3,"cx-csagent-login-form",21),2&n){const e=t.oxw().ngIf;t.Q6J("ngIf",e)}}function ge(n,s){if(1&n&&(t.ynx(0),t.YNc(1,me,5,4,"ng-container",16),t.ALo(2,"async"),t.YNc(3,de,1,1,"ng-template",null,17,t.W1O),t.BQk()),2&n){const e=t.MAs(4),o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,o.customerSupportAgentLoggedIn$))("ngIfElse",e)}}function _e(n,s){}function fe(n,s){1&n&&t.YNc(0,_e,0,0,"ng-template")}function he(n,s){}function Ce(n,s){1&n&&t.YNc(0,he,0,0,"ng-template")}function xe(n,s){}function Ae(n,s){1&n&&t.YNc(0,xe,0,0,"ng-template")}function Se(n,s){}function ve(n,s){1&n&&t.YNc(0,Se,0,0,"ng-template")}const Te=function(n){return{customerListsPage:n}};function Le(n,s){if(1&n&&(t.TgZ(0,"div",19),t.ALo(1,"async"),t.YNc(2,Ce,1,0,null,20),t.TgZ(3,"div",21),t.ALo(4,"async"),t.YNc(5,Ae,1,0,null,5),t.YNc(6,ve,1,0,null,5),t.qZA()()),2&n){const e=s.ngIf,o=t.oxw(),i=t.MAs(27),r=t.MAs(23),u=t.MAs(25);t.ekj("tablet-mobile",t.lcZ(1,8,o.breakpoint$)!==o.BREAKPOINT.md),t.xp6(2),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(12,Te,e)),t.xp6(1),t.ekj("mobile",t.lcZ(4,10,o.breakpoint$)===o.BREAKPOINT.xs),t.xp6(2),t.Q6J("ngTemplateOutlet",r),t.xp6(1),t.Q6J("ngTemplateOutlet",u)}}function be(n,s){1&n&&(t.TgZ(0,"th",30)(1,"span",23),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"asm.customerList.tableHeader.customer")," "))}function ye(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.headerLocalizationKey))}}function Ze(n,s){if(1&n&&(t.TgZ(0,"th",31),t.YNc(1,ye,3,3,"span",24),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf",e.headerLocalizationKey)}}function Ie(n,s){if(1&n&&(t.TgZ(0,"thead")(1,"tr",27),t.YNc(2,be,4,3,"th",28),t.YNc(3,Ze,2,1,"th",29),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",null==e.customerListConfig?null:e.customerListConfig.showAvatar),t.xp6(1),t.Q6J("ngForOf",null==e.customerListConfig?null:e.customerListConfig.columns)}}function Ee(n,s){if(1&n&&(t.TgZ(0,"td",34)(1,"div",35),t._uU(2),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(2),t.hij(" ",o.getBadgeText(e)," ")}}function Me(n,s){}function Ue(n,s){1&n&&t.YNc(0,Me,0,0,"ng-template")}const Fe=function(n,s){return{customerEntry:n,column:s,showHeader:!1}};function Oe(n,s){if(1&n&&(t.TgZ(0,"td",37),t.YNc(1,Ue,1,0,null,20),t.qZA()),2&n){const e=s.$implicit,o=t.oxw(2).$implicit;t.oxw(2);const i=t.MAs(19);t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.WLB(2,Fe,o,e))}}function ke(n,s){if(1&n&&(t.ynx(0),t.YNc(1,Oe,2,5,"td",36),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",null==e.customerListConfig?null:e.customerListConfig.columns)}}function Re(n,s){}function we(n,s){1&n&&t.YNc(0,Re,0,0,"ng-template")}const Y=function(n,s){return{customerEntry:n,column:s,showHeader:!0}};function Ne(n,s){if(1&n&&(t.ynx(0),t.YNc(1,we,1,0,null,20),t.BQk()),2&n){const e=t.oxw().$implicit,o=t.oxw(2).$implicit;t.oxw(2);const i=t.MAs(19);t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.WLB(2,Y,o,e))}}function De(n,s){if(1&n&&(t.ynx(0),t.YNc(1,Ne,2,5,"ng-container",24),t.BQk()),2&n){const e=s.even;t.xp6(1),t.Q6J("ngIf",e)}}function Je(n,s){}function Ye(n,s){1&n&&t.YNc(0,Je,0,0,"ng-template")}function Pe(n,s){if(1&n&&(t.ynx(0),t.YNc(1,Ye,1,0,null,20),t.BQk()),2&n){const e=t.oxw().$implicit,o=t.oxw(2).$implicit;t.oxw(2);const i=t.MAs(19);t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.WLB(2,Y,o,e))}}function Qe(n,s){if(1&n&&(t.ynx(0),t.YNc(1,Pe,2,5,"ng-container",24),t.BQk()),2&n){const e=s.odd;t.xp6(1),t.Q6J("ngIf",e)}}function Ge(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"td",38),t.YNc(2,De,2,1,"ng-container",39),t.qZA(),t.TgZ(3,"td",38),t.YNc(4,Qe,2,1,"ng-container",39),t.qZA(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("ngForOf",null==e.customerListConfig?null:e.customerListConfig.columns),t.xp6(2),t.Q6J("ngForOf",null==e.customerListConfig?null:e.customerListConfig.columns)}}function Be(n,s){}function qe(n,s){1&n&&t.YNc(0,Be,0,0,"ng-template")}function ze(n,s){if(1&n&&(t.ynx(0),t.YNc(1,qe,1,0,null,20),t.BQk()),2&n){const e=s.$implicit,o=t.oxw(2).$implicit;t.oxw(2);const i=t.MAs(19);t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.WLB(2,Y,o,e))}}function He(n,s){if(1&n&&(t.TgZ(0,"td",38),t.YNc(1,ze,2,5,"ng-container",39),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",null==e.customerListConfig?null:e.customerListConfig.columns)}}function je(n,s){if(1&n&&(t.TgZ(0,"tr",27),t.YNc(1,Ee,3,1,"td",32),t.YNc(2,ke,2,1,"ng-container",24),t.ALo(3,"async"),t.YNc(4,Ge,5,2,"ng-container",24),t.ALo(5,"async"),t.YNc(6,He,2,1,"td",33),t.ALo(7,"async"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.customerListConfig?null:e.customerListConfig.showAvatar),t.xp6(1),t.Q6J("ngIf",t.lcZ(3,4,e.breakpoint$)===e.BREAKPOINT.md),t.xp6(2),t.Q6J("ngIf",t.lcZ(5,6,e.breakpoint$)===e.BREAKPOINT.sm),t.xp6(2),t.Q6J("ngIf",t.lcZ(7,8,e.breakpoint$)===e.BREAKPOINT.xs)}}function Ke(n,s){1&n&&(t.TgZ(0,"div",40),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"asm.customerList.noCustomers")," "))}function We(n,s){if(1&n&&(t.TgZ(0,"div")(1,"table",22)(2,"caption",23),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA(),t.YNc(5,Ie,4,2,"thead",24),t.ALo(6,"async"),t.TgZ(7,"tbody"),t.YNc(8,je,8,10,"tr",25),t.qZA()(),t.YNc(9,Ke,3,3,"div",26),t.qZA()),2&n){const e=s.ngIf,o=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,4,"asm.customerList.title")," "),t.xp6(2),t.Q6J("ngIf",t.lcZ(6,6,o.breakpoint$)===o.BREAKPOINT.md),t.xp6(3),t.Q6J("ngForOf",null==e?null:e.entries),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.entries.length))}}function Ve(n,s){if(1&n&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n){const e=t.oxw().column;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.headerLocalizationKey)," ")}}function Xe(n,s){1&n&&t.GkF(0)}const Ct=function(n,s){return{column:n,customerEntry:s}};function $e(n,s){if(1&n&&(t.ynx(0),t.YNc(1,Xe,1,0,"ng-container",20),t.BQk()),2&n){const e=t.oxw(),o=e.column,i=e.customerEntry;t.oxw();const r=t.MAs(21);t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.WLB(2,Ct,o,i))}}function tn(n,s){1&n&&t.GkF(0)}function en(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),r=i.customerEntry,u=i.column,g=t.oxw();return t.KtG(g.startColumnAction(r,u.actionType))}),t.ALo(1,"cxTranslate"),t.ALo(2,"cxTranslate"),t.YNc(3,tn,1,0,"ng-container",20),t.qZA()}if(2&n){const e=t.oxw(),o=e.column,i=e.customerEntry;t.oxw();const r=t.MAs(21);let u,g;t.uIk("title",o.icon?t.lcZ(1,4,null!==(u=o.icon.captionLocalizationKey)&&void 0!==u?u:o.headerLocalizationKey):void 0)("aria-label",o.icon?t.lcZ(2,6,null!==(g=o.icon.captionLocalizationKey)&&void 0!==g?g:o.headerLocalizationKey):void 0),t.xp6(3),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.WLB(8,Ct,o,i))}}function nn(n,s){if(1&n&&(t.TgZ(0,"div",41),t.YNc(1,Ve,3,3,"span",42),t.YNc(2,$e,2,5,"ng-container",24),t.YNc(3,en,4,11,"button",43),t.qZA()),2&n){const e=s.column,o=s.showHeader;t.xp6(1),t.Q6J("ngIf",o),t.xp6(1),t.Q6J("ngIf",!e.actionType),t.xp6(1),t.Q6J("ngIf",e.actionType)}}function sn(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(),o=e.column,i=e.customerEntry;t.xp6(1),t.Oqu((null==o.renderer?null:o.renderer(i))||"")}}function on(n,s){if(1&n&&(t._UZ(0,"cx-icon",47),t.ALo(1,"cxTranslate"),t.ALo(2,"cxTranslate")),2&n){const e=t.oxw().column;let o,i;t.ekj("cx-action-color",e.actionType),t.Q6J("type",e.icon.symbol),t.uIk("title",e.actionType?void 0:t.lcZ(1,5,null!==(o=e.icon.captionLocalizationKey)&&void 0!==o?o:e.headerLocalizationKey))("aria-label",e.actionType?void 0:t.lcZ(2,7,null!==(i=e.icon.captionLocalizationKey)&&void 0!==i?i:e.headerLocalizationKey))}}function rn(n,s){if(1&n&&(t.YNc(0,sn,2,1,"span",24),t.YNc(1,on,3,9,"cx-icon",46)),2&n){const e=s.column;t.Q6J("ngIf",!e.icon),t.xp6(1),t.Q6J("ngIf",e.icon)}}const xt=function(n){return{ariaLabel:n,ariaControls:"asm-cusomer-list-table"}};function cn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"label")(1,"span",23),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"cx-sorting",48),t.NdJ("sortListEvent",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.changeSortCode(i))}),t.ALo(5,"async"),t.ALo(6,"cxTranslate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,6,"asm.customerList.tableSort.sortBy")),t.xp6(2),t.s9C("placeholder",t.lcZ(6,10,"asm.customerList.tableSort.sortBy")),t.Q6J("sortOptions",e.sorts)("sortLabels",t.lcZ(5,8,e.getSortLabels()))("selectedOption",e.sortCode)("cxNgSelectA11y",t.VKq(12,xt,e.sortCode))}}function an(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.goToPreviousPage())}),t._UZ(1,"cx-icon",53),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA()()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",0===e.currentPage||!e.loaded),t.xp6(1),t.Q6J("type",e.iconTypes.CARET_LEFT),t.xp6(2),t.Oqu(t.lcZ(4,3,"asm.customerList.page.previous"))}}function ln(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.goToNextPage())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t._UZ(4,"cx-icon",55),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.currentPage===e.maxPage||!e.loaded),t.xp6(2),t.Oqu(t.lcZ(3,3,"asm.customerList.page.next")),t.xp6(2),t.Q6J("type",e.iconTypes.CARET_RIGHT)}}const un=function(n){return{count:n}};function mn(n,s){if(1&n&&(t.TgZ(0,"div",49)(1,"div"),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.YNc(4,an,5,5,"button",50),t.YNc(5,ln,5,5,"button",51),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.xi3(3,3,"asm.customerList.page.page",t.VKq(6,un,e.currentPage+1))," "),t.xp6(2),t.Q6J("ngIf",e.maxPage>0),t.xp6(1),t.Q6J("ngIf",e.maxPage>0)}}function pn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"label")(1,"span",23),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"ng-select",56),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onChangeCustomerGroup())})("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.selectedUserGroupId=i)}),t.qZA()()}if(2&n){const e=s.customerListsPage,o=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,7,"asm.customerList.title")),t.xp6(2),t.Q6J("searchable",!1)("clearable",!1)("tabIndex",0)("ngModel",o.selectedUserGroupId)("items",null==e?null:e.userGroups)("cxNgSelectA11y",t.VKq(9,xt,o.getGroupName(e,o.selectedUserGroupId)))}}function dn(n,s){1&n&&t._UZ(0,"cx-spinner")}function gn(n,s){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"asm.customerList.noCustomers")))}function _n(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",57),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.closeModal("Cross click"))}),t.ALo(1,"cxTranslate"),t.TgZ(2,"span",58),t._UZ(3,"cx-icon",47),t.qZA()()}if(2&n){const e=t.oxw();t.uIk("aria-label",t.lcZ(1,2,"common.close")),t.xp6(3),t.Q6J("type",e.iconTypes.CLOSE)}}let fn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-dot-spinner"]],decls:3,vars:0,template:function(e,o){1&e&&t._UZ(0,"div")(1,"div")(2,"div")},encapsulation:2,changeDetection:0}),n})(),hn=(()=>{class n{constructor(e,o,i,r){this.globalMessageService=e,this.activeCartFacade=o,this.multiCartFacade=i,this.asmBindCartFacade=r,this.cartId=new a.NI("",[a.kI.required,a.kI.minLength(1)]),this.loading$=new St.X(!1),this.subscription=new h.w}ngOnInit(){this.subscription.add(this.activeCartFacade.getActiveCartId().subscribe(e=>{this.cartId.setValue(e??"")}))}bindCartToCustomer(){const e=(0,A.of)(this.loading$.getValue()).pipe((0,E.h)(o=>!o&&this.cartId.valid),(0,S.b)(()=>this.loading$.next(!0)),(0,B.b)(()=>this.asmBindCartFacade.bindCart(this.cartId.value)),(0,Tt.x)(()=>this.loading$.next(!1))).subscribe(()=>{this.multiCartFacade.reloadCart(c.gSv),this.globalMessageService.add({key:"asm.bindCart.success"},c.xUg.MSG_TYPE_CONFIRMATION)},o=>{this.globalMessageService.add(o.details?.[0].message??"",c.xUg.MSG_TYPE_ERROR)});this.subscription.add(e)}clearText(){this.cartId.setValue("")}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.IWp),t.Y36(H.bu),t.Y36(H.WT),t.Y36(_.AE))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-asm-bind-cart"]],decls:22,vars:36,consts:[[3,"submit"],["for","cartNumber"],["role","search",1,"cx-asm-assignCart",3,"click"],["autocomplete","off","formcontrolname","cartNumber",3,"formControl","keydown.enter"],["cartIdElement",""],[1,"cx-asm-reset",3,"click"],[1,"cx-icon","fas","fa-times-circle"],[1,"cx-icon","fas","fa-search"],["type","submit",1,"cx-asm-bindCartToCustomer",3,"disabled"]],template:function(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"form",0),t.NdJ("submit",function(){return o.bindCartToCustomer()}),t.TgZ(1,"label",1),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"div",2),t.NdJ("click",function(){t.CHM(i);const u=t.MAs(7);return t.KtG(u.focus())}),t.ALo(5,"cxTranslate"),t.TgZ(6,"input",3,4),t.NdJ("keydown.enter",function(){return o.bindCartToCustomer()}),t.ALo(8,"cxTranslate"),t.qZA(),t.TgZ(9,"button",5),t.NdJ("click",function(){return o.clearText()}),t.ALo(10,"cxTranslate"),t._UZ(11,"cx-icon",6),t.qZA(),t._UZ(12,"cx-icon",7),t.qZA(),t.TgZ(13,"button",8),t.ALo(14,"async"),t.TgZ(15,"span"),t.ALo(16,"async"),t._uU(17),t.ALo(18,"cxTranslate"),t.qZA(),t._UZ(19,"cx-dot-spinner"),t.ALo(20,"async"),t.ALo(21,"cxTranslate"),t.qZA()()}2&e&&(t.xp6(2),t.hij("",t.lcZ(3,18,"asm.bindCart.cartNumber")," "),t.xp6(2),t.ekj("active",o.cartId.valid),t.uIk("aria-label",t.lcZ(5,20,"asm.bindCart.assignCartId")),t.xp6(2),t.Q6J("formControl",o.cartId),t.uIk("aria-label",t.lcZ(8,22,"asm.bindCart.enterCartId")),t.xp6(3),t.ekj("visible",(null==o.cartId.value?null:o.cartId.value.length)>0),t.uIk("aria-label",t.lcZ(10,24,"asm.bindCart.resetCartId")),t.xp6(4),t.ekj("cx-asm-active",o.cartId.valid)("cx-bind-loading",t.lcZ(14,26,o.loading$)),t.Q6J("disabled",o.cartId.invalid),t.xp6(2),t.uIk("aria-hidden",t.lcZ(16,28,o.loading$)),t.xp6(2),t.hij(" ",t.lcZ(18,30,"asm.bindCart.bindCartToCustomer")," "),t.xp6(2),t.uIk("aria-hidden",!t.lcZ(20,32,o.loading$))("aria-label",t.lcZ(21,34,"common.loading")))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.oH,m.oJW,a.F,fn,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),P=(()=>{class n{constructor(e,o,i){this.authService=e,this.csAgentAuthService=o,this.winRef=i}logoutCustomerSupportAgentAndCustomer(){this.csAgentAuthService.logoutCustomerSupportAgent()}logoutCustomer(){this.authService.logout()}isCustomerEmulationSessionInProgress(){return this.csAgentAuthService.isCustomerEmulated()}unload(){this.winRef.localStorage&&this.winRef.localStorage.removeItem(_.AJ)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.e80),t.LFG(_.FA),t.LFG(c.X9E))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cn=(()=>{class n{constructor(e){this.fb=e,this.csAgentTokenLoading=!1,this.submitEvent=new t.vpe}ngOnInit(){this.csAgentLoginForm=this.fb.group({userId:["",[a.kI.required]],password:["",[a.kI.required]]})}onSubmit(){this.csAgentLoginForm.valid?this.submitEvent.emit({userId:this.csAgentLoginForm.get("userId")?.value,password:this.csAgentLoginForm.get("password")?.value}):this.csAgentLoginForm.markAllAsTouched()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.QS))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-csagent-login-form"]],inputs:{csAgentTokenLoading:"csAgentTokenLoading"},outputs:{submitEvent:"submitEvent"},decls:2,vars:2,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],["class","spinner","aria-hidden","false",4,"ngIf"],[3,"formGroup","ngSubmit"],["required","true","type","text","formControlName","userId",3,"placeholder"],[3,"control"],["required","true","type","password","formControlName","password","cxPasswordVisibilitySwitch","",3,"placeholder"],["type","submit"],["aria-hidden","false",1,"spinner"]],template:function(e,o){1&e&&(t.YNc(0,Yt,14,18,"form",0),t.YNc(1,Pt,5,3,"div",1)),2&e&&(t.Q6J("ngIf",!o.csAgentTokenLoading),t.xp6(1),t.Q6J("ngIf",o.csAgentTokenLoading))},dependencies:[p.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,m.Ahv,m.X84,c.X$D],encapsulation:2}),n})(),xn=(()=>{class n{constructor(e,o,i){this.fb=e,this.asmService=o,this.config=i,this.subscription=new h.w,this.submitEvent=new t.vpe}ngOnInit(){this.customerSelectionForm=this.fb.group({searchTerm:["",a.kI.required]}),this.asmService.customerSearchReset(),this.searchResultsLoading$=this.asmService.getCustomerSearchResultsLoading(),this.searchResults=this.asmService.getCustomerSearchResults(),this.subscription.add(this.customerSelectionForm.controls.searchTerm.valueChanges.pipe((0,Lt.b)(300)).subscribe(e=>{this.handleSearchTerm(e)}))}handleSearchTerm(e){!!this.selectedCustomer&&e!==this.selectedCustomer.name&&(this.selectedCustomer=void 0),!Boolean(this.selectedCustomer)&&(this.asmService.customerSearchReset(),e.trim().length>=3&&this.asmService.customerSearch({query:e,pageSize:this.config.asm?.customerSearch?.maxResults}))}selectCustomerFromList(e){this.selectedCustomer=e,this.customerSelectionForm.controls.searchTerm.setValue(this.selectedCustomer.name),this.asmService.customerSearchReset()}onSubmit(){this.customerSelectionForm.valid&&this.selectedCustomer?this.submitEvent.emit({customerId:this.selectedCustomer.customerId}):this.customerSelectionForm.markAllAsTouched()}onDocumentClick(e){if(Boolean(this.resultList)){if(this.resultList.nativeElement.contains(e.target)||this.searchTerm.nativeElement.contains(e.target))return;this.asmService.customerSearchReset()}}closeResults(){this.asmService.customerSearchReset()}ngOnDestroy(){this.subscription.unsubscribe(),this.asmService.customerSearchReset()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.QS),t.Y36(I),t.Y36(Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-customer-selection"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Qt,5),t.Gf(Gt,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.resultList=i.first),t.iGM(i=t.CRH())&&(o.searchTerm=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("click",function(r){return o.onDocumentClick(r)},!1,t.evT)},outputs:{submitEvent:"submitEvent"},decls:13,vars:16,consts:[[3,"formGroup","ngSubmit"],["required","true","type","text","formControlName","searchTerm",3,"placeholder"],["searchTerm",""],[3,"control"],["type","submit",4,"cxFeatureLevel"],["type","submit",3,"active",4,"cxFeatureLevel"],["class","asm-results",4,"ngIf"],["type","submit"],[1,"asm-results"],["resultList",""],[3,"click",4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],[1,"result-name"],[1,"result-id"],["aria-hidden","false",1,"spinner"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(1,"label"),t._UZ(2,"input",1,2),t.ALo(4,"cxTranslate"),t.ALo(5,"cxTranslate"),t._UZ(6,"cx-form-errors",3),t.qZA(),t.YNc(7,Bt,3,3,"button",4),t.YNc(8,qt,3,5,"button",5),t.qZA(),t.YNc(9,jt,5,4,"div",6),t.ALo(10,"async"),t.YNc(11,Kt,6,3,"div",6),t.ALo(12,"async")),2&e&&(t.Q6J("formGroup",o.customerSelectionForm),t.xp6(2),t.s9C("placeholder",t.lcZ(5,10,"asm.customerSearch.searchTerm.label")),t.uIk("aria-label",t.lcZ(4,8,"asm.customerSearch.searchTerm.label")),t.xp6(4),t.Q6J("control",o.customerSelectionForm.get("searchTerm")),t.xp6(1),t.Q6J("cxFeatureLevel","!5.1"),t.xp6(1),t.Q6J("cxFeatureLevel","5.1"),t.xp6(1),t.Q6J("ngIf",t.lcZ(10,12,o.searchResults)),t.xp6(2),t.Q6J("ngIf",t.lcZ(12,14,o.searchResultsLoading$)))},dependencies:[p.sg,p.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,m.Ahv,c.EJv,p.Ov,c.X$D],encapsulation:2}),n})(),An=(()=>{class n{transform(e){e<0&&(e=0);const o=Math.floor(e/60),i=e%60;let r;return r=o<10?("00"+o).slice(-2):o+"",`${r}:${("00"+i).slice(-2)}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"formatTimer",type:n,pure:!0}),n})(),Sn=(()=>{class n{constructor(e,o,i,r,u){this.config=e,this.asmComponentService=o,this.routingService=i,this.changeDetectorRef=r,this.userIdService=u,this.subscriptions=new h.w,this.maxStartDelayInSeconds=6e4}ngOnInit(){this.timeLeft=this.getTimerStartDelayInSeconds(),this.interval=setInterval(()=>{this.timeLeft>0?this.timeLeft--:(clearInterval(this.interval),this.asmComponentService.logoutCustomerSupportAgentAndCustomer()),this.changeDetectorRef.markForCheck()},1e3),this.resetOnNavigate(),this.resetOnCustomerSessionChange()}resetOnNavigate(){this.subscriptions.add(this.routingService.isNavigating().subscribe(e=>{e&&this.resetTimer()}))}resetOnCustomerSessionChange(){this.subscriptions.add(this.userIdService.getUserId().pipe((0,q.x)()).subscribe(()=>this.resetTimer()))}resetTimer(){this.timeLeft>0&&(this.timeLeft=this.getTimerStartDelayInSeconds())}getTimerStartDelayInSeconds(){return void 0===this.config.asm?.agentSessionTimer?.startingDelayInSeconds?600:this.config.asm.agentSessionTimer.startingDelayInSeconds>this.maxStartDelayInSeconds?this.maxStartDelayInSeconds:this.config.asm.agentSessionTimer.startingDelayInSeconds}ngOnDestroy(){this.subscriptions.unsubscribe(),this.interval&&clearInterval(this.interval)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z),t.Y36(P),t.Y36(c.Znh),t.Y36(t.sBO),t.Y36(c.XBV))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-asm-session-timer"]],decls:9,vars:12,consts:[[1,"label"],[1,"time"],[1,"reset",3,"title","click"]],template:function(e,o){1&e&&(t.TgZ(0,"span",0),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA(),t.TgZ(3,"span",1),t._uU(4),t.ALo(5,"formatTimer"),t.ALo(6,"cxTranslate"),t.qZA(),t.TgZ(7,"button",2),t.NdJ("click",function(){return o.resetTimer()}),t.ALo(8,"cxTranslate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,4,"asm.agentSessionTimer.label"),":"),t.xp6(3),t.AsE("",t.lcZ(5,6,o.timeLeft)," ",t.lcZ(6,8,"asm.agentSessionTimer.minutes"),""),t.xp6(3),t.s9C("title",t.lcZ(8,10,"asm.agentSessionTimer.reset")))},dependencies:[c.X$D,An],encapsulation:2}),n})(),vn=(()=>{class n{constructor(e,o){this.asmComponentService=e,this.userAccountFacade=o,this.subscription=new h.w}ngOnInit(){this.subscription.add(this.userAccountFacade.get().subscribe(e=>{e&&(this.customer=e)})),this.isCustomerEmulationSessionInProgress$=this.asmComponentService.isCustomerEmulationSessionInProgress()}logoutCustomer(){this.asmComponentService.logoutCustomer()}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(P),t.Y36(U.gf))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-customer-emulation"]],decls:2,vars:3,consts:[[4,"ngIf"],[4,"cxFeatureLevel"],["formcontrolname","logoutCustomer",3,"click"],["formcontrolname","customer","type","text","disabled","true",3,"placeholder"],[1,"cx-asm-customerInfo"],[1,"cx-asm-name"],[1,"cx-asm-uid"]],template:function(e,o){1&e&&(t.YNc(0,Xt,6,5,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.isCustomerEmulationSessionInProgress$))},dependencies:[p.O5,c.EJv,hn,p.Ov,c.X$D],encapsulation:2}),n})(),Tn=(()=>{class n{constructor(e){this.asmService=e,this.subscription=new h.w}ngOnInit(){this.subscription.add(this.asmService.getAsmUiState().subscribe(e=>{this.isCollapsed=void 0!==e.collapsed&&e.collapsed}))}toggleUi(){this.asmService.updateAsmUiState({collapsed:!this.isCollapsed})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(I))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-asm-toggle-ui"]],decls:4,vars:3,consts:[["tabindex","0","role","button",1,"toggleUi",3,"click"],[3,"ngClass"],["class","label",4,"ngIf"],[1,"label"]],template:function(e,o){1&e&&(t.TgZ(0,"a",0),t.NdJ("click",function(){return o.toggleUi()}),t._UZ(1,"span",1),t.YNc(2,$t,3,3,"span",2),t.YNc(3,te,3,3,"span",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngClass",o.isCollapsed?"expandIcon":"collapseIcon"),t.xp6(1),t.Q6J("ngIf",!o.isCollapsed),t.xp6(1),t.Q6J("ngIf",o.isCollapsed))},dependencies:[p.mk,p.O5,c.X$D],encapsulation:2}),n})(),Ln=(()=>{class n{constructor(e,o,i,r,u,g,Fn,On){this.authService=e,this.csAgentAuthService=o,this.asmComponentService=i,this.globalMessageService=r,this.routingService=u,this.asmService=g,this.userAccountFacade=Fn,this.launchDialogService=On,this.iconTypes=m.e1G,this.disabled=!1,this.startingCustomerSession=!1,this.subscription=new h.w}ngOnInit(){this.customerSupportAgentLoggedIn$=this.csAgentAuthService.isCustomerSupportAgentLoggedIn().pipe((0,q.x)(),(0,S.b)(e=>{e||this.closeModal()})),this.csAgentTokenLoading$=this.csAgentAuthService.getCustomerSupportAgentTokenLoading(),this.customer$=this.authService.isUserLoggedIn().pipe((0,M.w)(e=>e?(this.handleCustomerSessionStartRedirection(),this.userAccountFacade.get()):(0,A.of)(void 0))),this.isCollapsed$=this.asmService.getAsmUiState().pipe((0,f.U)(e=>void 0!==e.collapsed&&e.collapsed)),this.subscription.add(this.launchDialogService?.dialogClose.pipe((0,E.h)(e=>Boolean(e))).subscribe(e=>{e.selectedUser&&(this.startCustomerEmulationSession(e.selectedUser),e.actionType===_.JR.ORDER_HISTORY&&this.routingService.go({cxRoute:"orders"}))}))}handleCustomerSessionStartRedirection(){this.asmComponentService.isCustomerEmulationSessionInProgress().pipe((0,z.q)(1)).subscribe(e=>{this.startingCustomerSession&&e&&(this.startingCustomerSession=!1,this.globalMessageService.remove(c.xUg.MSG_TYPE_ERROR),this.routingService.go("/"))})}loginCustomerSupportAgent({userId:e,password:o}){this.csAgentAuthService.authorizeCustomerSupportAgent(e,o)}logout(){this.asmComponentService.logoutCustomerSupportAgentAndCustomer()}startCustomerEmulationSession({customerId:e}){e?(this.csAgentAuthService.startCustomerEmulationSession(e),this.startingCustomerSession=!0):this.globalMessageService.add({key:"asm.error.noCustomerId"},c.xUg.MSG_TYPE_ERROR)}hideUi(){this.disabled=!0,this.asmComponentService.unload()}showCustomList(){this.launchDialogService?.openDialogAndSubscribe("ASM_CUSTOMER_LIST",this.element)}closeModal(){this.launchDialogService?.closeDialog("logout")}ngOnDestroy(){this.subscription?.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.e80),t.Y36(_.FA),t.Y36(P),t.Y36(c.IWp),t.Y36(c.Znh),t.Y36(I),t.Y36(U.gf),t.Y36(m.Q3W,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-asm-main-ui"]],viewQuery:function(e,o){if(1&e&&t.Gf(ee,5),2&e){let i;t.iGM(i=t.CRH())&&(o.element=i.first)}},hostVars:2,hostBindings:function(e,o){2&e&&t.ekj("hidden",o.disabled)},decls:19,vars:21,consts:[[1,"asm-bar"],[1,"asm-bar-branding"],["src","data:image/png;base64,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","width","48","height","24",1,"logo",3,"alt"],[1,"asm-title"],[1,"asm-bar-actions"],[4,"cxFeatureLevel"],[4,"ngIf"],["class","close",3,"title","click",4,"ngIf"],["class","logout",3,"title","click",4,"ngIf"],["class","cx-asm-customer-list",4,"ngIf"],[1,"cx-asm-customer-list"],[3,"type"],[1,"cx-asm-customer-list-link",3,"click"],["customerListLink",""],[1,"close",3,"title","click"],[1,"logout",3,"title","click"],[4,"ngIf","ngIfElse"],["showLoginForm",""],["showCustomerSelection",""],[3,"submitEvent",4,"ngIf"],[3,"submitEvent"],[3,"csAgentTokenLoading","submitEvent",4,"ngIf"],[3,"csAgentTokenLoading","submitEvent"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.ALo(3,"cxTranslate"),t.TgZ(4,"div",3),t._uU(5),t.ALo(6,"cxTranslate"),t.qZA()(),t.TgZ(7,"div",4),t.YNc(8,se,3,3,"ng-container",5),t._UZ(9,"cx-asm-toggle-ui"),t.YNc(10,oe,1,0,"cx-asm-session-timer",6),t.ALo(11,"async"),t.YNc(12,ie,2,3,"button",7),t.ALo(13,"async"),t.ALo(14,"async"),t.YNc(15,re,2,3,"button",8),t.ALo(16,"async"),t.qZA()(),t.YNc(17,ge,5,4,"ng-container",6),t.ALo(18,"async")),2&e&&(t.xp6(2),t.s9C("alt",t.lcZ(3,7,"asm.mainLogoLabel")),t.xp6(3),t.hij(" ",t.lcZ(6,9,"asm.mainTitle")," "),t.xp6(3),t.Q6J("cxFeatureLevel","5.1"),t.xp6(2),t.Q6J("ngIf",t.lcZ(11,11,o.customerSupportAgentLoggedIn$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(13,13,o.customerSupportAgentLoggedIn$)&&!t.lcZ(14,15,o.csAgentTokenLoading$)),t.xp6(3),t.Q6J("ngIf",t.lcZ(16,17,o.customerSupportAgentLoggedIn$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(18,19,o.isCollapsed$)))},dependencies:[p.O5,m.oJW,c.EJv,Cn,xn,Sn,vn,Tn,p.Ov,c.X$D],encapsulation:2}),n})();const bn={launch:{ASM_CUSTOMER_LIST:{inlineRoot:!0,component:(()=>{class n{constructor(e,o,i,r,u,g){this.launchDialogService=e,this.asmService=o,this.breakpointService=i,this.asmConfig=r,this.translation=u,this.asmCustomerListFacade=g,this.DEFAULT_PAGE_SIZE=5,this.focusConfig={trap:!0,block:!0,autofocus:"customer-list-selector",focusOnEscape:!0},this.iconTypes=m.e1G,this.BREAKPOINT=m.Bst,this.currentPage=0,this.maxPage=0,this.loaded=!1,this.teardown=new h.w,this.breakpoint$=this.getBreakpoint()}ngOnInit(){this.pageSize=this.asmConfig.asm?.customerList?.pageSize??this.DEFAULT_PAGE_SIZE,this.customerListConfig=this.asmConfig?.asm?.customerList,this.customerListsPage$=this.asmCustomerListFacade.getCustomerLists()?.pipe((0,S.b)(e=>{this.selectedUserGroupId||(this.selectedUserGroupId=e?.userGroups?.[0].uid,this.sorts=null,this.fetchCustomers())}))??vt.C,this.customerSearchLoading$=this.asmService.getCustomerListCustomersSearchResultsLoading().pipe((0,S.b)(e=>this.loaded=!e)),this.teardown.add(this.customerSearchLoading$.subscribe()),this.teardown.add(()=>this.asmService.customerListCustomersSearchReset()),this.customerSearchPage$=this.asmService.getCustomerListCustomersSearchResults().pipe((0,S.b)(e=>{e?.sorts&&(this.sorts=e.sorts,this.sortCode=e.pagination?.sort),this.maxPage=e?.entries.length<this.pageSize?e.pagination?.currentPage??0:this.currentPage+1}))}ngOnDestroy(){this.teardown.unsubscribe()}fetchCustomers(){if(this.selectedUserGroupId){const e={customerListId:this.selectedUserGroupId,pageSize:this.pageSize,currentPage:this.currentPage};this.sortCode&&(e.sort=this.sortCode),this.asmService.customerListCustomersSearchReset(),this.asmService.customerListCustomersSearch(e)}}onChangeCustomerGroup(){this.currentPage=0,this.sorts=null,this.sortCode="",this.fetchCustomers()}getGroupName(e,o){return e?.userGroups?.find(i=>i.uid===o)?.name??""}getBadgeText(e){return(e.firstName?.charAt(0)??"")+(e.lastName?.charAt(0)??"")}startColumnAction(e,o){this.selectedCustomer=e,this.closeModal({actionType:o,selectedUser:e})}changeSortCode(e){this.sortCode=e,this.fetchCustomers()}goToNextPage(){this.currentPage>=this.maxPage?this.currentPage=this.maxPage:this.loaded&&(this.currentPage++,this.fetchCustomers())}goToPreviousPage(){this.currentPage<=0?this.currentPage=0:this.loaded&&(this.currentPage--,this.fetchCustomers())}closeModal(e){this.launchDialogService.closeDialog(e)}getSortLabels(){return(0,G.aj)([this.translation.translate("asm.customerList.tableSort.byNameAsc"),this.translation.translate("asm.customerList.tableSort.byNameDesc"),this.translation.translate("asm.customerList.tableSort.byDateAsc"),this.translation.translate("asm.customerList.tableSort.byDateDesc"),this.translation.translate("asm.customerList.tableSort.byOrderDateAsc"),this.translation.translate("asm.customerList.tableSort.byOrderDateDesc")]).pipe((0,f.U)(([e,o,i,r,u,g])=>({byNameAsc:e,byNameDesc:o,byOrderDateAsc:i,byOrderDateDesc:r,byDateAsc:u,byDateDesc:g})))}getBreakpoint(){return this.breakpointService.breakpoint$.pipe((0,f.U)(e=>((e===m.Bst.lg||e===m.Bst.xl)&&(e=m.Bst.md),e)))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.Q3W),t.Y36(I),t.Y36(m.r),t.Y36(Z),t.Y36(c.D7D),t.Y36(_.AH))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-customer-list"]],decls:34,vars:15,consts:[[1,"cx-asm-customer-list","cx-modal-container","cx-asm-dialog",3,"cxFocus","esc"],[1,"cx-modal-content"],[1,"cx-dialog-header","modal-header"],["id","asm-customer-list-title",1,"title","modal-title"],["id","asm-customer-list-desc",1,"cx-visually-hidden"],[4,"ngTemplateOutlet"],["class","cx-dialog-sub-header modal-header",3,"tablet-mobile",4,"ngIf"],[1,"cx-dialog-body","modal-body"],[1,"cx-dialog-row"],[1,"cx-dialog-item"],[4,"ngIf","ngIfElse"],["cell",""],["cellContent",""],["sort",""],["pagination",""],["groupSelector",""],["spinner",""],["emptyState",""],["closeButton",""],[1,"cx-dialog-sub-header","modal-header"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cx-header-actions"],["id","asm-cusomer-list-table","role","table",1,"table"],[1,"cx-visually-hidden"],[4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["class","cx-empty-state",4,"ngIf"],["role","row"],["role","columnheader","class","cx-avatar-cell",4,"ngIf"],["role","columnheader",4,"ngFor","ngForOf"],["role","columnheader",1,"cx-avatar-cell"],["role","columnheader"],["role","cell","class","cx-avatar-cell",4,"ngIf"],["role","cell","class","cx-multi-cell",4,"ngIf"],["role","cell",1,"cx-avatar-cell"],[1,"cx-avatar"],["role","cell",4,"ngFor","ngForOf"],["role","cell"],["role","cell",1,"cx-multi-cell"],[4,"ngFor","ngForOf"],[1,"cx-empty-state"],[1,"cx-cell-container"],["class","cx-header-text",4,"ngIf"],["class","btn btn-link cx-action-link cx-btn-cell",3,"click",4,"ngIf"],[1,"cx-header-text"],[1,"btn","btn-link","cx-action-link","cx-btn-cell",3,"click"],[3,"cx-action-color","type",4,"ngIf"],[3,"type"],[1,"sort-selector",3,"sortOptions","sortLabels","selectedOption","placeholder","cxNgSelectA11y","sortListEvent"],[1,"cx-pagination-buttons"],["class","btn btn-link cx-action-link cx-btn-previous",3,"disabled","click",4,"ngIf"],["class","btn btn-link cx-action-link cx-btn-next",3,"disabled","click",4,"ngIf"],[1,"btn","btn-link","cx-action-link","cx-btn-previous",3,"disabled","click"],[1,"previous",3,"type"],[1,"btn","btn-link","cx-action-link","cx-btn-next",3,"disabled","click"],[1,"next",3,"type"],["bindLabel","name","bindValue","uid",1,"customer-list-selector",3,"searchable","clearable","tabIndex","ngModel","items","cxNgSelectA11y","change","ngModelChange"],["type","button",1,"close",3,"click"],["aria-hidden","true"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.NdJ("esc",function(){return o.closeModal("Escape clicked")}),t.TgZ(1,"div",1),t.ynx(2),t.TgZ(3,"div",2)(4,"h2",3),t._uU(5),t.ALo(6,"cxTranslate"),t.qZA(),t.TgZ(7,"div",4),t._uU(8),t.ALo(9,"cxTranslate"),t.qZA(),t.YNc(10,fe,1,0,null,5),t.qZA(),t.YNc(11,Le,7,14,"div",6),t.ALo(12,"async"),t.TgZ(13,"div",7)(14,"div",8)(15,"div",9),t.YNc(16,We,10,8,"div",10),t.ALo(17,"async"),t.qZA()()(),t.BQk(),t.qZA()(),t.YNc(18,nn,4,3,"ng-template",null,11,t.W1O),t.YNc(20,rn,2,2,"ng-template",null,12,t.W1O),t.YNc(22,cn,7,14,"ng-template",null,13,t.W1O),t.YNc(24,mn,6,8,"ng-template",null,14,t.W1O),t.YNc(26,pn,5,11,"ng-template",null,15,t.W1O),t.YNc(28,dn,1,0,"ng-template",null,16,t.W1O),t.YNc(30,gn,3,3,"ng-template",null,17,t.W1O),t.YNc(32,_n,4,4,"ng-template",null,18,t.W1O)),2&e){const i=t.MAs(29),r=t.MAs(33);t.Q6J("cxFocus",o.focusConfig),t.xp6(5),t.hij(" ",t.lcZ(6,7,"asm.customerList.title")," "),t.xp6(3),t.hij(" ",t.lcZ(9,9,"asm.customerList.description")," "),t.xp6(2),t.Q6J("ngTemplateOutlet",r),t.xp6(1),t.Q6J("ngIf",t.lcZ(12,11,o.customerListsPage$)),t.xp6(5),t.Q6J("ngIf",t.lcZ(17,13,o.customerSearchPage$))("ngIfElse",i)}},dependencies:[p.sg,p.O5,p.tP,a.JJ,m.oJW,j.w9,a.On,m.ORR,m.RRe,m.VnX,m.iNG,p.Ov,c.X$D],encapsulation:2}),n})(),dialogType:m.Myk.DIALOG}}},yn={launch:{ASM:{outlet:"cx-storefront",component:Ln}}};let Zn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)(yn),(0,c.i51)(bn)],imports:[p.ez,a.UX,c.LUR,m.Fym,m.QX1,j.A0,a.u5,m.Fme,m.Ird,m.oPH,m.LcC,m.U67,c.GSh]}),n})();var x=l(529),At=l(1737);let In=(()=>{class n{constructor(e,o,i,r,u){this.http=e,this.occEndpointsService=o,this.converterService=i,this.config=r,this.baseSiteService=u,this.baseSiteService.getActive().subscribe(g=>this.activeBaseSite=g)}getHeaders(){return c.Fox.createHeader(c.OPk,!0,new x.WM)}customerLists(){const e=this.getHeaders(),o=(new x.LE).set("baseSite",this.activeBaseSite),i=this.occEndpointsService.buildUrl("asmCustomerLists",{},{baseSite:!1,prefix:!1});return this.http.get(i,{headers:e,params:o}).pipe((0,L.K)(r=>(0,At._)((0,c.cxH)(r))),this.converterService.pipeable(yt))}customerSearch(e){const o=this.getHeaders();let i=(new x.LE).set("baseSite",this.activeBaseSite);void 0!==e.sort?i=i.set("sort",e.sort):e.customerListId||(i=i.set("sort","byNameAsc")),void 0!==e.query&&(i=i.set("query",e.query)),void 0!==e.pageSize&&(i=i.set("pageSize",e.pageSize.toString())),void 0!==e.currentPage&&(i=i.set("currentPage",e.currentPage.toString())),void 0!==e.customerListId&&(i=i.set("customerListId",e.customerListId));const r=this.occEndpointsService.buildUrl("asmCustomerSearch",{},{baseSite:!1,prefix:!1});return this.http.get(r,{headers:o,params:i}).pipe(this.converterService.pipeable(bt))}bindCart({cartId:e,customerId:o}){const i=c.Fox.createHeader(c.OPk,!0,new x.WM);let r=(new x.LE).set("baseSite",this.activeBaseSite).set("cartId",e).set("customerId",o);const u=this.occEndpointsService.buildUrl("asmBindCart",{},{baseSite:!1,prefix:!1});return this.http.post(u,{},{headers:i,params:r}).pipe((0,L.K)(g=>(0,At._)((0,c.cxH)(g))))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(x.eN),t.LFG(c.Lz0),t.LFG(c.IXI),t.LFG(Z),t.LFG(c.Do$))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();const En={backend:{occ:{endpoints:{asmCustomerSearch:"/assistedservicewebservices/customers/search",asmCustomerLists:"/assistedservicewebservices/customerlists",asmBindCart:"/assistedservicewebservices/bind-cart"}}}};let Mn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)(En),{provide:K,useClass:In}],imports:[p.ez]}),n})(),Un=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Zn,Jt,Mn]}),n})()}}]);