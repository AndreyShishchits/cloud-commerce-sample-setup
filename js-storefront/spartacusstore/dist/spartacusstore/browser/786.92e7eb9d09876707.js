"use strict";(self.webpackChunkstorefrontapp=self.webpackChunkstorefrontapp||[]).push([[786],{8786:(Jc,me,b)=>{b.r(me),b.d(me,{RulebasedConfiguratorWrapperModule:()=>Qc});var t=b(4650),c=b(1742),y=b(7436),W=b(2654),L=b(1086),he=b(839),Gn=b(6787),xt=b(8723),dt=b(591),Pn=b(6053),Ln=b(8896),ve=b(8003),S=b(2198),h=b(4850),R=b(2994),m=b(2986),v=b(7545),ye=b(2313),It=b(943),J=b(1709),G=b(7221),At=b(1177);class Bn{constructor(o,e){this.keySelector=o,this.flushes=e}call(o,e){return e.subscribe(new Zn(o,this.keySelector,this.flushes))}}class Zn extends At.Ds{constructor(o,e,r){super(o),this.keySelector=e,this.values=new Set,r&&this.add((0,At.ft)(r,new At.IY(this)))}notifyNext(){this.values.clear()}notifyError(o){this._error(o)}_next(o){this.keySelector?this._useKeySelector(o):this._finalizeNext(o,o)}_useKeySelector(o){let e;const{destination:r}=this;try{e=this.keySelector(o)}catch(i){return void r.error(i)}this._finalizeNext(e,o)}_finalizeNext(o,e){const{values:r}=this;r.has(o)||(r.add(o),this.destination.next(e))}}var Ot=b(8849),Vn=b(9184),kn=b(5778),O=b(8555),z=b(5973),X=b(6789),Qn=b(2733),Yn=b(5503),C=b(9764),p=b(6895),f=b(4006),x=b(5024),Z=b(529),j=b(7039),V=b(610);function Jn(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"button",4),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().ngIf,a=t.oxw();return t.KtG(a.onAddToCart(i.configuration,i.routerData))}),t.ALo(3,"cxTranslate"),t.ALo(4,"cxTranslate"),t._uU(5),t.ALo(6,"cxTranslate"),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw().ngIf,r=t.oxw();t.xp6(2),t.uIk("aria-label",t.lcZ(3,2,r.getButtonResourceKey(e.routerData,e.configuration))+" "+t.xi3(4,4,"configurator.a11y.addToCartPrices",r.extractConfigPrices(e.configuration))),t.xp6(3),t.hij(" ",t.lcZ(6,7,r.getButtonResourceKey(e.routerData,e.configuration))," ")}}function Kn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"button",6),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.leaveConfigurationOverview())}),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"configurator.addToCart.buttonDisplayOnly")," "))}function $n(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Jn,7,9,"ng-container",1),t.YNc(2,Kn,4,3,"ng-template",null,2,t.W1O),t.BQk()),2&n){const e=o.ngIf,r=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!e.routerData.displayOnly)("ngIfElse",r)}}function Hn(n,o){if(1&n&&(t.TgZ(0,"div",1),t.ALo(1,"cxTranslate"),t._UZ(2,"cx-icon",2),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA()),2&n){const e=t.oxw();t.s9C("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),t.uIk("aria-label",t.lcZ(1,4,"configurator.attribute.defaultRequiredMessage")),t.xp6(2),t.Q6J("type",e.iconType.ERROR),t.xp6(1),t.hij(" ",t.lcZ(4,6,"configurator.attribute.defaultRequiredMessage"),"\n")}}function Wn(n,o){if(1&n&&(t.TgZ(0,"div",8),t._UZ(1,"cx-icon",9),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("type",e.iconTypes.WARNING),t.xp6(1),t.hij(" ",t.lcZ(3,2,"configurator.attribute.notVisibleAttributeMsg")," ")}}function zn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Wn,4,4,"div",7),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.attribute.visible)}}function Xn(n,o){if(1&n&&t._UZ(0,"cx-icon",9),2&n){const e=t.oxw(2);t.Q6J("type",e.iconTypes.WARNING)}}const tt=function(n){return{attribute:n}};function jn(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.navigateToGroup())})("keydown.enter",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.navigateToGroup())}),t.ALo(2,"cxTranslate"),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(3);t.xp6(1),t.uIk("aria-label",t.xi3(2,2,"configurator.a11y.navigateToConflict",t.VKq(7,tt,e.attribute.label))),t.xp6(2),t.hij(" ",t.lcZ(4,5,e.getConflictMessageKey())," ")}}function tr(n,o){if(1&n&&(t.ynx(0),t.YNc(1,jn,5,9,"ng-container",12),t.BQk()),2&n){const e=t.oxw(2),r=t.MAs(14);t.xp6(1),t.Q6J("ngIf",e.isNavigationToConflictEnabled())("ngIfElse",r)}}function er(n,o){if(1&n&&(t.TgZ(0,"div",10),t.ALo(1,"cxTranslate"),t.YNc(2,Xn,1,1,"cx-icon",11),t.YNc(3,tr,2,2,"ng-container",12),t.qZA()),2&n){const e=t.oxw(),r=t.MAs(12);t.s9C("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),t.uIk("aria-live",e.isAttributeGroup()?"assertive":"off")("aria-atomic",!!e.isAttributeGroup())("role",e.isAttributeGroup()?"alert":null)("aria-label",e.isAttributeGroup()?t.lcZ(1,8,"configurator.a11y.conflictDetected"):""),t.xp6(2),t.Q6J("ngIf",e.isAttributeGroup()),t.xp6(1),t.Q6J("ngIf",e.isAttributeGroup())("ngIfElse",r)}}function nr(n,o){if(1&n&&(t.TgZ(0,"div",14),t.ALo(1,"cxTranslate"),t._UZ(2,"cx-icon",15),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA()),2&n){const e=t.oxw();t.s9C("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),t.uIk("aria-label",t.lcZ(1,4,e.getRequiredMessageKey())),t.xp6(2),t.Q6J("type",e.iconTypes.ERROR),t.xp6(1),t.hij(" ",t.lcZ(4,6,e.getRequiredMessageKey()),"\n")}}function rr(n,o){if(1&n&&t._UZ(0,"img",16),2&n){const e=t.oxw();t.s9C("src",null==e.image?null:e.image.url,t.LSH),t.s9C("alt",null==e.image?null:e.image.altText)}}function ir(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"a",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.navigateToGroup())})("keydown.enter",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.navigateToGroup())}),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.getConflictMessageKey())," ")}}function or(n,o){if(1&n&&(t.TgZ(0,"div",17),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.getConflictMessageKey())," ")}}const ar=function(n){return{param:n}};function ur(n,o){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"cxTranslate"),t.BQk()),2&n&&(t.xp6(1),t.hij("\xa0... ",t.lcZ(2,1,"configurator.button.less"),""))}function cr(n,o){1&n&&(t._uU(0),t.ALo(1,"cxTranslate")),2&n&&t.hij(" \xa0... ",t.lcZ(1,1,"configurator.button.more"),"")}function sr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",3),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.toggleShowMore())}),t.YNc(1,ur,3,3,"ng-container",4),t.YNc(2,cr,2,3,"ng-template",null,5,t.W1O),t.qZA()}if(2&n){const e=t.MAs(3),r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",r.showHiddenText)("ngIfElse",e)}}const lr=function(n){return{item:n}};function pr(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"span",1),t.ALo(2,"cxTranslate"),t.YNc(3,sr,4,2,"button",2),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("innerHTML",e.textToShow,t.oJD),t.uIk("aria-label",t.xi3(2,3,"configurator.a11y.itemDescription",t.VKq(6,lr,e.productName))),t.xp6(2),t.Q6J("ngIf",e.showMore)}}function dr(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1),t.ALo(2,"cxTranslate"),t._uU(3),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",e.styleClass),t.uIk("aria-label",t.lcZ(2,3,"configurator.a11y.valueSurcharge")),t.xp6(2),t.hij(" ",e.price," ")}}function gr(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",2),t.ALo(2,"cxTranslate"),t._uU(3),t.ALo(4,"cxNumeric"),t.qZA(),t.TgZ(5,"div",3),t._uU(6),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.uIk("aria-label",t.lcZ(2,3,"configurator.a11y.valueSurcharge")),t.xp6(2),t.hij(" ",e.quantityWithPrice(t.lcZ(4,5,null==e.formula?null:e.formula.quantity))," "),t.xp6(3),t.Oqu(e.priceTotal)}}function fr(n,o){if(1&n&&(t.ynx(0),t.YNc(1,dr,4,5,"ng-container",0),t.YNc(2,gr,7,7,"ng-container",0),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.displayPriceOnly()),t.xp6(1),t.Q6J("ngIf",e.displayQuantityAndPrice())}}function _r(n,o){if(1&n&&(t.TgZ(0,"div",10),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n){const e=t.oxw().ngIf;t.xp6(1),t.AsE(" ",t.lcZ(2,2,"configurator.attribute.id"),": ",e.code," ")}}function Cr(n,o){if(1&n&&t._UZ(0,"cx-configurator-show-more",11),2&n){const e=t.oxw().ngIf;t.Q6J("text",null==e?null:e.description)("textSize",45)("productName",e.code)}}function mr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-quantity",20),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.onChangeQuantity(i))}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("quantityOptions",e.extractQuantityParameters())}}function hr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(5);return t.KtG(i.onHandleDeselect())}),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()}if(2&n){const e=t.oxw(4).ngIf,r=t.oxw();t.Q6J("cxFocus",r.focusConfig),t.uIk("aria-label",r.getAriaLabelMultiSelected(e))("aria-describedby",r.createAttributeUiKey("label",null==r.productCardOptions?null:r.productCardOptions.attributeName)),t.xp6(1),t.hij(" ",t.lcZ(2,4,"configurator.button.remove")," ")}}function vr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(5);return t.KtG(i.onHandleSelect())}),t.ALo(1,"async"),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA()}if(2&n){const e=t.oxw(4).ngIf,r=t.oxw();t.Q6J("disabled",(null==r.productCardOptions?null:r.productCardOptions.disableAllButtons)||t.lcZ(1,5,r.loading$))("cxFocus",r.focusConfig),t.uIk("aria-label",r.getAriaLabelMultiUnselected(e))("aria-describedby",r.createAttributeUiKey("label",null==r.productCardOptions?null:r.productCardOptions.attributeName)),t.xp6(2),t.hij(" ",t.lcZ(3,7,"configurator.button.add")," ")}}function yr(n,o){if(1&n&&(t.ynx(0),t.YNc(1,hr,3,6,"button",24),t.YNc(2,vr,4,9,"ng-template",null,25,t.W1O),t.BQk()),2&n){const e=t.MAs(3),r=t.oxw(4);t.xp6(1),t.Q6J("ngIf",null==r.productCardOptions||null==r.productCardOptions.productBoundValue?null:r.productCardOptions.productBoundValue.selected)("ngIfElse",e)}}function br(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(5);return t.KtG(i.onHandleSelect())}),t.ALo(1,"async"),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA()}if(2&n){const e=t.oxw(4).ngIf,r=t.oxw();t.Q6J("disabled",(null==r.productCardOptions?null:r.productCardOptions.disableAllButtons)||t.lcZ(1,5,r.loading$))("cxFocus",r.focusConfig),t.uIk("aria-label",r.getAriaLabelSingleUnselected(e))("aria-describedby",r.createAttributeUiKey("label",null==r.productCardOptions?null:r.productCardOptions.attributeName)),t.xp6(2),t.hij(" ",t.lcZ(3,7,"configurator.button.select")," ")}}function Tr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(7);return t.KtG(i.onHandleDeselect())}),t.ALo(1,"async"),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA()}if(2&n){const e=t.oxw(6).ngIf,r=t.oxw();t.Q6J("disabled",(null==r.productCardOptions?null:r.productCardOptions.hideRemoveButton)||t.lcZ(1,5,r.loading$))("cxFocus",r.focusConfig),t.uIk("aria-label",r.getAriaLabelSingleSelected(e))("aria-describedby",r.createAttributeUiKey("label",null==r.productCardOptions?null:r.productCardOptions.attributeName)),t.xp6(2),t.hij(" ",t.lcZ(3,7,"configurator.button.deselect")," ")}}function xr(n,o){if(1&n&&(t.TgZ(0,"span",33),t._uU(1),t.qZA()),2&n){const e=t.oxw(6).ngIf,r=t.oxw();t.xp6(1),t.hij(" ",r.getAriaLabelSingleSelectedNoButton(e)," ")}}function Ir(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Tr,4,9,"button",30),t.YNc(2,xr,2,1,"span",31),t.BQk()),2&n){const e=t.oxw(6);t.xp6(1),t.Q6J("ngIf",!(null!=e.productCardOptions&&e.productCardOptions.hideRemoveButton)),t.xp6(1),t.Q6J("ngIf",null==e.productCardOptions?null:e.productCardOptions.hideRemoveButton)}}function Ar(n,o){if(1&n&&t.YNc(0,Ir,3,2,"ng-container",0),2&n){const e=t.oxw(5);t.Q6J("ngIf",e.isValueCodeDefined(null==e.productCardOptions||null==e.productCardOptions.productBoundValue?null:e.productCardOptions.productBoundValue.valueCode))}}function Or(n,o){if(1&n&&(t.YNc(0,br,4,9,"button",28),t.YNc(1,Ar,1,1,"ng-template",null,29,t.W1O)),2&n){const e=t.MAs(2),r=t.oxw(4);t.Q6J("ngIf",!(null!=r.productCardOptions&&null!=r.productCardOptions.productBoundValue&&r.productCardOptions.productBoundValue.selected))("ngIfElse",e)}}function wr(n,o){if(1&n&&(t.TgZ(0,"div",21),t.YNc(1,yr,4,2,"ng-container",22),t.YNc(2,Or,3,2,"ng-template",null,23,t.W1O),t.qZA()),2&n){const e=t.MAs(3),r=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==r.productCardOptions?null:r.productCardOptions.multiSelect)("ngIfElse",e)}}function Sr(n,o){if(1&n&&(t.TgZ(0,"div",12)(1,"div",13)(2,"div",14),t.YNc(3,mr,1,1,"cx-configurator-attribute-quantity",15),t.qZA(),t.TgZ(4,"div",16),t._UZ(5,"cx-configurator-price",17),t.qZA()(),t.TgZ(6,"div",18),t.YNc(7,wr,4,2,"div",19),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.showQuantity),t.xp6(2),t.Q6J("formula",e.extractPriceFormulaParameters()),t.xp6(2),t.Q6J("ngIf",!(null!=e.productCardOptions&&e.productCardOptions.singleDropdown))}}function Er(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",34),t._UZ(2,"cx-icon",35),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.s9C("id",e.createAttributeUiKey("attribute-msg",null==e.productCardOptions?null:e.productCardOptions.attributeName)),t.xp6(2),t.hij(" ",t.lcZ(4,2,"configurator.attribute.deselectionNotPossible")," ")}}const Ur=function(n){return{"cx-product-card-selected":n}};function Nr(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1),t.ALo(2,"cxTranslate"),t.TgZ(3,"div",2)(4,"div",3),t._UZ(5,"cx-media",4),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"p"),t._uU(9),t.qZA()(),t.YNc(10,_r,3,4,"div",7),t.YNc(11,Cr,1,3,"cx-configurator-show-more",8),t.qZA()(),t.YNc(12,Sr,8,3,"div",9),t.YNc(13,Er,5,4,"ng-container",0),t.qZA(),t.BQk()),2&n){const e=o.ngIf,r=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(11,Ur,r.isProductCardSelected())),t.uIk("aria-label",t.xi3(2,8,"configurator.a11y.itemOfAttribute",t.VKq(13,tt,null==r.productCardOptions?null:r.productCardOptions.attributeLabel))),t.xp6(4),t.Q6J("container",null==e||null==e.images?null:e.images.PRIMARY),t.xp6(4),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("ngIf",e.code),t.xp6(1),t.Q6J("ngIf",null==e?null:e.description),t.xp6(1),t.Q6J("ngIf",!r.productCardOptions.singleDropdown||r.hasPriceDisplay()),t.xp6(1),t.Q6J("ngIf",r.showDeselectionNotPossible)}}function Rr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"cx-configurator-attribute-quantity",5),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onChangeQuantity(i))}),t.qZA(),t._UZ(2,"cx-configurator-price",6),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("quantityOptions",e.extractQuantityParameters(e.attribute.quantity,!e.attribute.required)),t.xp6(1),t.Q6J("formula",e.extractPriceFormulaParameters())}}function Dr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-quantity",5),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw(),u=a.$implicit,d=a.index,g=t.oxw();return t.KtG(g.onChangeValueQuantity(i,u.valueCode,d))}),t.qZA()}if(2&n){const e=t.oxw().$implicit,r=t.oxw();t.Q6J("quantityOptions",r.extractQuantityParameters(e.quantity,r.allowZeroValueQuantity))}}const P=function(n){return{key:n}},k=function(n,o,e){return{value:n,attribute:o,price:e}},D=function(n,o){return{value:n,attribute:o}};function Fr(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",7)(2,"div",8)(3,"input",9),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSelect())}),t.ALo(4,"cxTranslate"),t.ALo(5,"cxTranslate"),t.ALo(6,"cxTranslate"),t.qZA(),t.TgZ(7,"label",10),t._uU(8),t.qZA()(),t.TgZ(9,"div",11),t._UZ(10,"cx-configurator-price",6),t.qZA()(),t.YNc(11,Dr,1,1,"cx-configurator-attribute-quantity",12),t.BQk()}if(2&n){const e=o.$implicit,r=o.index,i=t.oxw();t.xp6(3),t.s9C("id",i.createAttributeValueIdForConfigurator(i.attribute,e.valueCode)),t.s9C("name",i.createAttributeIdForConfigurator(i.attribute)),t.Q6J("cxFocus",t.VKq(21,P,i.attribute.name+"-"+e.name))("value",e.valueCode)("formControl",i.attributeCheckBoxForms[r]),t.uIk("aria-label",e.valuePrice&&0!==(null==e.valuePrice?null:e.valuePrice.value)?e.valuePriceTotal&&0!==(null==e.valuePriceTotal?null:e.valuePriceTotal.value)?t.xi3(4,12,"configurator.a11y.valueOfAttributeFullWithPrice",t.kEZ(23,k,e.valueDisplay,i.attribute.label,e.valuePriceTotal.formattedValue)):t.xi3(5,15,"configurator.a11y.valueOfAttributeFullWithPrice",t.kEZ(27,k,e.valueDisplay,i.attribute.label,e.valuePrice.formattedValue)):t.xi3(6,18,"configurator.a11y.valueOfAttributeFull",t.WLB(31,D,e.valueDisplay,i.attribute.label)))("aria-describedby",i.createAttributeUiKey("label",i.attribute.name)),t.xp6(4),t.s9C("id",i.createValueUiKey("label",i.attribute.name,e.valueCode)),t.s9C("for",i.createAttributeValueIdForConfigurator(i.attribute,e.valueCode)),t.xp6(1),t.Oqu(i.getLabel(i.expMode,e.valueDisplay,e.valueCode)),t.xp6(2),t.Q6J("formula",i.extractValuePriceFormulaParameters(e)),t.xp6(1),t.Q6J("ngIf",e.selected&&i.withQuantity&&!i.withQuantityOnAttributeLevel)}}function Mr(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"input",3),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSelect())}),t.ALo(4,"cxTranslate"),t.qZA(),t.TgZ(5,"label",4),t._uU(6),t.qZA()()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.s9C("id",e.createAttributeIdForConfigurator(e.attribute)),t.xp6(2),t.s9C("id",e.createAttributeValueIdForConfigurator(e.attribute,null==e.attribute?null:e.attribute.values[0].valueCode)),t.s9C("name",e.createAttributeIdForConfigurator(e.attribute)),t.Q6J("value",null==e.attribute?null:e.attribute.values[0].valueCode)("cxFocus",t.VKq(14,P,e.attribute.name+"-"+(null==e.attribute?null:e.attribute.values[0].name)))("formControl",e.attributeCheckBoxForm),t.uIk("aria-label",t.xi3(4,11,"configurator.a11y.valueOfAttributeFull",t.WLB(16,D,null==e.attribute?null:e.attribute.values[0].valueDisplay,e.attribute.label)))("aria-describedby",e.createAttributeUiKey("label",e.attribute.name)),t.xp6(2),t.s9C("id",e.createValueUiKey("label",e.attribute.name,null==e.attribute?null:e.attribute.values[0].valueCode)),t.s9C("for",e.createAttributeValueIdForConfigurator(e.attribute,null==e.attribute?null:e.attribute.values[0].valueCode)),t.xp6(1),t.Oqu(null==e.attribute?null:e.attribute.values[0].valueDisplay)}}function Gr(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"fieldset")(2,"legend",5),t._uU(3),t.qZA(),t.TgZ(4,"div",1)(5,"div",2)(6,"div",6)(7,"input",3),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSelect())}),t.ALo(8,"cxTranslate"),t.ALo(9,"cxTranslate"),t.qZA(),t.TgZ(10,"label",4),t._uU(11),t.qZA()(),t.TgZ(12,"div",7),t._UZ(13,"cx-configurator-price",8),t.qZA()()()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.attribute.label),t.xp6(1),t.s9C("id",e.createAttributeIdForConfigurator(e.attribute)),t.xp6(3),t.s9C("id",e.createAttributeValueIdForConfigurator(e.attribute,null==e.attribute?null:e.attribute.values[0].valueCode)),t.s9C("name",e.createAttributeIdForConfigurator(e.attribute)),t.Q6J("value",null==e.attribute?null:e.attribute.values[0].valueCode)("cxFocus",t.VKq(19,P,e.attribute.name+"-"+(null==e.attribute?null:e.attribute.values[0].name)))("formControl",e.attributeCheckBoxForm),t.uIk("aria-label",null!=e.attribute&&e.attribute.values[0].valuePrice&&0!==(null==e.attribute||null==e.attribute.values[0].valuePrice?null:e.attribute.values[0].valuePrice.value)?t.xi3(8,13,"configurator.a11y.valueOfAttributeFullWithPrice",t.kEZ(21,k,null==e.attribute?null:e.attribute.values[0].valueDisplay,e.attribute.label,null==e.attribute?null:e.attribute.values[0].valuePrice.formattedValue)):t.xi3(9,16,"configurator.a11y.valueOfAttributeFull",t.WLB(25,D,null==e.attribute?null:e.attribute.values[0].valueDisplay,e.attribute.label)))("aria-describedby",e.createAttributeUiKey("label",e.attribute.name)+" "+e.createAttributeUiKey("attribute-msg",e.attribute.name)),t.xp6(3),t.s9C("id",e.createValueUiKey("label",e.attribute.name,null==e.attribute?null:e.attribute.values[0].valueCode)),t.s9C("for",e.createAttributeValueIdForConfigurator(e.attribute,null==e.attribute?null:e.attribute.values[0].valueCode)),t.xp6(1),t.Oqu(e.getLabel(e.expMode,null==e.attribute?null:e.attribute.values[0].valueDisplay,null==e.attribute?null:e.attribute.values[0].valueCode)),t.xp6(2),t.Q6J("formula",e.extractValuePriceFormulaParameters(null==e.attribute?null:e.attribute.values[0]))}}function Pr(n,o){if(1&n&&(t.TgZ(0,"label",4),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.getHelpTextForInterval())}}const Lr=function(n){return{pattern:n}};function qr(n,o){if(1&n&&(t.TgZ(0,"div",5),t._UZ(1,"cx-icon",6),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA()),2&n){const e=t.oxw();t.s9C("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),t.xp6(1),t.Q6J("type",e.iconType.WARNING),t.xp6(1),t.hij(" ",t.xi3(3,3,"configurator.attribute.wrongNumericFormat",t.VKq(6,Lr,e.numericFormatPattern)),"\n")}}function Br(n,o){if(1&n&&(t.TgZ(0,"option",9),t._uU(1),t.qZA()),2&n){const e=o.$implicit,r=t.oxw(2);t.Q6J("label",r.getLabel(r.expMode,e.valueDisplay,e.valueCode))("selected",e.selected)("value",e.valueCode),t.uIk("aria-label",r.getAriaLabel(e,r.attribute)),t.xp6(1),t.hij(" ",r.getLabel(r.expMode,e.valueDisplay,e.valueCode)," ")}}function Zr(n,o){if(1&n&&(t.TgZ(0,"div",10),t._UZ(1,"cx-configurator-price",11),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("formula",e.extractValuePriceFormulaParameters(e.getSelectedValue()))}}const gt=function(n){return{count:n}};function Vr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"label",5),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"select",6),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSelect(i.attributeDropDownForm.value))}),t.YNc(5,Br,2,5,"option",7),t.qZA(),t.YNc(6,Zr,2,1,"div",8),t.qZA()}if(2&n){const e=t.oxw();let r;t.xp6(1),t.s9C("for",e.createAttributeIdForConfigurator(e.attribute)),t.xp6(1),t.hij(" ",t.xi3(3,8,"configurator.a11y.listbox",t.VKq(11,gt,e.attribute.values.length))," "),t.xp6(2),t.s9C("id",e.createAttributeIdForConfigurator(e.attribute)),t.Q6J("formControl",e.attributeDropDownForm)("cxFocus",t.VKq(13,P,e.attribute.name)),t.uIk("aria-describedby",e.createAttributeUiKey("label",e.attribute.name)),t.xp6(1),t.Q6J("ngForOf",e.attribute.values),t.xp6(1),t.Q6J("ngIf",!e.withQuantity&&(null==(r=e.getSelectedValue())?null:r.valuePrice))}}function kr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"cx-configurator-attribute-quantity",13),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onChangeQuantity(i,a.attributeDropDownForm))}),t.qZA(),t._UZ(2,"cx-configurator-price",11),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("quantityOptions",e.extractQuantityParameters(e.attributeDropDownForm)),t.xp6(1),t.Q6J("formula",e.extractPriceFormulaParameters())}}function Qr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-numeric-input-field",14),t.NdJ("inputChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onSelectAdditionalValue(i))}),t.ALo(1,"cxTranslate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("attribute",e.attribute)("ownerType",e.ownerType)("ownerKey",e.ownerKey)("language",e.language),t.uIk("aria-label",t.lcZ(1,5,"configurator.a11y.additionalValue"))}}function Yr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-input-field",15),t.NdJ("inputChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onSelectAdditionalValue(i))}),t.ALo(1,"cxTranslate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("attribute",e.attribute)("ownerType",e.ownerType)("ownerKey",e.ownerKey),t.uIk("aria-label",t.lcZ(1,4,"configurator.a11y.additionalValue"))}}function Jr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"cx-configurator-attribute-quantity",5),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onChangeAttributeQuantity(i))}),t.qZA(),t._UZ(2,"cx-configurator-price",6),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("quantityOptions",e.extractQuantityParameters(e.attribute.quantity)),t.xp6(1),t.Q6J("formula",e.extractPriceFormulaParameters())}}function Kr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-product-card",7),t.NdJ("handleDeselect",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onDeselect(i))})("handleQuantity",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onChangeValueQuantity(i))})("handleSelect",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onSelect(i))}),t.ALo(1,"async"),t.ALo(2,"async"),t.qZA()}if(2&n){const e=o.$implicit,r=o.index,i=t.oxw(2);t.s9C("id",i.createAttributeValueIdForConfigurator(i.attribute,null==e?null:e.valueCode)),t.Q6J("productCardOptions",i.extractProductCardParameters(t.lcZ(1,2,i.loading$),t.lcZ(2,4,i.preventAction$),e,r))}}function $r(n,o){if(1&n&&(t.TgZ(0,"div",1),t.YNc(1,Jr,3,2,"div",2),t.YNc(2,Kr,3,6,"cx-configurator-attribute-product-card",3),t.qZA()),2&n){const e=t.oxw();t.s9C("id",e.createAttributeIdForConfigurator(e.attribute)),t.xp6(1),t.Q6J("ngIf",e.withQuantityOnAttributeLevel),t.xp6(1),t.Q6J("ngForOf",null==e.attribute?null:e.attribute.values)}}function Hr(n,o){if(1&n&&t._UZ(0,"img",9),2&n){const e=t.oxw().$implicit;t.s9C("src",e.images[0].url,t.LSH),t.s9C("alt",e.images[0].altText)}}function Wr(n,o){1&n&&t._UZ(0,"div",10)}function zr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"input",3),t.NdJ("click",function(){const a=t.CHM(e).index,u=t.oxw();return t.KtG(u.onSelect(a))}),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t.YNc(6,Hr,1,2,"img",6),t.YNc(7,Wr,1,0,"div",7),t._uU(8),t._UZ(9,"cx-configurator-price",8),t.qZA()()()}if(2&n){const e=o.$implicit,r=o.index,i=t.oxw();t.s9C("id",i.createAttributeValueIdForConfigurator(i.attribute,e.valueCode)),t.xp6(1),t.s9C("id",i.createAttributeValueIdForConfigurator(i.attribute,e.valueCode)+"-input"),t.s9C("name",i.createAttributeIdForConfigurator(i.attribute)),t.Q6J("value",e.valueCode)("formControl",i.attributeCheckBoxForms[r])("cxFocus",t.VKq(21,P,i.attribute.name+"-"+e.name)),t.uIk("aria-label",e.valuePrice&&0!==(null==e.valuePrice?null:e.valuePrice.value)?t.xi3(2,15,"configurator.a11y.valueOfAttributeFullWithPrice",t.kEZ(23,k,e.valueDisplay,i.attribute.label,e.valuePrice.formattedValue)):t.xi3(3,18,"configurator.a11y.valueOfAttributeFull",t.WLB(27,D,e.valueDisplay,i.attribute.label)))("aria-describedby",i.createAttributeUiKey("label",i.attribute.name))("checked",i.attributeCheckBoxForms[r].value?"checked":null),t.xp6(4),t.s9C("id",i.createValueUiKey("label",i.attribute.name,e.valueCode)),t.s9C("for",i.createAttributeValueIdForConfigurator(i.attribute,e.valueCode)+"-input"),t.xp6(1),t.Q6J("ngIf",e.images[0]),t.xp6(1),t.Q6J("ngIf",!e.images[0]),t.xp6(1),t.hij(" ",i.getLabel(i.expMode,e.valueDisplay,e.valueCode)," "),t.xp6(1),t.Q6J("formula",i.extractValuePriceFormulaParameters(e))}}function Xr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"cx-configurator-attribute-quantity",7),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onChangeQuantity(i))}),t.qZA(),t._UZ(2,"cx-configurator-price",8),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("quantityOptions",e.extractQuantityParameters()),t.xp6(1),t.Q6J("formula",e.extractPriceFormulaParameters())}}function jr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"input",11),t.NdJ("change",function(){const a=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.onSelect(a.valueCode))}),t.qZA(),t.TgZ(3,"label",12),t._uU(4),t.qZA()(),t.TgZ(5,"div",13),t._UZ(6,"cx-configurator-price",8),t.qZA()()}if(2&n){const e=o.$implicit,r=t.oxw();t.xp6(2),t.s9C("id",r.createAttributeValueIdForConfigurator(r.attribute,e.valueCode)),t.s9C("name",r.createAttributeIdForConfigurator(r.attribute)),t.Q6J("formControl",r.attributeRadioButtonForm)("value",e.valueCode)("cxFocus",t.VKq(14,P,r.attribute.name+"-"+e.name)),t.uIk("required",r.attribute.required)("name",r.createAttributeIdForConfigurator(r.attribute))("aria-label",r.getAriaLabel(e,r.attribute))("checked",r.attributeRadioButtonForm.value===e.valueCode?"checked":null)("aria-describedby",r.createAttributeUiKey("label",r.attribute.name)),t.xp6(1),t.s9C("id",r.createValueUiKey("label",r.attribute.name,e.valueCode)),t.s9C("for",r.createAttributeValueIdForConfigurator(r.attribute,e.valueCode)),t.xp6(1),t.Oqu(r.getLabel(r.expMode,e.valueDisplay,e.valueCode)),t.xp6(2),t.Q6J("formula",r.extractValuePriceFormulaParameters(e))}}function ti(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-numeric-input-field",14),t.NdJ("inputChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onSelectAdditionalValue(i))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("attribute",e.attribute)("ownerType",e.ownerType)("ownerKey",e.ownerKey)("language",e.language)}}function ei(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-input-field",15),t.NdJ("inputChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onSelectAdditionalValue(i))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("attribute",e.attribute)("ownerType",e.ownerType)("ownerKey",e.ownerKey)}}function ni(n,o){if(1&n&&(t.TgZ(0,"span",7),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n){const e=t.oxw().$implicit,r=t.oxw(3);t.s9C("id",r.createValueUiKey("label",r.attribute.name,e.valueCode)),t.xp6(1),t.hij(" ",t.xi3(2,2,"configurator.a11y.readOnlyValueOfAttributeFull",t.WLB(5,D,e.valueDisplay,r.attribute.label))," ")}}function ri(n,o){if(1&n&&(t.TgZ(0,"div",8)(1,"span",9),t._uU(2),t.qZA()()),2&n){const e=t.oxw().$implicit,r=t.oxw(3);t.xp6(2),t.Oqu(r.getLabel(r.expMode,e.valueDisplay,e.valueCode))}}function ii(n,o){if(1&n&&(t.ynx(0),t.YNc(1,ni,3,8,"span",5),t.YNc(2,ri,3,1,"div",6),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.selected),t.xp6(1),t.Q6J("ngIf",e.selected)}}function oi(n,o){if(1&n&&(t.ynx(0),t.YNc(1,ii,3,2,"ng-container",4),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.attribute.values)}}function ai(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"span",7),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"div",8)(5,"span",9),t._uU(6),t.qZA()(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.s9C("id",e.createValueUiKey("label",e.attribute.name,e.attribute.selectedSingleValue)),t.xp6(1),t.hij(" ",t.xi3(3,3,"configurator.a11y.readOnlyValueOfAttributeFull",t.WLB(6,D,e.attribute.selectedSingleValue,e.attribute.label))," "),t.xp6(4),t.Oqu(e.attribute.selectedSingleValue)}}function ui(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"span",7),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"div",8)(5,"span",9),t._uU(6),t.qZA()(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.s9C("id",e.createValueUiKey("label",e.attribute.name,e.attribute.userInput)),t.xp6(1),t.hij(" ",t.xi3(3,3,"configurator.a11y.readOnlyValueOfAttributeFull",t.WLB(6,D,e.attribute.userInput,e.attribute.label))," "),t.xp6(4),t.Oqu(e.attribute.userInput)}}function ci(n,o){if(1&n&&(t.YNc(0,ai,7,9,"ng-container",10),t.YNc(1,ui,7,9,"ng-container",10)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.attribute.selectedSingleValue),t.xp6(1),t.Q6J("ngIf",e.attribute.userInput)}}function si(n,o){if(1&n&&(t.TgZ(0,"div",1),t.YNc(1,oi,2,1,"ng-container",2),t.YNc(2,ci,2,2,"ng-template",null,3,t.W1O),t.qZA()),2&n){const e=t.MAs(3),r=t.oxw();t.s9C("id",r.createAttributeIdForConfigurator(r.attribute)),t.xp6(1),t.Q6J("ngIf",void 0!==r.attribute.values&&r.attribute.values.length>0)("ngIfElse",e)}}function li(n,o){if(1&n&&(t.TgZ(0,"option",7),t.ALo(1,"cxTranslate"),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t._uU(4),t.qZA()),2&n){const e=o.$implicit,r=t.oxw(2);t.Q6J("label",e.valueDisplay)("selected",e.selected)("value",e.valueCode)("value",e.valueCode),t.uIk("aria-label","0"===e.valueCode?t.xi3(1,6,"configurator.a11y.forAttribute",t.WLB(15,D,e.valueDisplay,r.attribute.label)):e.valuePrice&&0!==(null==e.valuePrice?null:e.valuePrice.value)?t.xi3(2,9,"configurator.a11y.selectedValueOfAttributeFullWithPrice",t.kEZ(18,k,e.valueDisplay,r.attribute.label,e.valuePriceTotal.formattedValue)):t.xi3(3,12,"configurator.a11y.selectedValueOfAttributeFull",t.WLB(22,D,e.valueDisplay,r.attribute.label))),t.xp6(4),t.hij(" ",e.valueDisplay," ")}}function pi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"label",4),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"select",5),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSelect(i.attributeDropDownForm.value))}),t.YNc(5,li,5,25,"option",6),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.s9C("for",e.createAttributeIdForConfigurator(e.attribute)),t.xp6(1),t.hij(" ",t.xi3(3,7,"configurator.a11y.listbox",t.VKq(10,gt,null==e.attribute.values?null:e.attribute.values.length))," "),t.xp6(2),t.s9C("id",e.createAttributeIdForConfigurator(e.attribute)),t.Q6J("formControl",e.attributeDropDownForm)("cxFocus",t.VKq(12,P,e.attribute.name)),t.uIk("aria-describedby",e.createAttributeUiKey("label",e.attribute.name)),t.xp6(1),t.Q6J("ngForOf",e.attribute.values)}}function di(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-product-card",8),t.NdJ("handleDeselect",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSelect("0"))}),t.qZA()}if(2&n){const e=t.oxw();t.s9C("id",e.createAttributeValueIdForConfigurator(e.attribute,e.selectionValue.valueCode)),t.Q6J("productCardOptions",e.extractProductCardParameters())}}function gi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"cx-configurator-attribute-quantity",10),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onChangeQuantity(i,a.attributeDropDownForm))}),t.qZA(),t._UZ(2,"cx-configurator-price",11),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("quantityOptions",e.extractQuantityParameters(e.attributeDropDownForm)),t.xp6(1),t.Q6J("formula",e.extractPriceFormulaParameters())}}function fi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"cx-configurator-attribute-quantity",5),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onChangeQuantity(i))}),t.qZA(),t._UZ(2,"cx-configurator-price",6),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("quantityOptions",e.extractQuantityParameters()),t.xp6(1),t.Q6J("formula",e.extractPriceFormulaParameters())}}function _i(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-product-card",7),t.NdJ("handleDeselect",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSelect(""))})("handleSelect",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onSelect(i))}),t.qZA()}if(2&n){const e=o.$implicit,r=o.index,i=t.oxw(2);t.Q6J("id",i.createAttributeValueIdForConfigurator(i.attribute,null==e?null:e.valueCode))("productCardOptions",i.extractProductCardParameters(e,r))}}function Ci(n,o){if(1&n&&(t.TgZ(0,"div",1),t.YNc(1,fi,3,2,"div",2),t.YNc(2,_i,1,2,"cx-configurator-attribute-product-card",3),t.qZA()),2&n){const e=t.oxw();t.s9C("id",e.createAttributeIdForConfigurator(e.attribute)),t.xp6(1),t.Q6J("ngIf",e.withQuantity),t.xp6(1),t.Q6J("ngForOf",null==e.attribute?null:e.attribute.values)}}function mi(n,o){if(1&n&&t._UZ(0,"img",9),2&n){const e=t.oxw().$implicit;t.s9C("src",e.images[0].url,t.LSH),t.s9C("alt",e.images[0].altText)}}function hi(n,o){1&n&&t._UZ(0,"div",10)}function vi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"input",3),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.onClick(a.valueCode))}),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t.YNc(6,mi,1,2,"img",6),t.YNc(7,hi,1,0,"div",7),t._uU(8),t._UZ(9,"cx-configurator-price",8),t.qZA()()()}if(2&n){const e=o.$implicit,r=t.oxw();t.s9C("id",r.createAttributeValueIdForConfigurator(r.attribute,e.valueCode)),t.xp6(1),t.s9C("id",r.createAttributeValueIdForConfigurator(r.attribute,e.valueCode)+"-input"),t.s9C("name",r.createAttributeIdForConfigurator(r.attribute)),t.Q6J("value",e.valueCode)("formControl",r.attributeRadioButtonForm)("value",e.valueCode)("cxFocus",t.VKq(25,P,r.attribute.name+"-"+e.name)),t.uIk("name",r.createAttributeIdForConfigurator(r.attribute))("required",r.attribute.required)("checked",r.attributeRadioButtonForm.value===e.valueCode?"checked":null)("aria-checked",r.attributeRadioButtonForm.value===e.valueCode?"true":"false")("aria-label",e.valuePrice&&0!==(null==e.valuePrice?null:e.valuePrice.value)?t.xi3(2,19,"configurator.a11y.valueOfAttributeFullWithPrice",t.kEZ(27,k,e.valueDisplay,r.attribute.label,e.valuePrice.formattedValue)):t.xi3(3,22,"configurator.a11y.valueOfAttributeFull",t.WLB(31,D,e.valueDisplay,r.attribute.label)))("aria-describedby",r.createAttributeUiKey("label",r.attribute.name)),t.xp6(4),t.s9C("id",r.createValueUiKey("label",r.attribute.name,e.valueCode)),t.s9C("for",r.createAttributeValueIdForConfigurator(r.attribute,e.valueCode)+"-input"),t.xp6(1),t.Q6J("ngIf",e.images[0]),t.xp6(1),t.Q6J("ngIf",!e.images[0]),t.xp6(1),t.hij(" ",r.getLabel(r.expMode,e.valueDisplay,e.valueCode)," "),t.xp6(1),t.Q6J("formula",r.extractValuePriceFormulaParameters(e))}}function yi(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"cx-icon",1),t._uU(2),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("type",e.iconTypes.WARNING),t.xp6(1),t.hij(" ",e.currentGroup.name,"\n")}}const wt=function(n){return{number:n}};function bi(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t.TgZ(4,"span",2),t._uU(5),t.ALo(6,"cxTranslate"),t.qZA()(),t.TgZ(7,"span",2),t._uU(8),t.ALo(9,"cxTranslate"),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.uIk("aria-label",t.xi3(2,3,"configurator.conflict.suggestionTitle",t.VKq(15,wt,e.suggestionNumber+1))+" "+t.xi3(3,6,"configurator.conflict.suggestionText",t.VKq(17,tt,e.attribute.label))),t.xp6(4),t.Oqu(t.xi3(6,9,"configurator.conflict.suggestionTitle",t.VKq(19,wt,e.suggestionNumber+1))),t.xp6(3),t.Oqu(t.xi3(9,12,"configurator.conflict.suggestionText",t.VKq(21,tt,e.attribute.label)))}}function Ti(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"cx-configurator-conflict-description",5),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("currentGroup",e)}}function xi(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"cx-configurator-conflict-suggestion",18),t.BQk()),2&n){const e=t.oxw(2),r=e.$implicit,i=e.index,a=t.oxw().ngIf;t.xp6(1),t.Q6J("currentGroup",a)("attribute",r)("suggestionNumber",i)}}function Ii(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-radio-button",19),t.NdJ("selectionChange",function(i){t.CHM(e);const a=t.oxw(5);return t.KtG(a.updateConfiguration(i))}),t.ALo(1,"async"),t.qZA()}if(2&n){const e=t.oxw().ngIf,r=t.oxw().$implicit,i=t.oxw(2).ngIf,a=t.oxw();t.Q6J("attribute",r)("ownerKey",i.owner.key)("ownerType",i.owner.type)("language",e)("expMode",t.lcZ(1,5,a.expMode))}}function Ai(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-single-selection-bundle",20),t.NdJ("selectionChange",function(i){t.CHM(e);const a=t.oxw(5);return t.KtG(a.updateConfiguration(i))}),t.qZA()}if(2&n){const e=t.oxw(2).$implicit,r=t.oxw(2).ngIf;t.Q6J("attribute",e)("ownerKey",r.owner.key)}}function Oi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-multi-selection-bundle",20),t.NdJ("selectionChange",function(i){t.CHM(e);const a=t.oxw(5);return t.KtG(a.updateConfiguration(i))}),t.qZA()}if(2&n){const e=t.oxw(2).$implicit,r=t.oxw(2).ngIf;t.Q6J("attribute",e)("ownerKey",r.owner.key)}}function wi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-single-selection-bundle-dropdown",21),t.NdJ("selectionChange",function(i){t.CHM(e);const a=t.oxw(5);return t.KtG(a.updateConfiguration(i))}),t.qZA()}if(2&n){const e=t.oxw(2).$implicit,r=t.oxw().ngIf,i=t.oxw().ngIf;t.Q6J("attribute",e)("group",r.id)("ownerKey",i.owner.key)}}function Si(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-drop-down",22),t.NdJ("selectionChange",function(i){t.CHM(e);const a=t.oxw(5);return t.KtG(a.updateConfiguration(i))}),t.ALo(1,"async"),t.qZA()}if(2&n){const e=t.oxw().ngIf,r=t.oxw().$implicit,i=t.oxw().ngIf,a=t.oxw().ngIf,u=t.oxw();t.Q6J("attribute",r)("group",i.id)("ownerKey",a.owner.key)("ownerType",a.owner.type)("language",e)("expMode",t.lcZ(1,6,u.expMode))}}function Ei(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-input-field",23),t.NdJ("inputChange",function(i){t.CHM(e);const a=t.oxw(5);return t.KtG(a.updateConfiguration(i))}),t.qZA()}if(2&n){const e=t.oxw(2).$implicit,r=t.oxw().ngIf,i=t.oxw().ngIf;t.Q6J("attribute",e)("group",r.id)("ownerType",i.owner.type)("ownerKey",i.owner.key)}}function Ui(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-numeric-input-field",24),t.NdJ("inputChange",function(i){t.CHM(e);const a=t.oxw(5);return t.KtG(a.updateConfiguration(i))}),t.qZA()}if(2&n){const e=t.oxw().ngIf,r=t.oxw().$implicit,i=t.oxw().ngIf,a=t.oxw().ngIf;t.Q6J("attribute",r)("group",i.id)("ownerType",a.owner.type)("ownerKey",a.owner.key)("language",e)}}function Ni(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-checkbox-list",25),t.NdJ("selectionChange",function(i){t.CHM(e);const a=t.oxw(5);return t.KtG(a.updateConfiguration(i))}),t.ALo(1,"async"),t.qZA()}if(2&n){const e=t.oxw(2).$implicit,r=t.oxw().ngIf,i=t.oxw().ngIf,a=t.oxw();t.Q6J("attribute",e)("group",r.id)("ownerKey",i.owner.key)("expMode",t.lcZ(1,4,a.expMode))}}function Ri(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-checkbox",25),t.NdJ("selectionChange",function(i){t.CHM(e);const a=t.oxw(5);return t.KtG(a.updateConfiguration(i))}),t.ALo(1,"async"),t.qZA()}if(2&n){const e=t.oxw(2).$implicit,r=t.oxw().ngIf,i=t.oxw().ngIf,a=t.oxw();t.Q6J("attribute",e)("group",r.id)("ownerKey",i.owner.key)("expMode",t.lcZ(1,4,a.expMode))}}function Di(n,o){if(1&n&&(t._UZ(0,"cx-configurator-attribute-read-only",26),t.ALo(1,"async")),2&n){const e=t.oxw(2).$implicit,r=t.oxw().ngIf,i=t.oxw(2);t.Q6J("attribute",e)("group",r.id)("expMode",t.lcZ(1,3,i.expMode))}}function Fi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-multi-selection-image",27),t.NdJ("selectionChange",function(i){t.CHM(e);const a=t.oxw(5);return t.KtG(a.updateConfiguration(i))}),t.ALo(1,"async"),t.qZA()}if(2&n){const e=t.oxw(2).$implicit,r=t.oxw(2).ngIf,i=t.oxw();t.Q6J("attribute",e)("ownerKey",r.owner.key)("expMode",t.lcZ(1,3,i.expMode))}}function Mi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-single-selection-image",27),t.NdJ("selectionChange",function(i){t.CHM(e);const a=t.oxw(5);return t.KtG(a.updateConfiguration(i))}),t.ALo(1,"async"),t.qZA()}if(2&n){const e=t.oxw(2).$implicit,r=t.oxw(2).ngIf,i=t.oxw();t.Q6J("attribute",e)("ownerKey",r.owner.key)("expMode",t.lcZ(1,3,i.expMode))}}function Gi(n,o){1&n&&(t.TgZ(0,"em"),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"configurator.attribute.notSupported")))}function Pi(n,o){if(1&n&&(t.ynx(0),t.YNc(1,xi,2,3,"ng-container",2),t._UZ(2,"cx-configurator-attribute-header",7),t.ALo(3,"async"),t.YNc(4,Ii,2,7,"cx-configurator-attribute-radio-button",8),t.YNc(5,Ai,1,2,"cx-configurator-attribute-single-selection-bundle",9),t.YNc(6,Oi,1,2,"cx-configurator-attribute-multi-selection-bundle",9),t.YNc(7,wi,1,3,"cx-configurator-attribute-single-selection-bundle-dropdown",10),t.YNc(8,Si,2,8,"cx-configurator-attribute-drop-down",11),t.YNc(9,Ei,1,4,"cx-configurator-attribute-input-field",12),t.YNc(10,Ui,1,5,"cx-configurator-attribute-numeric-input-field",13),t.YNc(11,Ni,2,6,"cx-configurator-attribute-checkbox-list",14),t.YNc(12,Ri,2,6,"cx-configurator-attribute-checkbox",14),t.YNc(13,Di,2,5,"cx-configurator-attribute-read-only",15),t.YNc(14,Fi,2,5,"cx-configurator-attribute-multi-selection-image",16),t.YNc(15,Mi,2,5,"cx-configurator-attribute-single-selection-image",16),t.YNc(16,Gi,3,3,"em",2),t._UZ(17,"cx-configurator-attribute-footer",17),t.BQk()),2&n){const e=t.oxw().$implicit,r=t.oxw().ngIf,i=t.oxw().ngIf,a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.isConflictGroupType(r.groupType)),t.xp6(1),t.Q6J("attribute",e)("owner",i.owner)("groupId",r.id)("groupType",r.groupType)("expMode",t.lcZ(3,22,a.expMode)),t.xp6(2),t.Q6J("ngIf",e.uiType===a.uiType.RADIOBUTTON||e.uiType===a.uiType.RADIOBUTTON_ADDITIONAL_INPUT),t.xp6(1),t.Q6J("ngIf",e.uiType===a.uiType.RADIOBUTTON_PRODUCT),t.xp6(1),t.Q6J("ngIf",e.uiType===a.uiType.CHECKBOXLIST_PRODUCT),t.xp6(1),t.Q6J("ngIf",e.uiType===a.uiType.DROPDOWN_PRODUCT),t.xp6(1),t.Q6J("ngIf",e.uiType===a.uiType.DROPDOWN||e.uiType===a.uiType.DROPDOWN_ADDITIONAL_INPUT),t.xp6(1),t.Q6J("ngIf",e.uiType===a.uiType.STRING),t.xp6(1),t.Q6J("ngIf",e.uiType===a.uiType.NUMERIC),t.xp6(1),t.Q6J("ngIf",e.uiType===a.uiType.CHECKBOXLIST),t.xp6(1),t.Q6J("ngIf",e.uiType===a.uiType.CHECKBOX),t.xp6(1),t.Q6J("ngIf",e.uiType===a.uiType.READ_ONLY),t.xp6(1),t.Q6J("ngIf",e.uiType===a.uiType.MULTI_SELECTION_IMAGE),t.xp6(1),t.Q6J("ngIf",e.uiType===a.uiType.SINGLE_SELECTION_IMAGE),t.xp6(1),t.Q6J("ngIf",e.uiType===a.uiType.NOT_IMPLEMENTED),t.xp6(1),t.Q6J("attribute",e)("owner",i.owner)("groupId",r.id)}}function Li(n,o){if(1&n&&(t.TgZ(0,"div",6),t.YNc(1,Pi,18,24,"ng-container",2),t.ALo(2,"async"),t.qZA()),2&n){const e=o.$implicit,r=t.oxw(3);t.ekj("cx-hidden",!e.visible),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,r.activeLanguage$))}}function qi(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",3),t.YNc(2,Ti,2,1,"ng-container",2),t.YNc(3,Li,3,5,"div",4),t.qZA(),t.BQk()),2&n){const e=o.ngIf,r=t.oxw(2);t.xp6(1),t.s9C("id",r.createGroupId(e.id)),t.xp6(1),t.Q6J("ngIf",r.isConflictGroupType(e.groupType)),t.xp6(1),t.Q6J("ngForOf",e.attributes)}}function Bi(n,o){if(1&n&&(t.ynx(0),t.YNc(1,qi,4,3,"ng-container",2),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.currentGroup$))}}function Zi(n,o){1&n&&(t.ynx(0),t._UZ(1,"div",44),t.BQk())}function Vi(n,o){if(1&n&&(t.TgZ(0,"div",39)(1,"div",40),t._UZ(2,"div",41)(3,"div",42),t.qZA(),t.TgZ(4,"div",43),t.YNc(5,Zi,2,0,"ng-container",2),t.qZA()()),2&n){const e=o.index;t.xp6(5),t.Q6J("ngIf",0!==e)}}const St=function(){return[0,1,2]};function ki(n,o){1&n&&(t.ynx(0),t.TgZ(1,"div",29)(2,"div",30),t._UZ(3,"div",31)(4,"div",32),t.qZA(),t.TgZ(5,"div",33),t._UZ(6,"div",34)(7,"div",35),t.qZA()(),t.TgZ(8,"div",29)(9,"div",30),t._UZ(10,"div",31)(11,"div",32),t.TgZ(12,"div",36),t._UZ(13,"div",37),t.qZA()(),t.TgZ(14,"div",33),t.YNc(15,Vi,6,1,"div",38),t.qZA()(),t.BQk()),2&n&&(t.xp6(15),t.Q6J("ngForOf",t.DdM(1,St)))}function Qi(n,o){1&n&&t.YNc(0,ki,16,2,"ng-container",28),2&n&&t.Q6J("ngForOf",t.DdM(1,St))}const Yi=["groupItem"],Ji=function(){return{key:"cx-menu-back"}};function Ki(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",19,8),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(6);return t.KtG(i.navigateUp())})("keydown",function(i){t.CHM(e);const a=t.oxw(2),u=a.index,d=a.$implicit,g=t.oxw().ngIf,l=t.oxw(3);return t.KtG(l.switchGroupOnArrowPress(i,u,d,g))}),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t._UZ(4,"cx-icon",20),t._uU(5),t.ALo(6,"cxTranslate"),t.qZA()}if(2&n){const e=t.oxw().ngIf,r=t.oxw(5);t.Q6J("cxFocus",t.DdM(11,Ji)),t.uIk("aria-selected",!1)("aria-label",r.isConflictGroupType(e.groupType)?t.lcZ(2,5,"configurator.a11y.conflictBack"):t.lcZ(3,7,"configurator.a11y.groupBack")),t.xp6(4),t.Q6J("type",r.iconTypes.CARET_LEFT),t.xp6(1),t.hij(" ",t.lcZ(6,9,"configurator.button.back")," ")}}function $i(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Ki,7,12,"button",18),t.BQk()),2&n){const e=o.ngIf,r=t.oxw().index;t.xp6(1),t.Q6J("ngIf",null!==e&&0===r)}}function Hi(n,o){if(1&n&&(t._UZ(0,"cx-icon",21),t.ALo(1,"cxTranslate")),2&n){const e=t.oxw().$implicit,r=t.oxw(4);t.s9C("id",r.createIconId(r.iconTypes.CARET_RIGHT,e.id)),t.Q6J("type",r.iconTypes.CARET_RIGHT),t.uIk("aria-label",t.lcZ(1,3,"configurator.a11y.iconSubGroup"))}}function Wi(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,$i,2,1,"ng-container",5),t.ALo(2,"async"),t.TgZ(3,"button",7,8),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw(4);return t.KtG(u.click(a))})("keydown",function(i){const a=t.CHM(e),u=a.index,d=a.$implicit,g=t.oxw().ngIf,l=t.oxw(3);return t.KtG(l.switchGroupOnArrowPress(i,u,d,g))}),t.ALo(5,"async"),t.ALo(6,"async"),t.TgZ(7,"span",9),t._uU(8),t.qZA(),t.TgZ(9,"div",10)(10,"div",11),t._uU(11),t.qZA(),t.TgZ(12,"div",12),t._UZ(13,"cx-icon",13),t.ALo(14,"cxTranslate"),t.qZA(),t.TgZ(15,"div",12),t._UZ(16,"cx-icon",14),t.ALo(17,"cxTranslate"),t._UZ(18,"cx-icon",15),t.ALo(19,"cxTranslate"),t.qZA(),t.TgZ(20,"div",16),t.YNc(21,Hi,2,5,"cx-icon",17),t.qZA()()(),t.BQk()}if(2&n){const e=o.$implicit,r=t.oxw().ngIf,i=t.oxw(2).ngIf,a=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,30,a.displayedParentGroup$)),t.xp6(2),t.ekj("DISABLED",!e.configurable)("cx-menu-conflict",a.isConflictGroupType(e.groupType))("active",a.isGroupSelected(e.id,r.id))("disable",!e.configurable),t.s9C("id",e.id),t.s9C("ngClass",t.lcZ(5,32,a.getGroupStatusStyles(e,i))),t.Q6J("cxFocus",t.VKq(42,P,e.id))("tabindex",a.getTabIndex(e,r.id)),t.uIk("aria-describedby",t.lcZ(6,34,a.getAriaDescribedby(e,i)))("aria-selected",a.isGroupSelected(e.id,r.id))("aria-controls",a.isGroupSelected(e.id,r.id)?a.createAriaControls(e.id):null)("aria-label",a.getAriaLabel(e)),t.xp6(4),t.s9C("title",e.description),t.xp6(1),t.Oqu(a.getGroupMenuTitle(e)),t.xp6(3),t.hij(" ",a.getConflictNumber(e)," "),t.xp6(2),t.s9C("id",a.createIconId(a.iconTypes.WARNING,e.id)),t.Q6J("type",a.iconTypes.WARNING),t.uIk("aria-label",t.lcZ(14,36,"configurator.a11y.iconConflict")),t.xp6(3),t.s9C("id",a.createIconId(a.iconTypes.ERROR,e.id)),t.Q6J("type",a.iconTypes.ERROR),t.uIk("aria-label",t.lcZ(17,38,"configurator.a11y.iconIncomplete")),t.xp6(2),t.s9C("id",a.createIconId(a.iconTypes.SUCCESS,e.id)),t.Q6J("type",a.iconTypes.SUCCESS),t.uIk("aria-label",t.lcZ(19,40,"configurator.a11y.iconComplete")),t.xp6(3),t.Q6J("ngIf",a.hasSubGroups(e))}}function zi(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Wi,22,44,"ng-container",6),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function Xi(n,o){if(1&n&&(t.ynx(0),t.YNc(1,zi,2,1,"ng-container",5),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.currentGroup$))}}function ji(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",2)(2,"span",3),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA(),t.TgZ(5,"span",4),t._uU(6),t.ALo(7,"cxTranslate"),t.qZA(),t.YNc(8,Xi,3,3,"ng-container",5),t.ALo(9,"async"),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,3,"configurator.a11y.listOfGroups")," "),t.xp6(3),t.hij(" ",t.lcZ(7,5,"configurator.a11y.inListOfGroups")," "),t.xp6(2),t.Q6J("ngIf",t.lcZ(9,7,e.displayedGroups$))}}function to(n,o){1&n&&(t.TgZ(0,"div",24),t._UZ(1,"div",25),t.qZA())}const eo=function(){return[0,1,2,3,4,5,6,7,8,9]};function no(n,o){1&n&&(t.TgZ(0,"div",22),t.YNc(1,to,2,0,"div",23),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,eo)))}function ro(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",2),t._uU(2),t.qZA(),t.BQk()),2&n){const e=o.ngIf,r=t.oxw();t.xp6(2),t.hij(" ",r.getGroupTitle(e)," ")}}function io(n,o){1&n&&t._UZ(0,"div",3)}function oo(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",4),t._uU(2),t.qZA(),t.TgZ(3,"div",5),t._UZ(4,"cx-configurator-price",6),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",e.attributeOverview.attribute," "),t.xp6(2),t.Q6J("formula",e.extractPriceFormulaParameters())}}function ao(n,o){if(1&n&&(t.TgZ(0,"div",5),t._UZ(1,"cx-configurator-price",6),t.qZA(),t.TgZ(2,"div",4),t._uU(3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("formula",e.extractPriceFormulaParameters()),t.xp6(2),t.hij(" ",e.attributeOverview.attribute," ")}}function uo(n,o){if(1&n&&(t.TgZ(0,"span",12),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"configurator.attribute.id"),": ",e.attributeOverview.productCode,"")}}function co(n,o){if(1&n&&(t.TgZ(0,"div",13)(1,"span",14),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"span",15),t._uU(5),t.ALo(6,"cxNumeric"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"configurator.attribute.quantity")),t.xp6(3),t.Oqu(t.lcZ(6,4,e.attributeOverview.quantity))}}function so(n,o){if(1&n&&(t.TgZ(0,"div",16)(1,"span",14),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"span",15),t._uU(5),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"configurator.overviewForm.itemPrice")),t.xp6(3),t.Oqu(null==e.attributeOverview.valuePrice?null:e.attributeOverview.valuePrice.formattedValue)}}function lo(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"cx-media",3),t.qZA(),t.TgZ(4,"span",4),t._uU(5),t.qZA(),t.TgZ(6,"div",5)(7,"div"),t._uU(8),t.qZA(),t.YNc(9,uo,3,4,"span",6),t.YNc(10,co,7,6,"div",7),t.YNc(11,so,6,4,"div",8),t.qZA()(),t.TgZ(12,"div",9)(13,"span",10),t._uU(14),t.qZA(),t._UZ(15,"cx-configurator-price",11),t.qZA(),t.BQk()),2&n){const e=o.ngIf,r=t.oxw();t.xp6(3),t.Q6J("container",r.getProductPrimaryImage(e)),t.xp6(2),t.hij(" ",r.getAriaLabel()," "),t.xp6(3),t.hij(" ",r.attributeOverview.value," "),t.xp6(1),t.Q6J("ngIf",null==r.attributeOverview?null:r.attributeOverview.productCode),t.xp6(1),t.Q6J("ngIf",r.displayQuantity()),t.xp6(1),t.Q6J("ngIf",r.displayPrice()),t.xp6(3),t.Oqu(r.attributeOverview.attribute),t.xp6(1),t.Q6J("formula",r.extractPriceFormulaParameters())}}function po(n,o){1&n&&t.GkF(0)}const go=function(n){return{overviewGroups:n,level:1}};function fo(n,o){if(1&n&&(t.ynx(0),t.YNc(1,po,1,0,"ng-container",4),t.BQk()),2&n){const e=t.oxw().ngIf;t.oxw();const r=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(2,go,e.overview.groups))}}function _o(n,o){if(1&n&&(t.ynx(0),t.YNc(1,fo,2,4,"ng-container",0),t.BQk()),2&n){const e=o.ngIf,r=t.oxw(),i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",r.hasAttributes(e))("ngIfElse",i)}}function Co(n,o){1&n&&(t.TgZ(0,"div",5)(1,"h2"),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.ALo(6,"cxTranslate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"configurator.overviewForm.noAttributeHeader")),t.xp6(3),t.Oqu(t.lcZ(6,4,"configurator.overviewForm.noAttributeText")))}function mo(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"cx-configurator-overview-attribute",17),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("attributeOverview",e)}}function ho(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"cx-configurator-cpq-overview-attribute",17),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("attributeOverview",e)}}function vo(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"cx-configurator-overview-attribute",17),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("attributeOverview",e)}}function yo(n,o){if(1&n&&(t.TgZ(0,"div",13),t.ynx(1,14),t.YNc(2,mo,2,1,"ng-container",15),t.YNc(3,ho,2,1,"ng-container",15),t.YNc(4,vo,2,1,"ng-container",16),t.BQk(),t.qZA()),2&n){const e=o.$implicit,r=o.index,i=t.oxw().$implicit,a=t.oxw(3);t.Q6J("ngClass",a.getStyleClasses(i.attributes,r)),t.xp6(1),t.Q6J("ngSwitch",null==e?null:e.type),t.xp6(1),t.Q6J("ngSwitchCase",a.attributeOverviewType.GENERAL),t.xp6(1),t.Q6J("ngSwitchCase",a.attributeOverviewType.BUNDLE)}}function bo(n,o){1&n&&t.GkF(0)}const be=function(n,o){return{overviewGroups:n,level:o}};function To(n,o){if(1&n&&(t.ynx(0),t.YNc(1,bo,1,0,"ng-container",4),t.BQk()),2&n){const e=t.oxw().$implicit,r=t.oxw(2).level;t.oxw();const i=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.WLB(2,be,e.subGroups,r+1))}}const Te=function(n){return{group:n}};function xo(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",9)(2,"span",6),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA(),t.TgZ(5,"h2",10)(6,"span"),t._uU(7),t.qZA()(),t.YNc(8,yo,5,4,"div",11),t.qZA(),t.YNc(9,To,2,5,"ng-container",12),t.BQk()),2&n){const e=o.$implicit,r=t.oxw(2).level;t.xp6(1),t.ekj("topLevel",1===r)("subgroupTopLevel",1===r&&(null==e.subGroups?null:e.subGroups.length)>0),t.xp6(2),t.hij(" ",t.xi3(4,8,"configurator.a11y.group",t.VKq(11,Te,e.groupDescription))," "),t.xp6(4),t.Oqu(e.groupDescription),t.xp6(1),t.Q6J("ngForOf",e.attributes),t.xp6(1),t.Q6J("ngIf",(null==e.subGroups?null:e.subGroups.length)>0)}}function Io(n,o){if(1&n&&(t.ynx(0),t.YNc(1,xo,10,13,"ng-container",8),t.BQk()),2&n){const e=t.oxw().overviewGroups;t.xp6(1),t.Q6J("ngForOf",e)}}function Ao(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"cx-configurator-overview-attribute",17),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("attributeOverview",e)}}function Oo(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"cx-configurator-cpq-overview-attribute",17),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("attributeOverview",e)}}function wo(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"cx-configurator-overview-attribute",17),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("attributeOverview",e)}}function So(n,o){if(1&n&&(t.TgZ(0,"div",13),t.ynx(1,14),t.YNc(2,Ao,2,1,"ng-container",15),t.YNc(3,Oo,2,1,"ng-container",15),t.YNc(4,wo,2,1,"ng-container",16),t.BQk(),t.qZA()),2&n){const e=o.$implicit,r=o.index,i=t.oxw().$implicit,a=t.oxw(3);t.Q6J("ngClass",a.getStyleClasses(i.attributes,r)),t.xp6(1),t.Q6J("ngSwitch",null==e?null:e.type),t.xp6(1),t.Q6J("ngSwitchCase",a.attributeOverviewType.GENERAL),t.xp6(1),t.Q6J("ngSwitchCase",a.attributeOverviewType.BUNDLE)}}function Eo(n,o){1&n&&t.GkF(0)}function Uo(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Eo,1,0,"ng-container",4),t.BQk()),2&n){const e=t.oxw().$implicit,r=t.oxw(2).level;t.oxw();const i=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.WLB(2,be,e.subGroups,r+1))}}function No(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",18)(2,"span",6),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA(),t.TgZ(5,"h2",10)(6,"span"),t._uU(7),t.qZA()(),t.YNc(8,So,5,4,"div",11),t.YNc(9,Uo,2,5,"ng-container",12),t.qZA(),t.BQk()),2&n){const e=o.$implicit,r=t.oxw(2).level,i=t.oxw();t.xp6(1),t.Q6J("ngClass",i.getGroupLevelStyleClasses(r,e.subGroups)),t.xp6(2),t.hij(" ",t.xi3(4,5,"configurator.a11y.group",t.VKq(8,Te,e.groupDescription))," "),t.xp6(4),t.Oqu(e.groupDescription),t.xp6(1),t.Q6J("ngForOf",e.attributes),t.xp6(1),t.Q6J("ngIf",(null==e.subGroups?null:e.subGroups.length)>0)}}function Ro(n,o){if(1&n&&(t.ynx(0),t.YNc(1,No,10,10,"ng-container",8),t.BQk()),2&n){const e=t.oxw().overviewGroups;t.xp6(1),t.Q6J("ngForOf",e)}}function Do(n,o){1&n&&(t.TgZ(0,"span",6),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA(),t.YNc(3,Io,2,1,"ng-container",7),t.YNc(4,Ro,2,1,"ng-container",7)),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,3,"configurator.a11y.listOfAttributesAndValues")," "),t.xp6(2),t.Q6J("cxFeatureLevel","!5.1"),t.xp6(1),t.Q6J("cxFeatureLevel","5.1"))}function Fo(n,o){1&n&&(t.ynx(0),t.TgZ(1,"div",22),t._UZ(2,"div",23),t.qZA(),t.TgZ(3,"div",24),t._UZ(4,"div",25),t.qZA(),t._UZ(5,"div",26),t.BQk())}const Mo=function(){return[0,1,2,3,4,5]};function Go(n,o){1&n&&(t.ynx(0),t.TgZ(1,"div",19),t._UZ(2,"div",20),t.TgZ(3,"div",21),t.YNc(4,Fo,6,0,"ng-container",8),t.qZA()(),t.BQk()),2&n&&(t.xp6(4),t.Q6J("ngForOf",t.DdM(1,Mo)))}function Po(n,o){1&n&&t.YNc(0,Go,5,2,"ng-container",8),2&n&&t.Q6J("ngForOf",t.DdM(1,St))}const ft=function(n,o){return{entityKey:n,ownerType:o}},_t=function(n,o){return{cxRoute:n,params:o}},Lo=function(n){return{resolveIssues:!0,skipConflicts:n}};function qo(n,o){if(1&n&&(t.TgZ(0,"div",3),t._UZ(1,"cx-icon",4),t.TgZ(2,"div",5),t._uU(3),t.ALo(4,"cxTranslate"),t.TgZ(5,"button",6),t.ALo(6,"cxUrl"),t.ALo(7,"async"),t._uU(8),t.ALo(9,"cxTranslate"),t.qZA()()()),2&n){const e=o.ngIf,r=t.oxw(2).ngIf,i=t.oxw();t.xp6(1),t.Q6J("type",i.iconTypes.ERROR),t.xp6(2),t.hij(" ",t.xi3(4,5,"configurator.notificationBanner.numberOfIssues",t.VKq(14,gt,e))," "),t.xp6(2),t.Q6J("routerLink",t.lcZ(6,8,t.WLB(19,_t,"configure"+r.owner.configuratorType,t.WLB(16,ft,r.owner.id,r.owner.type))))("queryParams",t.VKq(22,Lo,t.lcZ(7,10,i.skipConflictsOnIssueNavigation$))),t.xp6(3),t.hij(" ",t.lcZ(9,12,"configurator.header.resolveIssues")," ")}}const Bo=function(){return{resolveIssues:!0}};function Zo(n,o){if(1&n&&(t.TgZ(0,"div",7),t._UZ(1,"cx-icon",4),t.TgZ(2,"div",8),t._uU(3),t.ALo(4,"cxTranslate"),t.TgZ(5,"button",9),t.ALo(6,"cxUrl"),t._uU(7),t.ALo(8,"cxTranslate"),t.qZA()()()),2&n){const e=o.ngIf,r=t.oxw(2).ngIf,i=t.oxw();t.xp6(1),t.Q6J("type",i.iconTypes.WARNING),t.xp6(2),t.hij(" ",t.xi3(4,5,"configurator.notificationBanner.numberOfConflicts",t.VKq(12,gt,e))," "),t.xp6(2),t.Q6J("routerLink",t.lcZ(6,8,t.WLB(17,_t,"configure"+r.owner.configuratorType,t.WLB(14,ft,r.owner.id,r.owner.type))))("queryParams",t.DdM(20,Bo)),t.xp6(2),t.hij(" ",t.lcZ(8,10,"configurator.header.resolveConflicts")," ")}}function Vo(n,o){if(1&n&&(t.ynx(0),t.YNc(1,qo,10,24,"div",1),t.ALo(2,"async"),t.YNc(3,Zo,9,21,"div",2),t.ALo(4,"async"),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.numberOfIssues$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,4,e.numberOfConflicts$))}}function ko(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Vo,5,6,"ng-container",0),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.configurationOverview$))}}function Qo(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",1),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().ngIf,a=t.oxw();return t.KtG(a.onPrevious(i))}),t.ALo(2,"async"),t.ALo(3,"cxTranslate"),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.TgZ(6,"button",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().ngIf,a=t.oxw();return t.KtG(a.onNext(i))}),t.ALo(7,"async"),t.ALo(8,"cxTranslate"),t._uU(9),t.ALo(10,"cxTranslate"),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().ngIf,r=t.oxw();t.xp6(1),t.Q6J("disabled",t.lcZ(2,6,r.isFirstGroup(e.owner))),t.uIk("aria-label",t.lcZ(3,8,"configurator.a11y.previous")),t.xp6(3),t.hij(" ",t.lcZ(5,10,"configurator.button.previous")," "),t.xp6(2),t.Q6J("disabled",t.lcZ(7,12,r.isLastGroup(e.owner))),t.uIk("aria-label",t.lcZ(8,14,"configurator.a11y.next")),t.xp6(3),t.hij(" ",t.lcZ(10,16,"configurator.button.next")," ")}}function Yo(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Qo,11,18,"ng-container",0),t.BQk()),2&n){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",(null==e||null==e.groups?null:e.groups.length)>1)}}function Jo(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5),t.ALo(6,"cxTranslate"),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",6)(10,"div",4),t._uU(11),t.ALo(12,"cxTranslate"),t.qZA(),t.TgZ(13,"div",5),t._uU(14),t.qZA()(),t.TgZ(15,"div",7)(16,"div",4),t._uU(17),t.ALo(18,"cxTranslate"),t.qZA(),t.TgZ(19,"div",5),t._uU(20),t.qZA()()()(),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(5),t.hij(" ",t.lcZ(6,6,"configurator.priceSummary.basePrice"),": "),t.xp6(3),t.hij(" ",null==e||null==e.priceSummary||null==e.priceSummary.basePrice?null:e.priceSummary.basePrice.formattedValue," "),t.xp6(3),t.hij(" ",t.lcZ(12,8,"configurator.priceSummary.selectedOptions"),": "),t.xp6(3),t.hij(" ",null==e||null==e.priceSummary||null==e.priceSummary.selectedOptions?null:e.priceSummary.selectedOptions.formattedValue," "),t.xp6(3),t.hij(" ",t.lcZ(18,10,"configurator.priceSummary.totalPrice"),": "),t.xp6(3),t.hij(" ",null==e||null==e.priceSummary||null==e.priceSummary.currentTotal?null:e.priceSummary.currentTotal.formattedValue," ")}}function Ko(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Jo,21,12,"ng-container",0),t.BQk()),2&n){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.pricingEnabled)}}const xe=function(n){return{product:n}};function $o(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",14),t.ALo(2,"cxTranslate"),t.TgZ(3,"span",15),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA()(),t._UZ(6,"cx-icon",16),t.BQk()),2&n){const e=t.oxw().ngIf,r=t.oxw();t.xp6(1),t.uIk("aria-label",t.xi3(2,3,"configurator.a11y.showMoreProductInfo",t.VKq(8,xe,e.name))),t.xp6(3),t.Oqu(t.lcZ(5,6,"configurator.header.showMore")),t.xp6(2),t.Q6J("type",r.iconTypes.CARET_DOWN)}}function Ho(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",14),t.ALo(2,"cxTranslate"),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA(),t._UZ(5,"cx-icon",16),t.BQk()),2&n){const e=t.oxw().ngIf,r=t.oxw();t.xp6(1),t.uIk("aria-label",t.xi3(2,3,"configurator.a11y.showLessProductInfo",t.VKq(8,xe,e.name))),t.xp6(2),t.hij(" ",t.lcZ(4,6,"configurator.header.showLess")," "),t.xp6(2),t.Q6J("type",r.iconTypes.CARET_UP)}}function Wo(n,o){if(1&n&&(t.TgZ(0,"span"),t.ALo(1,"cxTranslate"),t._uU(2),t.qZA()),2&n){const e=t.oxw().ngIf;t.uIk("aria-label",t.lcZ(1,2,"configurator.a11y.productName")),t.xp6(2),t.hij(" ",e.name," ")}}function zo(n,o){if(1&n&&(t.TgZ(0,"span"),t.ALo(1,"cxTranslate"),t._uU(2),t.qZA()),2&n){const e=t.oxw().ngIf;t.uIk("aria-label",t.lcZ(1,2,"configurator.a11y.productCode")),t.xp6(2),t.hij(" ",e.code," ")}}function Xo(n,o){if(1&n&&(t.TgZ(0,"span"),t.ALo(1,"cxTranslate"),t._uU(2),t.qZA()),2&n){const e=t.oxw().ngIf;t.uIk("aria-label",t.lcZ(1,2,"configurator.a11y.productDescription")),t.xp6(2),t.hij(" ",e.description," ")}}const jo=function(n){return{name:n}};function ta(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",18)(2,"span",19),t.ALo(3,"cxTranslate"),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.TgZ(6,"span",20),t._uU(7),t.qZA()(),t.BQk()),2&n){const e=t.oxw(2).ngIf;t.xp6(2),t.uIk("aria-label",t.xi3(3,3,"configurator.a11y.kbKeyName",t.VKq(8,jo,e.kbKey.kbName))),t.xp6(2),t.hij(" ",t.lcZ(5,6,"configurator.header.kbKeyName")," "),t.xp6(3),t.hij(" ",e.kbKey.kbName," ")}}const ea=function(n){return{logsys:n}};function na(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",18)(2,"span",19),t.ALo(3,"cxTranslate"),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.TgZ(6,"span",20),t._uU(7),t.qZA()(),t.BQk()),2&n){const e=t.oxw(2).ngIf;t.xp6(2),t.uIk("aria-label",t.xi3(3,3,"configurator.a11y.kbKeyLogsys",t.VKq(8,ea,e.kbKey.kbLogsys))),t.xp6(2),t.hij(" ",t.lcZ(5,6,"configurator.header.kbKeyLogsys")," "),t.xp6(3),t.hij(" ",e.kbKey.kbLogsys," ")}}const ra=function(n){return{version:n}};function ia(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",18)(2,"span",19),t.ALo(3,"cxTranslate"),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.TgZ(6,"span",20),t._uU(7),t.qZA()(),t.BQk()),2&n){const e=t.oxw(2).ngIf;t.xp6(2),t.uIk("aria-label",t.xi3(3,3,"configurator.a11y.kbKeyVersion",t.VKq(8,ra,e.kbKey.kbVersion))),t.xp6(2),t.hij(" ",t.lcZ(5,6,"configurator.header.kbKeyVersion")," "),t.xp6(3),t.hij(" ",e.kbKey.kbVersion," ")}}function oa(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",18)(2,"span",19),t.ALo(3,"cxTranslate"),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.TgZ(6,"span",20),t._uU(7),t.qZA()(),t.BQk()),2&n){const e=t.oxw(2).ngIf;t.xp6(2),t.uIk("aria-label",t.xi3(3,3,"configurator.a11y.kbKeyBuildNr",t.VKq(8,wt,e.kbKey.kbBuildNumber))),t.xp6(2),t.hij(" ",t.lcZ(5,6,"configurator.header.kbKeyBuildNr")," "),t.xp6(3),t.hij(" ",e.kbKey.kbBuildNumber," ")}}function aa(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",17),t.YNc(2,ta,8,10,"ng-container",5),t.YNc(3,na,8,10,"ng-container",5),t.YNc(4,ia,8,10,"ng-container",5),t.YNc(5,oa,8,10,"ng-container",5),t.qZA(),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(2),t.Q6J("ngIf",e.kbKey.kbName),t.xp6(1),t.Q6J("ngIf",e.kbKey.kbLogsys),t.xp6(1),t.Q6J("ngIf",e.kbKey.kbVersion),t.xp6(1),t.Q6J("ngIf",e.kbKey.kbBuildNumber)}}function ua(n,o){if(1&n&&(t.ynx(0),t.YNc(1,aa,6,4,"ng-container",5),t.BQk()),2&n){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.kbKey)}}function ca(n,o){if(1&n&&(t.ynx(0),t.YNc(1,ua,2,1,"ng-container",5),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.configuration$))}}function sa(n,o){if(1&n&&(t.ynx(0),t.YNc(1,ca,3,3,"ng-container",5),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.expMode))}}function la(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",2)(2,"div",3)(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"button",4),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.triggerDetails())}),t.YNc(6,$o,7,10,"ng-container",5),t.YNc(7,Ho,6,10,"ng-container",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7),t._UZ(10,"cx-media",8),t.qZA(),t.TgZ(11,"div",9)(12,"div",10),t.YNc(13,Wo,3,4,"span",5),t.qZA(),t.TgZ(14,"div",11),t.YNc(15,zo,3,4,"span",5),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,Xo,3,4,"span",5),t.qZA(),t.YNc(18,sa,3,3,"ng-container",13),t.qZA()()(),t.BQk()}if(2&n){const e=o.ngIf,r=t.oxw();t.xp6(4),t.hij(" ",e.name," "),t.xp6(1),t.uIk("aria-expanded",r.showMore),t.xp6(1),t.Q6J("ngIf",!r.showMore),t.xp6(1),t.Q6J("ngIf",r.showMore),t.xp6(1),t.ekj("open",r.showMore),t.xp6(2),t.Q6J("container",null==e||null==e.images?null:e.images.PRIMARY),t.xp6(1),t.uIk("aria-hidden",!r.showMore),t.xp6(2),t.Q6J("ngIf",e.name),t.xp6(2),t.Q6J("ngIf",e.code),t.xp6(2),t.Q6J("ngIf",e.description),t.xp6(1),t.Q6J("cxFeatureLevel","5.1")}}function pa(n,o){1&n&&t._UZ(0,"div",21)}function da(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",3)(2,"a",4),t.ALo(3,"async"),t.ALo(4,"cxUrl"),t.ALo(5,"async"),t.ALo(6,"cxTranslate"),t.ALo(7,"cxTranslate"),t._uU(8),t.ALo(9,"cxTranslate"),t.qZA(),t.TgZ(10,"a",4),t.ALo(11,"async"),t.ALo(12,"cxUrl"),t.ALo(13,"async"),t.ALo(14,"cxTranslate"),t.ALo(15,"cxTranslate"),t._uU(16),t.ALo(17,"cxTranslate"),t.qZA()(),t.BQk()),2&n){const e=t.oxw(2).ngIf,r=t.oxw();t.xp6(2),t.ekj("active",!t.lcZ(3,10,r.isOverviewPage$)),t.Q6J("routerLink",t.lcZ(4,12,t.WLB(37,_t,"configure"+e.owner.configuratorType,t.WLB(34,ft,e.owner.id,e.owner.type)))),t.uIk("aria-label",t.lcZ(5,14,r.isOverviewPage$)?t.lcZ(7,18,"configurator.a11y.configurationPageLink"):t.lcZ(6,16,"configurator.a11y.configurationPage")),t.xp6(6),t.Oqu(t.lcZ(9,20,"configurator.tabBar.configuration")),t.xp6(2),t.ekj("active",t.lcZ(11,22,r.isOverviewPage$)),t.Q6J("routerLink",t.lcZ(12,24,t.WLB(43,_t,"configureOverview"+e.owner.configuratorType,t.WLB(40,ft,e.owner.id,e.owner.type)))),t.uIk("aria-label",t.lcZ(13,26,r.isOverviewPage$)?t.lcZ(14,28,"configurator.a11y.overviewPage"):t.lcZ(15,30,"configurator.a11y.overviewPageLink")),t.xp6(6),t.Oqu(t.lcZ(17,32,"configurator.tabBar.overview"))}}function ga(n,o){if(1&n&&(t.ynx(0),t.YNc(1,da,18,46,"ng-container",0),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",!e.displayOnly)}}function fa(n,o){1&n&&t._UZ(0,"div",5)}function _a(n,o){if(1&n&&(t.ynx(0),t.YNc(1,ga,2,1,"ng-container",1),t.ALo(2,"async"),t.YNc(3,fa,1,0,"ng-template",null,2,t.W1O),t.BQk()),2&n){const e=t.MAs(4),r=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,r.configuration$))("ngIfElse",e)}}function Ca(n,o){1&n&&(t.TgZ(0,"span",8),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.header.multipleWarnings"),""))}function ma(n,o){1&n&&(t.ynx(0),t._UZ(1,"cx-icon",10),t.BQk())}function ha(n,o){1&n&&(t.ynx(0),t._UZ(1,"cx-icon",11),t.BQk())}function va(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.toggleWarnings())}),t._uU(1),t.ALo(2,"cxTranslate"),t.YNc(3,ma,2,0,"ng-container",0),t.YNc(4,ha,2,0,"ng-container",0),t.qZA()}if(2&n){const e=t.oxw(3);t.uIk("aria-expanded",e.showWarnings),t.xp6(1),t.hij(" ",t.lcZ(2,4,"configurator.header.reviewWarnings")," "),t.xp6(2),t.Q6J("ngIf",!e.showWarnings),t.xp6(1),t.Q6J("ngIf",e.showWarnings)}}function ya(n,o){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&n){const e=o.$implicit,r=t.oxw(2).ngIf,i=t.oxw();t.ekj("open",i.showWarnings||1===(null==r||null==r.warningMessages?null:r.warningMessages.length)),t.xp6(1),t.hij(" ",e," ")}}function ba(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1)(2,"span",2),t._UZ(3,"cx-icon",3),t.qZA(),t.YNc(4,Ca,3,3,"span",4),t.YNc(5,va,5,6,"button",5),t.TgZ(6,"div",6),t.YNc(7,ya,2,3,"div",7),t.qZA()(),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngIf",(null==e||null==e.warningMessages?null:e.warningMessages.length)>1),t.xp6(1),t.Q6J("ngIf",(null==e||null==e.warningMessages?null:e.warningMessages.length)>1),t.xp6(1),t.ekj("inline",1===(null==e||null==e.warningMessages?null:e.warningMessages.length)),t.xp6(1),t.Q6J("ngForOf",e.warningMessages)}}function Ta(n,o){1&n&&(t.TgZ(0,"span",19),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.header.multipleErrors"),""))}function xa(n,o){1&n&&(t.ynx(0),t._UZ(1,"cx-icon",10),t.BQk())}function Ia(n,o){1&n&&(t.ynx(0),t._UZ(1,"cx-icon",11),t.BQk())}function Aa(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.toggleErrors())}),t._uU(1),t.ALo(2,"cxTranslate"),t.YNc(3,xa,2,0,"ng-container",0),t.YNc(4,Ia,2,0,"ng-container",0),t.qZA()}if(2&n){const e=t.oxw(3);t.uIk("aria-expanded",e.showErrors),t.xp6(1),t.hij(" ",t.lcZ(2,4,"configurator.header.reviewErrors")," "),t.xp6(2),t.Q6J("ngIf",!e.showErrors),t.xp6(1),t.Q6J("ngIf",e.showErrors)}}function Oa(n,o){if(1&n&&(t.TgZ(0,"div",21),t._uU(1),t.qZA()),2&n){const e=o.$implicit,r=t.oxw(2).ngIf,i=t.oxw();t.ekj("open",i.showErrors||1===(null==r||null==r.errorMessages?null:r.errorMessages.length)),t.xp6(1),t.hij(" ",e," ")}}function wa(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",13)(2,"span",2),t._UZ(3,"cx-icon",14),t.qZA(),t.YNc(4,Ta,3,3,"span",15),t.YNc(5,Aa,5,6,"button",16),t.TgZ(6,"div",17),t.YNc(7,Oa,2,3,"div",18),t.qZA()(),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngIf",(null==e||null==e.errorMessages?null:e.errorMessages.length)>1),t.xp6(1),t.Q6J("ngIf",(null==e||null==e.errorMessages?null:e.errorMessages.length)>1),t.xp6(1),t.ekj("inline",1===(null==e||null==e.errorMessages?null:e.errorMessages.length)),t.xp6(1),t.Q6J("ngForOf",e.errorMessages)}}function Sa(n,o){if(1&n&&(t.ynx(0),t.YNc(1,ba,8,5,"ng-container",0),t.YNc(2,wa,8,5,"ng-container",0),t.BQk()),2&n){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",(null==e||null==e.warningMessages?null:e.warningMessages.length)>0),t.xp6(1),t.Q6J("ngIf",(null==e||null==e.errorMessages?null:e.errorMessages.length)>0)}}function Ea(n,o){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"cxTranslate"),t.BQk()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.button.exit")," "))}function Ua(n,o){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"cxTranslate"),t.BQk()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.button.exitMobile")," "))}function Na(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Ea,3,3,"ng-container",0),t.ALo(2,"async"),t.YNc(3,Ua,3,3,"ng-container",0),t.ALo(4,"async"),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.isDesktop())),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,4,e.isMobile()))}}function Ra(n,o){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"cxTranslate"),t.BQk()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.button.cancelConfigurationMobile")," "))}function Da(n,o){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"cxTranslate"),t.BQk()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.button.cancelConfiguration")," "))}function Fa(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Ra,3,3,"ng-container",0),t.ALo(2,"async"),t.YNc(3,Da,3,3,"ng-container",0),t.ALo(4,"async"),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.isMobile())),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,4,e.isDesktop()))}}function Ma(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",1),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exitConfiguration())}),t.YNc(2,Na,5,6,"ng-container",0),t.YNc(3,Fa,5,6,"ng-container",0),t.qZA(),t.BQk()}if(2&n){const e=o.ngIf;t.xp6(2),t.Q6J("ngIf",!e.routerData.isOwnerCartEntry),t.xp6(1),t.Q6J("ngIf",e.routerData.isOwnerCartEntry)}}function Ga(n,o){1&n&&t._UZ(0,"cx-product-carousel-item",4),2&n&&t.Q6J("item",o.item)}const Pa=function(n){return{title:n}};function La(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1),t._UZ(2,"cx-carousel",2),t.ALo(3,"cxTranslate"),t.ALo(4,"async"),t.ALo(5,"async"),t.YNc(6,Ga,1,1,"ng-template",null,3,t.W1O),t.qZA(),t.BQk()),2&n){const e=o.ngIf,r=t.MAs(7),i=t.oxw();t.xp6(2),t.Q6J("items",e)("title",t.lcZ(5,9,i.title$))("template",r),t.uIk("aria-label",t.xi3(3,4,"productCarousel.carouselLabel",t.VKq(11,Pa,t.lcZ(4,7,i.title$))))}}var s;!function(n){let o;var l;let e,r,i,a,u,d,g;(l=o=n.GroupType||(n.GroupType={})).ATTRIBUTE_GROUP="AttributeGroup",l.SUB_ITEM_GROUP="SubItemGroup",l.CONFLICT_HEADER_GROUP="ConflictHeaderGroup",l.CONFLICT_GROUP="ConflictGroup",function(l){l.NOT_IMPLEMENTED="not_implemented",l.RADIOBUTTON="radioGroup",l.RADIOBUTTON_ADDITIONAL_INPUT="radioGroup_add",l.CHECKBOX="checkBox",l.CHECKBOXLIST="checkBoxList",l.DROPDOWN="dropdown",l.DROPDOWN_ADDITIONAL_INPUT="dropdown_add",l.LISTBOX="listbox",l.LISTBOX_MULTI="listboxmulti",l.READ_ONLY="readonly",l.STRING="string",l.NUMERIC="numeric",l.AUTO_COMPLETE_CUSTOM="input_autocomplete",l.MULTI_SELECTION_IMAGE="multi_selection_image",l.SINGLE_SELECTION_IMAGE="single_selection_image",l.CHECKBOXLIST_PRODUCT="checkBoxListProduct",l.DROPDOWN_PRODUCT="dropdownProduct",l.RADIOBUTTON_PRODUCT="radioGroupProduct"}(e=n.UiType||(n.UiType={})),function(l){l.VALUE_IMAGE="VALUE_IMAGE",l.ATTRIBUTE_IMAGE="ATTRIBUTE_IMAGE"}(r=n.ImageFormatType||(n.ImageFormatType={})),function(l){l.PRIMARY="PRIMARY",l.GALLERY="GALLERY"}(i=n.ImageType||(n.ImageType={})),function(l){l.INPUT_STRING="String",l.INPUT_NUMBER="Number",l.USER_SELECTION_QTY_ATTRIBUTE_LEVEL="UserSelectionWithAttributeQuantity",l.USER_SELECTION_QTY_VALUE_LEVEL="UserSelectionWithValueQuantity",l.USER_SELECTION_NO_QTY="UserSelectionWithoutQuantity",l.NOT_IMPLEMENTED="not_implemented"}(a=n.DataType||(n.DataType={})),function(l){l.ATTRIBUTE="Attribute",l.ATTRIBUTE_QUANTITY="AttributeQuantity",l.VALUE_QUANTITY="ValueQuantity"}(u=n.UpdateType||(n.UpdateType={})),function(l){l.GENERAL="general",l.BUNDLE="bundle"}(d=n.AttributeOverviewType||(n.AttributeOverviewType={})),function(l){l.NONE="NONE",l.NUMERIC="NUMERIC"}(g=n.ValidationType||(n.ValidationType={}))}(s||(s={}));const Ie="productConfigurator",A="[Configurator] Configuration Data",Et="[Configurator] Read Cart Entry Configuration",Ut="[Configurator] Read Cart Entry Configuration Success",Nt="[Configurator] Read Order Entry Configuration",Rt="[Configurator] Read Order Entry Configuration Success",Dt="[Configurator] Add to cart",Ct="[Configurator] Update cart entry",Ft="[Configurator] Add next owner",Mt="[Configurator] Set next owner cart entry",Gt="[Configurator] Remove cart bound configurations";class we extends c.kPG.EntityLoadAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Et}}class Se extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Ut}}class Ee extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator] Read Cart Entry Configuration Fail"}}class Ue extends c.kPG.EntityLoadAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Nt}}class Ne extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Rt}}class Re extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator] Read Order Entry Configuration Fail"}}class De extends c.kPG.EntityProcessesIncrementAction{constructor(o){super(z.N4,o.cartId),this.payload=o,this.type=Dt}}class Fe extends c.kPG.EntityProcessesIncrementAction{constructor(o){super(z.N4,o.cartId),this.payload=o,this.type=Ct}}class Me{constructor(o){this.payload=o,this.type=Ft}}class Ge{constructor(){this.type=Gt}}class Pe extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.configuration.owner.key),this.payload=o,this.type=Mt}}const Pt="[Configurator] Search Variants",Lt="[Configurator] Search Variants success";class mt extends c.kPG.EntityLoadAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Pt}}class qe extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator]  Search Variants fail"}}class Be extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.ownerKey),this.payload=o,this.type=Lt}}const qt="[Configurator] Create Configuration",Bt="[Configurator] Create Configuration Sucess",Zt="[Configurator] Read Configuration",Vt="[Configurator] Read Configuration Sucess",kt="[Configurator] Update Configuration",Qt="[Configurator] Update Configuration Fail",Yt="[Configurator] Update Configuration Success",Jt="[Configurator] Update Configuration finalize success",Kt="[Configurator] Update Configuration finalize fail",$t="[Configurator] Change group",Ht="[Configurator] Update Configuration Summary Price",Wt="[Configurator] Update Configuration Price Summary success",zt="[Configurator] Get Configuration Overview",Xt="[Configurator] Get Configuration Overview success",jt="[Configurator] Set interaction state",te="[Configurator] Set current group to State",ee="[Configurator] Set current parent group for menu to State",ne="[Configurator] Set groups to visited",re="[Configurator] Remove product bound configurations";class Ke extends c.kPG.EntityLoadAction{constructor(o){super(A,o.key),this.payload=o,this.type=qt}}class $e extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator] Create Configuration Fail"}}class He extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Bt}}class We extends c.kPG.EntityLoadAction{constructor(o){super(A,o.configuration.owner.key),this.payload=o,this.type=Zt}}class ie extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator] Read Configuration Fail"}}class oe extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Vt}}class ze extends c.kPG.EntityProcessesIncrementAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=kt,this.meta.loader={load:!0}}}class Xe extends c.kPG.EntityProcessesDecrementAction{constructor(o){super(A,o.configuration.owner.key),this.payload=o,this.type=Qt,this.meta.loader={error:o.error}}}class je extends c.kPG.EntityProcessesDecrementAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Yt}}class tn extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Jt}}class en extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Kt}}class et extends c.kPG.EntityLoadAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Ht}}class nn extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator] Update Configuration Price Summary fail"}}class rn extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Wt}}class ae extends c.kPG.EntityLoadAction{constructor(o){super(A,o.configuration.owner.key),this.payload=o,this.type=$t}}class ht extends c.kPG.EntityLoaderResetAction{constructor(o){super(A,o.ownerKey),this.payload=o,this.type="[Configurator] Remove configuration"}}class on extends c.kPG.EntityLoadAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=zt}}class an extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator] Get Configuration Overview fail"}}class un extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.ownerKey),this.payload=o,this.type=Xt}}class cn extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.entityKey,o.interactionState),this.payload=o,this.type=jt}}class sn extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.entityKey,o.currentGroup),this.payload=o,this.type=te}}class ue extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.entityKey,o.menuParentGroup),this.payload=o,this.type=ee}}class ln extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.entityKey,o.visitedGroups),this.payload=o,this.type=ne}}class pn{constructor(){this.type=re}}const vt=(0,O.ZF)(Ie),ce=(0,O.P1)(vt,n=>n.configurations),nt=n=>(0,O.P1)(ce,o=>c.kPG.entityProcessesLoaderStateSelector(o,n)),ot=n=>(0,O.P1)(ce,o=>c.kPG.entityHasPendingProcessesSelector(o,n)),Q=n=>(0,O.P1)(nt(n),o=>c.kPG.loaderValueSelector(o));let rt=(()=>{class n{getParentGroup(e,r,i){return e.includes(r)?i:e.map(a=>a.subGroups?this.getParentGroup(a.subGroups,r,a):void 0).filter(a=>a).pop()}getGroupById(e,r){const i=e.find(u=>u.id===r);return i||(this.getGroupFromSubGroups(e,r)||e[0])}getOptionalGroupById(e,r){return e.find(a=>a.id===r)||this.getGroupFromSubGroups(e,r)}getGroupByIdIfPresent(e,r){return e.find(a=>a.id===r)||this.getGroupFromSubGroups(e,r)}getGroupFromSubGroups(e,r){return e.map(a=>a.subGroups?this.getGroupByIdIfPresent(a.subGroups,r):void 0).filter(a=>a).pop()}hasSubGroups(e){return!!e.subGroups&&e.subGroups.length>0}isConfigurationCreated(e){const r=e?.configId;return void 0!==r&&0!==r.length&&void 0!==e&&(e.flatGroups.length>0||void 0!==e.overview)}createConfigurationExtract(e,r,i){i||(i=s.UpdateType.ATTRIBUTE);const a={configId:r.configId,groups:[],flatGroups:[],interactionState:{},owner:r.owner,productCode:r.productCode,updateType:i},u=[];if(!e.groupId)throw Error("GroupId must be available at attribute level during update");this.buildGroupPath(e.groupId,r.groups,u);const d=u.length;if(0===d)throw new Error("At this point we expect that group is available in the configuration: "+e.groupId+", "+JSON.stringify(r.groups.map(_=>_.id)));let g=this.buildGroupForExtract(u[d-1]),l=g;a.groups.push(g);for(let _=u.length-1;_>0;_--)l=this.buildGroupForExtract(u[_-1]),g.subGroups=[l],g=l;return l.attributes=[e],a}buildGroupPath(e,r,i){let a=!1;const u=r.find(d=>d.id===e);return u?(i.push(u),a=!0):r.filter(d=>d.subGroups).forEach(d=>{d.subGroups&&this.buildGroupPath(e,d.subGroups,i)&&(i.push(d),a=!0)}),a}getConfigurationFromState(e){const r=e.value;if(r)return r;throw new Error("Configuration must be defined at this point")}buildGroupForExtract(e){return{groupType:e.groupType,id:e.id,subGroups:[]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),se=(()=>{class n{constructor(e,r,i,a,u,d){this.store=e,this.activeCartService=r,this.commonConfigUtilsService=i,this.checkoutQueryFacade=a,this.userIdService=u,this.configuratorUtilsService=d}readConfigurationForCartEntry(e){return this.store.pipe((0,O.Ys)(nt(e.key)),(0,ve.j)(()=>this.activeCartService.isStable().pipe((0,S.h)(r=>r))),(0,ve.j)(()=>this.checkoutQueryFacade.getCheckoutDetailsState().pipe((0,h.U)(r=>r.loading),(0,S.h)(r=>!r))),(0,R.b)(r=>{this.configurationNeedsReading(r)&&this.activeCartService.requireLoadedCart().pipe((0,m.q)(1)).subscribe(i=>{this.userIdService.getUserId().pipe((0,m.q)(1)).subscribe(a=>{const u={userId:a,cartId:this.commonConfigUtilsService.getCartId(i),cartEntryNumber:e.id,owner:e};this.store.dispatch(new we(u))})})}),(0,S.h)(r=>void 0!==r.value&&this.isConfigurationCreated(r.value)),(0,h.U)(r=>this.configuratorUtilsService.getConfigurationFromState(r)))}readConfigurationForOrderEntry(e){return this.store.pipe((0,O.Ys)(nt(e.key)),(0,R.b)(r=>{if(this.configurationNeedsReading(r)){const i=this.commonConfigUtilsService.decomposeOwnerId(e.id);this.store.dispatch(new Ue({userId:c.zyp,orderId:i.documentId,orderEntryNumber:i.entryNumber,owner:e}))}}),(0,S.h)(r=>void 0!==r.value&&this.isConfigurationCreated(r.value)),(0,h.U)(r=>this.configuratorUtilsService.getConfigurationFromState(r)))}addToCart(e,r,i){this.activeCartService.requireLoadedCart().pipe((0,m.q)(1)).subscribe(a=>{this.userIdService.getUserId().pipe((0,m.q)(1)).subscribe(u=>{const d={userId:u,cartId:this.commonConfigUtilsService.getCartId(a),productCode:e,quantity:1,configId:r,owner:i};this.store.dispatch(new De(d))})})}updateCartEntry(e){this.activeCartService.requireLoadedCart().pipe((0,m.q)(1)).subscribe(r=>{this.userIdService.getUserId().pipe((0,m.q)(1)).subscribe(i=>{const a={userId:i,cartId:this.commonConfigUtilsService.getCartId(r),cartEntryNumber:e.owner.id,configuration:e};this.store.dispatch(new Fe(a))})})}activeCartHasIssues(){return this.activeCartService.requireLoadedCart().pipe((0,h.U)(e=>e?e.entries:[]),(0,h.U)(e=>e?e.filter(r=>this.commonConfigUtilsService.getNumberOfIssues(r)):[]),(0,h.U)(e=>e.length>0))}removeCartBoundConfigurations(){this.store.dispatch(new Ge)}isConfigurationCreated(e){return 0!==e.configId.length}configurationNeedsReading(e){const r=e.value;return void 0===r||!this.isConfigurationCreated(r)&&!e.loading&&!e.error}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(O.yh),t.LFG(X.bu),t.LFG(y.NU),t.LFG(Qn.nh),t.LFG(c.XBV),t.LFG(rt))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),U=(()=>{class n{constructor(e,r,i,a,u){this.store=e,this.commonConfigUtilsService=r,this.configuratorCartService=i,this.activeCartService=a,this.configuratorUtils=u}hasPendingChanges(e){return this.store.pipe((0,O.Ys)(ot(e.key)))}isConfigurationLoading(e){return this.store.pipe((0,O.Ys)(nt(e.key)),(0,h.U)(r=>r.loading??!1))}getConfiguration(e){return this.store.pipe((0,O.Ys)(Q(e.key)),(0,S.h)(r=>this.configuratorUtils.isConfigurationCreated(r)))}getOrCreateConfiguration(e){switch(e.type){case y.$g.OwnerType.PRODUCT:return this.getOrCreateConfigurationForProduct(e);case y.$g.OwnerType.CART_ENTRY:return this.configuratorCartService.readConfigurationForCartEntry(e);case y.$g.OwnerType.ORDER_ENTRY:return this.configuratorCartService.readConfigurationForOrderEntry(e)}}updateConfiguration(e,r,i){i||(i=s.UpdateType.ATTRIBUTE),this.activeCartService.getActive().pipe((0,m.q)(1),(0,v.w)(a=>this.activeCartService.isStable().pipe((0,m.q)(1),(0,R.b)(u=>{(0,t.X6Q)()&&a.code&&!u&&console.warn("Cart is busy, no configuration updates possible")}),(0,S.h)(u=>!a.code||u),(0,ye.c)(this.store.pipe((0,O.Ys)(Q(e)),(0,m.q)(1)))))).subscribe(a=>{this.store.dispatch(new ze(this.configuratorUtils.createConfigurationExtract(r,a,i)))})}getConfigurationWithOverview(e){return this.store.pipe((0,O.Ys)(Q(e.owner.key)),(0,S.h)(r=>this.configuratorUtils.isConfigurationCreated(r)),(0,R.b)(r=>{this.hasConfigurationOverview(r)||this.store.dispatch(new on(e))}),(0,S.h)(r=>this.hasConfigurationOverview(r)))}removeConfiguration(e){this.store.dispatch(new ht({ownerKey:e.key}))}hasConflicts(e){return this.getConfiguration(e).pipe((0,h.U)(r=>r.groups[0]?.groupType===s.GroupType.CONFLICT_HEADER_GROUP))}getOrCreateConfigurationForProduct(e){return this.store.pipe((0,O.Ys)(nt(e.key)),(0,R.b)(r=>{(void 0===r.value||!this.configuratorUtils.isConfigurationCreated(r.value))&&!0!==r.loading&&!0!==r.error&&this.store.dispatch(new Ke(e))}),(0,S.h)(r=>void 0!==r.value&&this.configuratorUtils.isConfigurationCreated(r.value)),(0,h.U)(r=>this.configuratorUtils.getConfigurationFromState(r)))}hasConfigurationOverview(e){return void 0!==e.overview}removeProductBoundConfigurations(){this.store.dispatch(new pn)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(O.yh),t.LFG(y.NU),t.LFG(se),t.LFG(X.bu),t.LFG(rt))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_n=(()=>{class n{constructor(e,r){this.store=e,this.configuratorUtilsService=r}isGroupVisited(e,r){return this.store.select(((n,o)=>(0,O.P1)(Q(n),e=>{const r=e?.interactionState?.groupsVisited;return!!r&&r[o]}))(e.key,r))}getFirstIncompleteGroup(e){return e.flatGroups?e.flatGroups.filter(r=>r.groupType!==s.GroupType.CONFLICT_GROUP).find(r=>!r.complete):void 0}setGroupStatusVisited(e,r){const i=this.configuratorUtilsService.getGroupById(e.groups,r),a=this.configuratorUtilsService.getParentGroup(e.groups,this.configuratorUtilsService.getGroupById(e.groups,r)),u=[];u.push(i.id),a&&this.getParentGroupStatusVisited(e,i.id,a,u),this.store.dispatch(new ln({entityKey:e.owner.key,visitedGroups:u}))}areGroupsVisited(e,r){return this.store.select(((n,o)=>(0,O.P1)(Q(n),e=>0===o.map(r=>{const i=e?.interactionState?.groupsVisited;return!!i&&i[r]}).filter(r=>!r).length))(e.key,r))}getParentGroupStatusVisited(e,r,i,a){const u=[];i.subGroups.forEach(d=>{d.id!==r&&u.push(d.id)}),this.areGroupsVisited(e.owner,u).pipe((0,m.q)(1)).subscribe(d=>{if(d){a.push(i.id);const g=this.configuratorUtilsService.getParentGroup(e.groups,this.configuratorUtilsService.getGroupById(e.groups,i.id));g&&this.getParentGroupStatusVisited(e,i.id,g,a)}})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(O.yh),t.LFG(rt))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),K=(()=>{class n{constructor(e,r,i,a){this.store=e,this.configuratorCommonsService=r,this.configuratorUtilsService=i,this.configuratorGroupStatusService=a}getCurrentGroupId(e){return this.configuratorCommonsService.getConfiguration(e).pipe((0,h.U)(r=>r?.interactionState.currentGroup?r.interactionState.currentGroup:r?.groups[0]?.id))}getFirstConflictGroup(e){return e.flatGroups.find(r=>r.groupType===s.GroupType.CONFLICT_GROUP)}navigateToFirstIncompleteGroup(e){this.configuratorCommonsService.getConfiguration(e).pipe((0,m.q)(1)).subscribe(r=>{const i=this.configuratorGroupStatusService.getFirstIncompleteGroup(r)?.id;i&&this.navigateToGroup(r,i,!0)})}navigateToConflictSolver(e){this.configuratorCommonsService.getConfiguration(e).pipe((0,m.q)(1)).subscribe(r=>{const i=this.getFirstConflictGroup(r)?.id;i&&this.navigateToGroup(r,i,!0)})}getMenuParentGroup(e){return this.configuratorCommonsService.getConfiguration(e).pipe((0,h.U)(r=>{const i=r.interactionState.menuParentGroup;return i?this.configuratorUtilsService.getOptionalGroupById(r.groups,i):void 0}))}setMenuParentGroup(e,r){this.store.dispatch(new ue({entityKey:e.key,menuParentGroup:r}))}getCurrentGroup(e){return this.getCurrentGroupId(e).pipe((0,v.w)(r=>this.configuratorCommonsService.getConfiguration(e).pipe((0,h.U)(i=>this.configuratorUtilsService.getGroupById(i.groups,r)))))}setGroupStatusVisited(e,r){this.configuratorCommonsService.getConfiguration(e).pipe((0,h.U)(i=>this.configuratorGroupStatusService.setGroupStatusVisited(i,r)),(0,m.q)(1)).subscribe()}navigateToGroup(e,r,i=!0){i&&this.getCurrentGroup(e.owner).pipe((0,m.q)(1)).subscribe(u=>{this.configuratorGroupStatusService.setGroupStatusVisited(e,u.id)});const a=this.configuratorUtilsService.getParentGroup(e.groups,this.configuratorUtilsService.getGroupById(e.groups,r));this.store.dispatch(new ae({configuration:e,groupId:r,parentGroupId:a?a.id:void 0}))}getNextGroupId(e){return this.getNeighboringGroupId(e,1)}getPreviousGroupId(e){return this.getNeighboringGroupId(e,-1)}isGroupVisited(e,r){return this.configuratorGroupStatusService.isGroupVisited(e,r)}getParentGroup(e,r){return this.configuratorUtilsService.getParentGroup(e,r)}hasSubGroups(e){return this.configuratorUtilsService.hasSubGroups(e)}getNeighboringGroupId(e,r){return this.getCurrentGroupId(e).pipe((0,v.w)(i=>this.configuratorCommonsService.getConfiguration(e).pipe((0,h.U)(a=>{let u;return a?.flatGroups.forEach((d,g)=>{d.id===i&&a?.flatGroups&&a?.flatGroups[g+r]&&(u=a?.flatGroups[g+r].id)}),u}),(0,m.q)(1))))}isConflictGroupType(e){return e===s.GroupType.CONFLICT_HEADER_GROUP||e===s.GroupType.CONFLICT_GROUP}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(O.yh),t.LFG(U),t.LFG(rt),t.LFG(_n))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Y=(()=>{class n{constructor(e,r,i){this.configuratorGroupsService=e,this.windowRef=r,this.keyboardFocusService=i}isCartEntryOrGroupVisited(e,r){return this.configuratorGroupsService.isGroupVisited(e,r).pipe((0,m.q)(1),(0,h.U)(i=>!!i||e.type===y.$g.OwnerType.CART_ENTRY))}assembleValuesForMultiSelectAttributes(e,r){const i=[];for(let a=0;a<e.length;a++){const u=r.values?r.values[a]:void 0;if(u){const d={valueCode:u.valueCode};d.name=u.name,d.quantity=u.quantity,d.selected=e[a].value,i.push(d)}else(0,t.X6Q)()&&console.warn("ControlArray does not match values, at least one value could not been found")}return i}scroll(e){let r=0;e instanceof HTMLElement&&(r=e.offsetTop),this.windowRef.nativeWindow?.scroll(0,r)}scrollToConfigurationElement(e){if(this.windowRef.isBrowser()){const r=this.getElement(e);r&&this.scroll(r)}}focusFirstAttribute(){if(!this.windowRef.isBrowser())return;const e=this.getElement("cx-configurator-form");if(e){const r=this.keyboardFocusService.findFocusable(e);r&&r.length>0&&r[0].focus()}}getFocusableElementById(e,r){return e.find(i=>{if(r&&(-1!==i.nodeName.toLocaleLowerCase().indexOf(r)||-1!==i.id.indexOf(r)))return i})}getFocusableConflictDescription(e){return this.getFocusableElementById(e,"cx-configurator-conflict-description")}getFocusableElementByValueUiKey(e,r){return this.getFocusableElementById(e,r)}getFocusableElementByAttributeId(e,r){return this.getFocusableElementById(e,r)}createAttributeValueUiKey(e,r){return e+"--"+r}focusValue(e){if(!this.windowRef.isBrowser())return;const r=this.getElement("cx-configurator-form");if(r){const i=this.keyboardFocusService.findFocusable(r);i.length>0&&this.focusOnElements(i,e)}}focusOnElements(e,r){let i=this.getFocusableConflictDescription(e);i||(i=this.focusOnElementForConflicting(r,i,e)),i&&i.focus()}focusOnElementForConflicting(e,r,i){const a=e.values?.find(u=>u.selected);if(a){const u=this.createAttributeValueUiKey(e.name,a.valueCode);r=this.getFocusableElementByValueUiKey(i,u)}return r||(r=this.getFocusableElementByAttributeId(i,e.name)),r}createGroupId(e){if(e)return e+"-group"}setFocus(e,r){e&&this.keyboardFocusService.set(e,r)}changeStyling(e,r,i){const a=this.getElement(e);a&&a.style.setProperty(r,i)}getElement(e){if(this.windowRef.isBrowser())return this.windowRef.document.querySelector(e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(K),t.LFG(c.X9E),t.LFG(C.K9x))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Za=(()=>{class n{constructor(e,r,i,a,u,d,g,l,_,T){this.routingService=e,this.configuratorCommonsService=r,this.configuratorCartService=i,this.configuratorGroupsService=a,this.configRouterExtractorService=u,this.globalMessageService=d,this.orderHistoryFacade=g,this.commonConfiguratorUtilsService=l,this.configUtils=_,this.intersectionService=T,this.subscription=new W.w,this.container$=this.configRouterExtractorService.extractRouterData().pipe((0,v.w)(w=>this.configuratorCommonsService.getConfiguration(w.owner).pipe((0,h.U)(B=>({routerData:w,configuration:B}))).pipe((0,v.w)(B=>this.configuratorCommonsService.hasPendingChanges(B.configuration.owner).pipe((0,h.U)(Yc=>({routerData:B.routerData,configuration:B.configuration,hasPendingChanges:Yc})))))))}ngOnInit(){this.makeAddToCartButtonSticky()}navigateToCart(){this.routingService.go("cart")}navigateToOverview(e,r){this.routingService.go({cxRoute:"configureOverview"+e,params:{ownerType:"cartEntry",entityKey:r.id}})}displayConfirmationMessage(e){this.globalMessageService.add({key:e},c.xUg.MSG_TYPE_CONFIRMATION)}performNavigation(e,r,i,a,u){const d=i?"configurator.addToCart.confirmation":"configurator.addToCart.confirmationUpdate";a?this.navigateToCart():this.navigateToOverview(e,r),u&&this.displayConfirmationMessage(d)}getButtonResourceKey(e,r){return e.isOwnerCartEntry&&r.isCartEntryUpdateRequired?"configurator.addToCart.buttonUpdateCart":e.isOwnerCartEntry&&!r.isCartEntryUpdateRequired?"configurator.addToCart.buttonAfterAddToCart":"configurator.addToCart.button"}onAddToCart(e,r){const a=e.owner.configuratorType,u=r.pageType===y.iB.PageType.OVERVIEW,d=r.owner.type===y.$g.OwnerType.CART_ENTRY,g=e.owner,l=e.interactionState.currentGroup;l&&this.configuratorGroupsService.setGroupStatusVisited(e.owner,l),this.container$.pipe((0,S.h)(_=>!_.hasPendingChanges),(0,m.q)(1)).subscribe(()=>{d?this.onUpdateCart(e,a,g,u):this.onAddToCartForProduct(g,e,a,u)})}onAddToCartForProduct(e,r,i,a){this.configuratorCartService.addToCart(e.id,r.configId,e),this.configuratorCommonsService.getConfiguration(e).pipe((0,S.h)(u=>void 0!==u.nextOwner),(0,m.q)(1)).subscribe(u=>{this.navigateForProductBound(u,i,a)})}navigateForProductBound(e,r,i){const a=e.nextOwner??y.mR.createInitialOwner();this.performNavigation(r,a,!0,i,!0),i||this.configuratorCommonsService.removeConfiguration(a)}onUpdateCart(e,r,i,a){e.isCartEntryUpdateRequired&&this.configuratorCartService.updateCartEntry(e),this.performNavigation(r,i,!1,a,e.isCartEntryUpdateRequired??!1),e.isCartEntryUpdateRequired&&!a&&this.configuratorCommonsService.removeConfiguration(i)}leaveConfigurationOverview(){this.container$.pipe((0,m.q)(1)).subscribe(e=>{e.routerData.owner.type===y.$g.OwnerType.ORDER_ENTRY?this.goToOrderDetails(e.routerData.owner):this.routingService.go({cxRoute:"checkoutReviewOrder"})})}goToOrderDetails(e){this.orderHistoryFacade.loadOrderDetails(this.commonConfiguratorUtilsService.decomposeOwnerId(e.id).documentId),this.orderHistoryFacade.getOrderDetails().pipe((0,S.h)(r=>void 0!==r),(0,m.q)(1)).subscribe(r=>this.routingService.go({cxRoute:"orderDetails",params:r}))}extractConfigPrices(e){const r=e.priceSummary,i=r?.basePrice?.formattedValue,a=r?.selectedOptions?.formattedValue,u=r?.currentTotal?.formattedValue,d={basePrice:i,selectedOptions:a,totalPrice:u};return(!i||"-"===i)&&(d.basePrice="0"),(!a||"-"===a)&&(d.selectedOptions="0"),(!u||"-"===u)&&(d.totalPrice="0"),d}makeAddToCartButtonSticky(){const e={rootMargin:"0px 0px -100px 0px"};this.subscription.add(this.container$.pipe((0,m.q)(1),(0,It.g)(0),(0,h.U)(()=>this.configUtils.getElement(".cx-price-summary-container")),(0,v.w)(r=>r?this.intersectionService.isIntersecting(r,e):(0,L.of)(void 0)),(0,S.h)(r=>void 0!==r)).subscribe(r=>{this.configUtils.changeStyling("cx-configurator-add-to-cart-button","position",r?"sticky":"fixed")}))}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.Znh),t.Y36(U),t.Y36(se),t.Y36(K),t.Y36(y.u6),t.Y36(c.IWp),t.Y36(Yn.Kr),t.Y36(y.NU),t.Y36(Y),t.Y36(C.o8g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-add-to-cart-button"]],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngIf","ngIfElse"],["displayOnly",""],[1,"cx-add-to-cart-btn-container"],[1,"cx-btn","btn","btn-block","btn-primary","cx-add-to-cart-btn",3,"click"],[1,"cx-display-only-btn-container"],[1,"cx-btn","btn","btn-block","btn-primary","cx-display-only-btn",3,"click"]],template:function(e,r){1&e&&(t.YNc(0,$n,4,2,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,r.container$))},dependencies:[p.O5,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),Va=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorAddToCartButton:{component:Za}}})],imports:[p.ez,c.LUR]}),n})(),q=(()=>{class n{createValueUiKey(e,r,i){return this.createAttributeUiKey(e,r)+n.SEPERATOR+i}createAttributeValueIdForConfigurator(e,r){return this.createValueUiKey(this.getUiType(e),e.name,r)}getUiType(e){return e.uiType?e.uiType:s.UiType.NOT_IMPLEMENTED}createAttributeUiKey(e,r){return n.PREFIX+n.SEPERATOR+e+n.SEPERATOR+r}createAttributeIdForConfigurator(e){return this.createAttributeUiKey(this.getUiType(e),e.name)}createAriaLabelledBy(e,r,i,a){let u=this.createAttributeUiKey(n.PREFIX_LABEL,r);return i&&(u+=" "+this.createAttributeUiKey(e,r)+n.SEPERATOR+i+" ",u+="boolean"!=typeof a||a?this.createAttributeUiKey(n.PREFIX_OPTION_PRICE_VALUE,r)+n.SEPERATOR+i:this.createAttributeUiKey(n.PREFIX_DDLB_OPTION_PRICE_VALUE,r)+n.SEPERATOR+i),u}createFocusId(e,r){return`${e}--${r}--focus`}getLabel(e,r,i){let a=r||"";return e&&i&&(a+=" / ["+i+"]"),a}getAttributeCode(e){const r=e.attrCode;if(r)return r;throw new Error("No attribute code for: "+e.name)}isWithAdditionalValues(e){const r=e.uiType;return r===s.UiType.RADIOBUTTON_ADDITIONAL_INPUT||r===s.UiType.DROPDOWN_ADDITIONAL_INPUT}}return n.SEPERATOR="--",n.PREFIX="cx-configurator",n.PREFIX_LABEL="label",n.PREFIX_OPTION_PRICE_VALUE="price--optionsPriceValue",n.PREFIX_DDLB_OPTION_PRICE_VALUE="option--price",n})(),ka=(()=>{class n extends q{constructor(e){super(),this.configUtils=e,this.iconType=C.e1G}ngOnInit(){this.showRequiredMessageForUserInput$=this.configUtils.isCartEntryOrGroupVisited(this.owner,this.groupId).pipe((0,h.U)(e=>!!e&&this.needsUserInputMessage()))}isUserInputEmpty(e){return void 0!==e&&(!e.trim()||0===e.length)}needsUserInputMessage(){const e=this.attribute.uiType;return(this.attribute.required&&this.attribute.incomplete&&(e===s.UiType.STRING||e===s.UiType.NUMERIC)&&this.isUserInputEmpty(this.attribute.userInput))??!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-footer"]],inputs:{attribute:"attribute",owner:"owner",groupId:"groupId"},features:[t.qOj],decls:2,vars:3,consts:[["class","cx-required-error-msg","aria-live","assertive","aria-atomic","true","role","alert",3,"id",4,"ngIf"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-required-error-msg",3,"id"],[3,"type"]],template:function(e,r){1&e&&(t.YNc(0,Hn,5,8,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,r.showRequiredMessageForUserInput$))},dependencies:[p.O5,C.oJW,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),Qa=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.u5,f.UX,p.ez,c.LUR,C.QX1]}),n})(),Ya=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:function(e){let r=null;return r=e?new(e||n):t.LFG(c.DeH),r},providedIn:"root"}),n})();class N{constructor(o,e){this.adapters=o,this.configUtilsService=e}createConfiguration(o){return this.getAdapter(o.configuratorType).createConfiguration(o)}readConfiguration(o,e,r){return this.getAdapter(r.configuratorType).readConfiguration(o,e,r)}updateConfiguration(o){return this.getAdapter(o.owner.configuratorType).updateConfiguration(o)}addToCart(o){return this.getAdapter(o.owner.configuratorType).addToCart(o)}readConfigurationForCartEntry(o){return this.getAdapter(o.owner.configuratorType).readConfigurationForCartEntry(o)}updateConfigurationForCartEntry(o){return this.getAdapter(o.configuration.owner.configuratorType).updateConfigurationForCartEntry(o)}readConfigurationForOrderEntry(o){return this.getAdapter(o.owner.configuratorType).readConfigurationForOrderEntry(o)}readPriceSummary(o){return this.getAdapter(o.owner.configuratorType).readPriceSummary(o)}getConfigurationOverview(o){return this.getAdapter(o.owner.configuratorType).getConfigurationOverview(o.configId)}searchVariants(o){return this.getAdapter(o.owner.configuratorType).searchVariants(o.configId)}getAdapter(o){const e=this.adapters.find(r=>r.getConfiguratorType()===o);if(e)return e;throw new Error("No adapter found for configurator type: "+o)}}N.CONFIGURATOR_ADAPTER_LIST=new t.OlP("ConfiguratorAdapterList"),N.\u0275fac=function(o){return new(o||N)(t.LFG(N.CONFIGURATOR_ADAPTER_LIST),t.LFG(y.NU))},N.\u0275prov=t.Yz7({token:N,factory:N.\u0275fac});let Ja=(()=>{class n{constructor(e,r){this.configuratorCartService=e,this.routingService=r,this.subscription=new W.w,this.observeRouterChanges()}observeRouterChanges(){this.subscription.add(this.routingService.getRouterState().subscribe(e=>{this.isConfiguratorRelatedRoute(e.state.semanticRoute)||this.configuratorCartService.removeCartBoundConfigurations()}))}isConfiguratorRelatedRoute(e){return!!e&&e.includes("configure")}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(se),t.LFG(c.Znh))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ka=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Ja))},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})();const $a={productConfigurator:{enableVariantSearch:!1}};let Cn=(()=>{class n{getFirstGroupWithAttributes(e){const r=this.getFirstGroupWithAttributesForList(e.groups);if(r)return r;throw new Error("Configuration does not have any attributes")}getFirstGroupWithAttributesForList(e){const r=e.filter(a=>a.attributes&&a.attributes.length>0).shift();let i;return i=r?r.id:e.filter(a=>a.subGroups&&a.subGroups.length>0).flatMap(a=>this.getFirstGroupWithAttributesForList(a.subGroups)).filter(a=>a).shift(),i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const za=[(()=>{class n{constructor(e,r,i,a,u,d,g){this.actions$=e,this.configuratorCommonsConnector=r,this.commonConfigUtilsService=i,this.configuratorGroupUtilsService=a,this.configuratorGroupStatusService=u,this.store=d,this.configuratorBasicEffectService=g,this.createConfiguration$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(qt),(0,J.zg)(l=>this.configuratorCommonsConnector.createConfiguration(l.payload).pipe((0,v.w)(_=>{const T=this.configuratorBasicEffectService.getFirstGroupWithAttributes(_);return this.store.dispatch(new et({..._,interactionState:{currentGroup:T}})),[new He(_),new mt(_)]}),(0,G.K)(_=>[new $e({ownerKey:l.payload.key,error:(0,c.cxH)(_)})]))))),this.readConfiguration$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Zt),(0,J.zg)(l=>this.configuratorCommonsConnector.readConfiguration(l.payload.configuration.configId,l.payload.groupId,l.payload.configuration.owner).pipe((0,v.w)(_=>[new oe(_)]),(0,G.K)(_=>[new ie({ownerKey:l.payload.configuration.owner.key,error:(0,c.cxH)(_)})]))))),this.updateConfiguration$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(kt),(0,h.U)(l=>l.payload),(0,J.zg)(l=>this.configuratorCommonsConnector.updateConfiguration(l).pipe((0,h.U)(_=>new je(_)),(0,G.K)(_=>{const T=(0,c.cxH)(_);return[new Xe({configuration:l,error:T})]}))))),this.updatePriceSummary$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Ht),(0,h.U)(l=>l.payload),(0,S.h)(l=>!0===l.pricingEnabled),(0,J.zg)(l=>this.configuratorCommonsConnector.readPriceSummary(l).pipe((0,h.U)(_=>new rn(_)),(0,G.K)(_=>{const T=(0,c.cxH)(_);return[new nn({ownerKey:l.owner.key,error:T})]}))))),this.getOverview$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(zt),(0,h.U)(l=>l.payload),(0,J.zg)(l=>this.configuratorCommonsConnector.getConfigurationOverview(l).pipe((0,h.U)(_=>new un({ownerKey:l.owner.key,overview:_})),(0,G.K)(_=>{const T=(0,c.cxH)(_);return[new an({ownerKey:l.owner.key,error:T})]}))))),this.updateConfigurationSuccess$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Yt),(0,h.U)(l=>l.payload),(0,J.zg)(l=>this.store.pipe((0,O.Ys)(ot(l.owner.key)),(0,m.q)(1),(0,S.h)(_=>!1===_),(0,ye.c)(this.store.pipe((0,O.Ys)((n=>(0,O.P1)(Q(n),o=>o?.interactionState?.currentGroup))(l.owner.key)),(0,m.q)(1),(0,h.U)(_=>{const T=this.configuratorBasicEffectService.getFirstGroupWithAttributes(l);return{currentGroupId:_,groupIdFromPayload:T,parentGroupFromPayload:this.configuratorGroupUtilsService.getParentGroup(l.groups,this.configuratorGroupUtilsService.getGroupById(l.groups,T),void 0)}}),(0,v.w)(_=>{const T=new tn(l),w=new et({...l,interactionState:{currentGroup:_.groupIdFromPayload}}),B=new mt(l);return _.currentGroupId===_.groupIdFromPayload?[T,w,B]:[T,w,B,new ae({configuration:l,groupId:_.groupIdFromPayload,parentGroupId:_.parentGroupFromPayload?.id})]}))))))),this.updateConfigurationFail$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Qt),(0,h.U)(l=>l.payload),(0,J.zg)(l=>this.store.pipe((0,O.Ys)(ot(l.configuration.owner.key)),(0,m.q)(1),(0,S.h)(_=>!1===_),(0,h.U)(()=>new en(l.configuration)))))),this.handleErrorOnUpdate$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Kt),(0,h.U)(l=>l.payload),(0,h.U)(l=>new We({configuration:l,groupId:this.configuratorBasicEffectService.getFirstGroupWithAttributes(l)})))),this.groupChange$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)($t),(0,v.w)(l=>this.store.pipe((0,O.Ys)(ot(l.payload.configuration.owner.key)),(0,m.q)(1),(0,S.h)(_=>!1===_),(0,v.w)(()=>this.configuratorCommonsConnector.readConfiguration(l.payload.configuration.configId,l.payload.groupId,l.payload.configuration.owner).pipe((0,v.w)(_=>[new sn({entityKey:l.payload.configuration.owner.key,currentGroup:l.payload.groupId}),new ue({entityKey:l.payload.configuration.owner.key,menuParentGroup:l.payload.parentGroupId}),new oe(_),new et({..._,interactionState:{currentGroup:l.payload.groupId}})]),(0,G.K)(_=>[new ie({ownerKey:l.payload.configuration.owner.key,error:(0,c.cxH)(_)})]))))))),this.removeProductBoundConfigurations$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(re),(0,v.w)(()=>this.store.pipe((0,O.Ys)(vt),(0,m.q)(1),(0,h.U)(l=>{const _=l.configurations.entities,T=[];for(const w in _)w.includes(y.$g.OwnerType.PRODUCT)&&T.push(w);return new ht({ownerKey:T})})))))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(x.eX),t.LFG(N),t.LFG(y.NU),t.LFG(rt),t.LFG(_n),t.LFG(O.yh),t.LFG(Cn))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),(()=>{class n{constructor(e,r,i,a,u,d){this.actions$=e,this.configuratorCommonsConnector=r,this.commonConfigUtilsService=i,this.configuratorGroupUtilsService=a,this.store=u,this.configuratorBasicEffectService=d,this.addToCart$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Dt),(0,h.U)(g=>g.payload),(0,v.w)(g=>this.configuratorCommonsConnector.addToCart(g).pipe((0,v.w)(l=>{const _=l.entry?.entryNumber;if(void 0===_)throw Error("Entry number is required in addToCart response");return[new Me({ownerKey:g.owner.key,cartEntryNo:_.toString()}),new z.$.CartAddEntrySuccess({...l,userId:g.userId,cartId:g.cartId,productCode:g.productCode,quantity:g.quantity,deliveryModeChanged:l.deliveryModeChanged,entry:l.entry,quantityAdded:l.quantityAdded,statusCode:l.statusCode,statusMessage:l.statusMessage})]}),(0,G.K)(l=>(0,L.of)(new z.$.CartAddEntryFail({userId:g.userId,cartId:g.cartId,productCode:g.productCode,quantity:g.quantity,error:l instanceof Z.UA?(0,c.cxH)(l):l}))))))),this.updateCartEntry$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Ct),(0,h.U)(g=>g.payload),(0,v.w)(g=>this.configuratorCommonsConnector.updateConfigurationForCartEntry(g).pipe((0,v.w)(l=>[new z.$.CartUpdateEntrySuccess({userId:g.userId,cartId:g.cartId,entryNumber:g.cartEntryNumber,quantity:l.quantity})]),(0,G.K)(l=>(0,L.of)(new z.$.CartUpdateEntryFail({userId:g.userId,cartId:g.cartId,entryNumber:g.cartEntryNumber,error:(0,c.cxH)(l)}))))))),this.readConfigurationForCartEntry$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Et),(0,v.w)(g=>this.configuratorCommonsConnector.readConfigurationForCartEntry(g.payload).pipe((0,v.w)(_=>{const T=new et(this.configuratorBasicEffectService?{..._,interactionState:{currentGroup:this.configuratorBasicEffectService.getFirstGroupWithAttributes(_)}}:_);return[new Se(_),T,new mt(_)]}),(0,G.K)(_=>[new Ee({ownerKey:g.payload.owner.key,error:(0,c.cxH)(_)})]))))),this.readConfigurationForOrderEntry$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Nt),(0,v.w)(g=>this.configuratorCommonsConnector.readConfigurationForOrderEntry(g.payload).pipe((0,v.w)(_=>[new Ne(_)]),(0,G.K)(_=>[new Re({ownerKey:g.payload.owner.key,error:(0,c.cxH)(_)})]))))),this.removeCartBoundConfigurations$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Gt),(0,v.w)(()=>this.store.pipe((0,O.Ys)(vt),(0,m.q)(1),(0,h.U)(g=>{const l=g.configurations.entities,_=[],T=[];for(const w in l)w.includes(y.$g.OwnerType.CART_ENTRY)?_.push(w):w.includes(y.$g.OwnerType.PRODUCT)&&T.push(w);return T.forEach(w=>{void 0!==l[w].value?.nextOwner&&_.push(w)}),new ht({ownerKey:_})}))))),this.addOwner$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Ft),(0,v.w)(g=>this.store.pipe((0,O.Ys)(Q(g.payload.ownerKey)),(0,m.q)(1),(0,v.w)(l=>{const _=y.mR.createOwner(y.$g.OwnerType.CART_ENTRY,g.payload.cartEntryNo);return this.commonConfigUtilsService.setOwnerKey(_),[new Pe({configuration:l,cartEntryNo:g.payload.cartEntryNo}),new cn({entityKey:_.key,interactionState:l.interactionState})]})))))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(x.eX),t.LFG(N),t.LFG(y.NU),t.LFG(rt),t.LFG(O.yh),t.LFG(Cn,8))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),(()=>{class n{constructor(e,r,i){this.actions$=e,this.configuratorCommonsConnector=r,this.configuratorCoreConfig=i,this.searchVariants$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Pt),(0,S.h)(()=>!0===this.configuratorCoreConfig.productConfigurator?.enableVariantSearch),(0,S.h)(a=>"CPQCONFIGURATOR"===a.payload.owner.configuratorType),(0,v.w)(a=>this.configuratorCommonsConnector.searchVariants(a.payload).pipe((0,v.w)(u=>[new Be({ownerKey:a.payload.owner.key,variants:u})]),(0,G.K)(u=>[new qe({ownerKey:a.payload.owner.key,error:(0,c.cxH)(u)})])))))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(x.eX),t.LFG(N),t.LFG(Ya))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})()];class at{static mergeGroupsWithSupplements(o,e){const r=[];return o.forEach(i=>r.push(this.mergeGroupWithSupplements(i,e))),r}static mergeGroupWithSupplements(o,e){return this.isTargetGroup(o,e)?this.mergeTargetGroupWithSupplements(o,e):{...o,subGroups:this.mergeGroupsWithSupplements(o.subGroups,e)}}static mergeTargetGroupWithSupplements(o,e){let r=o.attributes;return e.forEach(i=>{const a=at.getAttributeName(i.attributeUiKey);r=this.updateArrayElement(r,u=>u.name===a,u=>({...u,values:this.mergeValuesWithSupplement(u.values,i)}))}),{...o,attributes:r}}static mergeValuesWithSupplement(o,e){let r=o;return e.valueSupplements.forEach(i=>{r=this.updateArrayElement(r,a=>a.valueCode===i.attributeValueKey,a=>({...a,valuePrice:i.priceValue}))}),r}static isTargetGroup(o,e){const r=e[0];if(r){const i=at.getAttributeName(r.attributeUiKey),a=at.getKey(r.attributeUiKey,i);return o.id.indexOf(a)>=0}throw new Error("We expect at least one attribute supplement")}static updateArrayElement(o,e,r){if(o){const i=o.findIndex(e);if(-1===i)return o;const u=r(o[i],i),d=[...o];return d[i]=u,d}}static getAttributeName(o){const e=o.lastIndexOf("@");return o.slice(e+1)}static getKey(o,e){return o.replace("@"+e,"")}}const Xa={configId:"",productCode:"",groups:[],flatGroups:[],interactionState:{currentGroup:void 0,groupsVisited:{},menuParentGroup:void 0},owner:y.mR.createInitialOwner()};function ja(n=Xa,o){switch(o.type){case Jt:{const e=vn(o,n);return e.isCartEntryUpdateRequired=!0,e.overview=void 0,e}case Ct:{const e={...n};return e.isCartEntryUpdateRequired=!1,e}case Bt:case Vt:case Ut:return hn(vn(o,n));case Wt:return hn(function tu(n,o){const e={...n.payload},r=e.priceSupplements,i=r&&r.length>0?at.mergeGroupsWithSupplements(o.groups,r):o.groups;return{...o,...e,groups:i,interactionState:{...o.interactionState,...e.interactionState,issueNavigationDone:!0}}}(o,n));case Xt:{const e={...o.payload.overview};return{...n,overview:e,priceSummary:e.priceSummary,interactionState:{...n.interactionState,issueNavigationDone:!1}}}case Lt:return{...n,variants:o.payload.variants};case Rt:{const e={...o.payload};return{...n,...e,priceSummary:e.overview?.priceSummary}}case Mt:{const e={...o.payload.configuration};return e.nextOwner=y.mR.createOwner(y.$g.OwnerType.CART_ENTRY,o.payload.cartEntryNo),{...n,...e}}case jt:{const e=o.payload.interactionState;return{...n,interactionState:e}}case te:{const e=o.payload.currentGroup;return{...n,interactionState:{...n.interactionState,currentGroup:e}}}case ee:{const e=o.payload.menuParentGroup;return{...n,interactionState:{...n.interactionState,menuParentGroup:e}}}case ne:{const e=o.payload.visitedGroups,r={groupsVisited:{}};return n.interactionState.groupsVisited&&Object.keys(n.interactionState.groupsVisited).forEach(i=>mn(r,i)),e.forEach(i=>mn(r,i)),{...n,interactionState:{...n.interactionState,groupsVisited:r.groupsVisited}}}}return n}function mn(n,o){const e=n.groupsVisited;e&&(e[o]=!0)}function hn(n){if(n.interactionState.currentGroup)return n;let o;const e=n.flatGroups;return e&&e.length>0&&(o=e[0]?.id),{...n,interactionState:{...n.interactionState,currentGroup:o}}}function vn(n,o){const e={...n.payload},r=e.groups.length>0?e.groups:o.groups;return{...o,...e,groups:r,interactionState:{...o.interactionState,...e.interactionState,issueNavigationDone:!0}}}const yn=new t.OlP("ConfiguratorReducers"),nu={provide:yn,useFactory:function eu(){return{configurations:c.kPG.entityProcessesLoaderReducer(A,ja)}}};let ru=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[nu],imports:[p.ez,c.vUS,O.Aw.forFeature(Ie,yn),x.sQ.forFeature(za)]}),n})(),it=(()=>{class n{constructor(){this._expModeRequested=new he.t(1),this._expModeActive=new he.t(1)}setExpModeRequested(e){this._expModeRequested.next(e)}getExpModeRequested(){return this._expModeRequested}setExpModeActive(e){this._expModeActive.next(e)}getExpModeActive(){return this._expModeActive}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iu=(()=>{class n{constructor(e,r,i){this.eventService=e,this.configExpertModeService=r,this.configuratorCommonsService=i,this.subscription=new W.w,this.onLogout()}onLogout(){this.subscription.add((0,Gn.T)(this.eventService.get(c.rX_)).subscribe(()=>{this.configExpertModeService.setExpModeActive(!1),this.configExpertModeService.setExpModeRequested(!1),this.configuratorCommonsService.removeProductBoundConfigurations()}))}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.POd),t.LFG(it),t.LFG(U))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ou=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(iu))},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[N,(0,c.i51)($a)],imports:[ru,Ka]}),n})(),ut=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:function(e){let r=null;return r=e?new(e||n):t.LFG(c.DeH),r},providedIn:"root"}),n})(),au=(()=>{class n extends q{constructor(e,r,i,a){super(),this.configUtils=e,this.configuratorCommonsService=r,this.configuratorGroupsService=i,this.configuratorUiSettings=a,this.iconTypes=C.e1G}ngOnInit(){this.showRequiredMessageForDomainAttribute$=this.configUtils.isCartEntryOrGroupVisited(this.owner,this.groupId).pipe((0,h.U)(e=>!!e&&this.isRequiredAttributeWithDomain()))}getRequiredMessageKey(){return this.isSingleSelection()?this.isWithAdditionalValues(this.attribute)?"configurator.attribute.singleSelectAdditionalRequiredMessage":"configurator.attribute.singleSelectRequiredMessage":this.isMultiSelection?"configurator.attribute.multiSelectRequiredMessage":"configurator.attribute.singleSelectRequiredMessage"}get isMultiSelection(){switch(this.attribute.uiType){case s.UiType.CHECKBOXLIST:case s.UiType.CHECKBOXLIST_PRODUCT:case s.UiType.MULTI_SELECTION_IMAGE:return!0}return!1}isSingleSelection(){switch(this.attribute.uiType){case s.UiType.RADIOBUTTON:case s.UiType.RADIOBUTTON_ADDITIONAL_INPUT:case s.UiType.RADIOBUTTON_PRODUCT:case s.UiType.CHECKBOX:case s.UiType.DROPDOWN:case s.UiType.DROPDOWN_ADDITIONAL_INPUT:case s.UiType.DROPDOWN_PRODUCT:case s.UiType.SINGLE_SELECTION_IMAGE:return!0}return!1}isRequiredAttributeWithDomain(){const e=this.attribute.uiType;return(this.attribute.required&&this.attribute.incomplete&&e!==s.UiType.NOT_IMPLEMENTED&&e!==s.UiType.STRING&&e!==s.UiType.NUMERIC)??!1}isAttributeGroup(){return s.GroupType.ATTRIBUTE_GROUP===this.groupType}getConflictMessageKey(){return this.groupType===s.GroupType.CONFLICT_GROUP?"configurator.conflict.viewConfigurationDetails":this.isNavigationToConflictEnabled()?"configurator.conflict.viewConflictDetails":"configurator.conflict.conflictDetected"}get hasImage(){const e=this.attribute.images;return!!e&&e.length>0}get image(){const e=this.attribute.images;return e&&this.hasImage?e[0]:void 0}navigateToGroup(){this.configuratorCommonsService.getConfiguration(this.owner).pipe((0,m.q)(1)).subscribe(e=>{let r;r=this.groupType===s.GroupType.CONFLICT_GROUP?this.attribute.groupId:this.findConflictGroupId(e,this.attribute),r?(this.configuratorGroupsService.navigateToGroup(e,r),this.focusValue(this.attribute),this.scrollToAttribute(this.attribute.name)):this.logError('Attribute was not found in any conflict group. Note that for this navigation, commerce 22.05 or later is required. Consider to disable setting "enableNavigationToConflict"')})}scrollToAttribute(e){this.onNavigationCompleted(()=>this.configUtils.scrollToConfigurationElement("#"+this.createAttributeUiKey("label",e)))}findConflictGroupId(e,r){return e.flatGroups.filter(i=>i.groupType===s.GroupType.CONFLICT_GROUP).find(i=>i.attributes?.find(a=>a.key===r.key))?.id}logError(e){(0,t.X6Q)()&&console.error(e)}focusValue(e){this.onNavigationCompleted(()=>this.configUtils.focusValue(e))}onNavigationCompleted(e){this.configuratorCommonsService.isConfigurationLoading(this.owner).pipe((0,S.h)(r=>r),(0,m.q)(1),(0,v.w)(()=>this.configuratorCommonsService.isConfigurationLoading(this.owner).pipe((0,S.h)(r=>!r),(0,m.q)(1),(0,It.g)(0)))).subscribe(e)}isNavigationToConflictEnabled(){return this.configuratorUiSettings.productConfigurator?.enableNavigationToConflict??!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y),t.Y36(U),t.Y36(K),t.Y36(ut))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-header"]],inputs:{attribute:"attribute",owner:"owner",groupId:"groupId",groupType:"groupType",expMode:"expMode"},features:[t.qOj],decls:15,vars:26,consts:[[4,"cxFeatureLevel"],[3,"id"],["class","cx-conflict-msg",3,"id",4,"ngIf"],["class","cx-required-error-msg",3,"id",4,"ngIf"],["class","cx-attribute-img",3,"src","alt",4,"ngIf"],["conflictGroup",""],["withoutLink",""],["class","cx-hidden-msg",4,"ngIf"],[1,"cx-hidden-msg"],["aria-hidden","true",3,"type"],[1,"cx-conflict-msg",3,"id"],["aria-hidden","true",3,"type",4,"ngIf"],[4,"ngIf","ngIfElse"],["tabindex","0",1,"link","cx-action-link",3,"click","keydown.enter"],[1,"cx-required-error-msg",3,"id"],[3,"type"],[1,"cx-attribute-img",3,"src","alt"],[1,"cx-conflict-msg"]],template:function(e,r){1&e&&(t.YNc(0,zn,2,1,"ng-container",0),t.TgZ(1,"label",1),t.ALo(2,"async"),t.ALo(3,"cxTranslate"),t.ALo(4,"cxTranslate"),t.TgZ(5,"span"),t._uU(6),t.qZA()(),t.YNc(7,er,4,10,"div",2),t.YNc(8,nr,5,8,"div",3),t.ALo(9,"async"),t.YNc(10,rr,1,2,"img",4),t.YNc(11,ir,3,3,"ng-template",null,5,t.W1O),t.YNc(13,or,3,3,"ng-template",null,6,t.W1O)),2&e&&(t.Q6J("cxFeatureLevel","5.1"),t.xp6(1),t.ekj("cx-required-error",t.lcZ(2,12,r.showRequiredMessageForDomainAttribute$)),t.s9C("id",r.createAttributeUiKey("label",r.attribute.name)),t.uIk("aria-label",r.attribute.required?t.xi3(4,17,"configurator.a11y.requiredAttribute",t.VKq(24,ar,r.attribute.label)):t.xi3(3,14,"configurator.a11y.attribute",t.VKq(22,tt,r.attribute.label))),t.xp6(4),t.ekj("cx-required-icon",r.attribute.required),t.uIk("aria-describedby",r.createAttributeUiKey("label",r.attribute.name)),t.xp6(1),t.Oqu(r.getLabel(r.expMode,r.attribute.label,r.attribute.name)),t.xp6(1),t.Q6J("ngIf",r.attribute.hasConflicts),t.xp6(1),t.Q6J("ngIf",t.lcZ(9,20,r.showRequiredMessageForDomainAttribute$)),t.xp6(2),t.Q6J("ngIf",r.hasImage))},dependencies:[p.O5,C.oJW,c.EJv,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),uu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.u5,f.UX,p.ez,c.LUR,C.QX1,j.A0,c.GSh]}),n})(),cu=(()=>{class n{constructor(e){this.cdRef=e,this.showMore=!1,this.showHiddenText=!1,this.textSize=60}ngAfterViewInit(){this.textNormalized=this.normalize(this.text),this.textNormalized.length>this.textSize?(this.showMore=!0,this.textToShow=this.textNormalized.substring(0,this.textSize)):this.textToShow=this.textNormalized,this.cdRef.detectChanges()}toggleShowMore(){this.showHiddenText=!this.showHiddenText,this.textToShow=this.showHiddenText?this.textNormalized:this.textNormalized.substring(0,this.textSize),this.cdRef.detectChanges()}normalize(e=""){return e.replace(/<[^>]*>/g,"")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-show-more"]],inputs:{text:"text",textSize:"textSize",productName:"productName"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"innerHTML"],["tabindex","-1",3,"click",4,"ngIf"],["tabindex","-1",3,"click"],[4,"ngIf","ngIfElse"],["less",""]],template:function(e,r){1&e&&t.YNc(0,pr,4,8,"ng-container",0),2&e&&t.Q6J("ngIf",r.text)},dependencies:[p.O5,c.X$D],encapsulation:2,changeDetection:0}),n})(),$=(()=>{class n{constructor(e){this.config=e,this.quantity=new f.p4(1),this.optionsChangeSub=new W.w,this.quantityChangeSub=new W.w,this.changeQuantity=new t.vpe}ngOnInit(){this.quantity.setValue(this.quantityOptions?.initialQuantity),this.optionsChangeSub.add(this.quantityOptions.disableQuantityActions$?.pipe(function qn(n,o){return e=>e.lift(new Bn(n,o))}()).subscribe(e=>{e?(this.quantity.disable(),this.quantityChangeSub.unsubscribe()):(this.quantity.enable(),this.quantityChangeSub.add(this.subscribeToQuantityChange()))}))}subscribeToQuantityChange(){return this.quantity.valueChanges.pipe((0,Ot.D)(()=>(0,xt.H)(this.config.productConfigurator?.updateDebounceTime?.quantity)),(0,m.q)(1)).subscribe(()=>this.onChangeQuantity())}ngOnDestroy(){this.optionsChangeSub.unsubscribe(),this.quantityChangeSub.unsubscribe()}onChangeQuantity(){this.changeQuantity.emit(this.quantity?.value)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ut))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-quantity"]],inputs:{quantityOptions:"quantityOptions"},outputs:{changeQuantity:"changeQuantity"},decls:5,vars:6,consts:[[1,"cx-quantity"],[3,"allowZero","control","min"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"label"),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t._UZ(4,"cx-item-counter",1),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"configurator.attribute.quantity")),t.xp6(2),t.Q6J("allowZero",null==r.quantityOptions?null:r.quantityOptions.allowZero)("control",r.quantity)("min",null!=r.quantityOptions&&r.quantityOptions.allowZero?0:1))},dependencies:[C.odZ,c.X$D],encapsulation:2,changeDetection:0}),n})(),F=(()=>{class n{get price(){return this.formula.priceTotal?this.priceTotal:"+ "+this.formula.price?.formattedValue}get priceTotal(){return"+ "+this.formula.priceTotal?.formattedValue}displayQuantityAndPrice(){const e=this.formula.quantity;return!!e&&0!==this.formula.price?.value&&e>=1}displayPriceOnly(){return(0!==(this.formula.price?.value??0)||0!==(this.formula.priceTotal?.value??0))&&!this.displayQuantityAndPrice()}displayFormula(){return(this.formula.quantity&&0!==this.formula.quantity||this.formula.price&&0!==this.formula.price?.value||this.formula.priceTotal&&0!==this.formula.priceTotal?.value)??!1}quantityWithPrice(e){return e+"x("+this.formula.price?.formattedValue+")"}isPriceLightedUp(){return this.formula.isLightedUp??!1}get styleClass(){let e="cx-price";return this.isPriceLightedUp()||(e+=" cx-greyed-out"),e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-price"]],inputs:{formula:"formula"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngClass"],[1,"cx-quantity-price"],[1,"cx-price-total"]],template:function(e,r){1&e&&t.YNc(0,fr,3,2,"ng-container",0),2&e&&t.Q6J("ngIf",r.displayFormula())},dependencies:[p.mk,p.O5,c.X$D,c.bOD],encapsulation:2,changeDetection:0}),n})(),le=(()=>{class n extends q{constructor(e,r,i){super(),this.productService=e,this.keyBoardFocus=r,this.translation=i,this.loading$=new dt.X(!0),this.showDeselectionNotPossible=!1,this.handleDeselect=new t.vpe,this.handleQuantity=new t.vpe,this.handleSelect=new t.vpe,this.iconType=C.e1G}ngOnInit(){this.loading$.next(!0),this.product$=this.productService.get(this.productCardOptions.productBoundValue.productSystemId||"",y.ns.CONFIGURATOR_PRODUCT_CARD).pipe((0,h.U)(r=>r||this.transformToProductType(this.productCardOptions.productBoundValue)),(0,R.b)(()=>this.loading$.next(!1)))}get showQuantity(){return(this.productCardOptions.withQuantity&&this.productCardOptions.productBoundValue.selected&&this.productCardOptions.multiSelect)??!1}get focusConfig(){return{key:this.createFocusId(this.productCardOptions.attributeId.toString(),this.productCardOptions.productBoundValue.valueCode)}}onHandleSelect(){this.loading$.next(!0),this.productCardOptions.hideRemoveButton&&this.productCardOptions.fallbackFocusId&&this.keyBoardFocus.set(this.productCardOptions.fallbackFocusId),this.handleSelect.emit(this.productCardOptions.productBoundValue.valueCode)}onHandleDeselect(){this.productCardOptions.productBoundValue.selected&&this.productCardOptions.hideRemoveButton?this.showDeselectionNotPossibleMessage():(this.loading$.next(!0),this.handleDeselect.emit(this.productCardOptions.productBoundValue.valueCode))}onChangeQuantity(e){e?this.onHandleQuantity(e):this.onHandleDeselect()}isProductCardSelected(){return(this.productCardOptions.productBoundValue&&this.productCardOptions.productBoundValue.selected&&!this.productCardOptions.singleDropdown)??!1}hasPriceDisplay(){return!!(this.productCardOptions.productBoundValue.valuePrice||this.productCardOptions.productBoundValue.quantity||this.productCardOptions.productBoundValue.valuePriceTotal)}extractPriceFormulaParameters(){return this.productCardOptions.multiSelect?{quantity:this.productCardOptions.productBoundValue.quantity,price:this.productCardOptions.productBoundValue.valuePrice,priceTotal:this.productCardOptions.productBoundValue.valuePriceTotal,isLightedUp:this.productCardOptions.productBoundValue.selected}:{price:this.productCardOptions.productBoundValue.valuePrice,isLightedUp:this.productCardOptions.productBoundValue.selected}}extractQuantityParameters(){const e=this.productCardOptions.productBoundValue.quantity,r=this.productCardOptions.loading$?(0,Pn.aj)([this.loading$,this.productCardOptions.loading$]).pipe((0,h.U)(i=>i[0]||i[1])):this.loading$;return{allowZero:!this.productCardOptions.hideRemoveButton,initialQuantity:e||0,disableQuantityActions$:r}}isValueCodeDefined(e){return!(!e||"0"===e)}transformToProductType(e){return{code:e?.productSystemId,description:e?.description,images:{},name:e?.valueDisplay}}onHandleQuantity(e){this.loading$.next(!0),this.handleQuantity.emit({quantity:e,valueCode:this.productCardOptions.productBoundValue.valueCode})}showDeselectionNotPossibleMessage(){this.showDeselectionNotPossible=!0}getAriaLabelSingleUnselected(e){let r="";const i=this.productCardOptions.itemIndex+1;return this.isValueCodeDefined(this.productCardOptions?.productBoundValue?.valueCode)?this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeUnselectedWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,m.q)(1)).subscribe(a=>r=a):this.translation.translate("configurator.a11y.itemOfAttributeUnselected",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount}).pipe((0,m.q)(1)).subscribe(a=>r=a):this.translation.translate("configurator.a11y.selectNoItemOfAttribute",{attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount}).pipe((0,m.q)(1)).subscribe(a=>r=a),r}getAriaLabelSingleSelected(e){let r="";const i=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselectWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,m.q)(1)).subscribe(a=>r=a):this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselect",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount}).pipe((0,m.q)(1)).subscribe(a=>r=a),r}getAriaLabelSingleSelectedNoButton(e){let r="";const i=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeSelectedWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,m.q)(1)).subscribe(a=>r=a):this.translation.translate("configurator.a11y.itemOfAttributeSelected",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount}).pipe((0,m.q)(1)).subscribe(a=>r=a),r}getAriaLabelMultiSelected(e){let r="";const i=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselectWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,m.q)(1)).subscribe(a=>r=a):this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselect",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount}).pipe((0,m.q)(1)).subscribe(a=>r=a),r}getAriaLabelMultiUnselected(e){let r="";const i=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeUnselectedWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,m.q)(1)).subscribe(a=>r=a):this.translation.translate("configurator.a11y.itemOfAttributeUnselected",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount}).pipe((0,m.q)(1)).subscribe(a=>r=a),r}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.M52),t.Y36(C.K9x),t.Y36(c.D7D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-product-card"]],inputs:{productCardOptions:"productCardOptions"},outputs:{handleDeselect:"handleDeselect",handleQuantity:"handleQuantity",handleSelect:"handleSelect"},features:[t.qOj],decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-product-card",3,"ngClass"],[1,"cx-product-card-rows"],[1,"cx-product-card-imgs"],["format","product","aria-hidden","true",3,"container"],[1,"cx-product-card-info"],[1,"cx-product-card-name"],["class","cx-product-card-code",4,"ngIf"],[3,"text","textSize","productName",4,"ngIf"],["class","cx-product-card-rows column",4,"ngIf"],[1,"cx-product-card-code"],[3,"text","textSize","productName"],[1,"cx-product-card-rows","column"],[1,"cx-product-card-quantity-price"],[1,"cx-product-card-quantity"],[3,"quantityOptions","changeQuantity",4,"ngIf"],[1,"cx-product-card-price"],[3,"formula"],[1,"cx-product-card-action"],["class","cx-product-card-action-btn",4,"ngIf"],[3,"quantityOptions","changeQuantity"],[1,"cx-product-card-action-btn"],[4,"ngIf","ngIfElse"],["single",""],["class","btn btn-action",3,"cxFocus","click",4,"ngIf","ngIfElse"],["select",""],[1,"btn","btn-action",3,"cxFocus","click"],[1,"btn","btn-primary",3,"disabled","cxFocus","click"],["class","btn btn-primary",3,"disabled","cxFocus","click",4,"ngIf","ngIfElse"],["deselect",""],["class","btn btn-action",3,"disabled","cxFocus","click",4,"ngIf"],["class","cx-visually-hidden","tabindex","0",4,"ngIf"],[1,"btn","btn-action",3,"disabled","cxFocus","click"],["tabindex","0",1,"cx-visually-hidden"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-product-card-rows","deselection-error-message",3,"id"],["type","ERROR",1,"deselection-error-symbol"]],template:function(e,r){1&e&&(t.YNc(0,Nr,14,15,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,r.product$))},dependencies:[p.mk,p.O5,cu,$,C.R7z,F,C.RRe,C.oJW,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,c.LUR]}),n})(),su=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,c.LUR]}),n})();const lu={productConfigurator:{updateDebounceTime:{quantity:750,input:500},addRetractOption:!1,enableNavigationToConflict:!1}};let H=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)(lu)],imports:[p.ez,c.LUR,C.Td$,C.oPH]}),n})(),pe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,su,H,c.LUR,V.Bz,c.bhT,f.u5,f.UX,C.cOq,M,C.oPH,C.QX1]}),n})(),ct=(()=>{class n{disableQuantityActions(e){return!e||"0"===e}disableQuantityActionsMultiSelection(e){return!(e.dataType!==s.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL||e.values&&e.values.find(r=>r.selected)&&0!==e.quantity)}withQuantityOnAttributeLevel(e){return e.dataType===s.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL}withQuantity(e,r){switch(r){case s.UiType.DROPDOWN_PRODUCT:case s.UiType.DROPDOWN:case s.UiType.RADIOBUTTON_PRODUCT:case s.UiType.RADIOBUTTON:return e===s.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL;case s.UiType.CHECKBOXLIST:case s.UiType.CHECKBOXLIST_PRODUCT:return e===s.DataType.USER_SELECTION_QTY_VALUE_LEVEL;default:return!1}}allowZeroValueQuantity(e){const r=e.values?e.values.filter(i=>i.selected).length:0;return!(e.required&&r<2)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yt=(()=>{class n extends q{constructor(e,r){super(),this.quantityService=e,this.translation=r,this.loading$=new dt.X(!1),this.selectionChange=new t.vpe}get withQuantity(){return this.quantityService.withQuantity(this.attribute.dataType??s.DataType.NOT_IMPLEMENTED,this.attribute.uiType??s.UiType.NOT_IMPLEMENTED)}get disableQuantityActions(){return this.quantityService.disableQuantityActions(this.attribute.selectedSingleValue)}onSelect(e){this.loading$.next(!0);const r={changedAttribute:{...this.attribute,selectedSingleValue:e},ownerKey:this.ownerKey,updateType:s.UpdateType.ATTRIBUTE};this.selectionChange.emit(r)}onSelectAdditionalValue(e){const r=e.changedAttribute.userInput;r&&(this.loading$.next(!0),e.changedAttribute.selectedSingleValue=r,this.selectionChange.emit(e))}onHandleQuantity(e){this.loading$.next(!0);const r={changedAttribute:{...this.attribute,quantity:e},ownerKey:this.ownerKey,updateType:s.UpdateType.ATTRIBUTE_QUANTITY};this.selectionChange.emit(r)}onChangeQuantity(e,r){e?this.onHandleQuantity(e):(r&&r.setValue("0"),this.onSelect(""))}getInitialQuantity(e){const r=this.attribute.quantity??0;return e?"0"!==e.value?r:0:this.attribute.selectedSingleValue?r:0}extractQuantityParameters(e){const r=this.getInitialQuantity(e),i=this.loading$.pipe((0,h.U)(a=>a||this.disableQuantityActions));return{allowZero:!this.attribute.required,initialQuantity:r,disableQuantityActions$:i}}extractPriceFormulaParameters(){return{quantity:this.attribute.quantity,price:this.getSelectedValuePrice(),priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractValuePriceFormulaParameters(e){if(e)return{price:e.valuePrice,isLightedUp:e.selected}}getSelectedValuePrice(){return this.attribute.values?.find(e=>e.selected)?.valuePrice}get isAdditionalValueNumeric(){return this.isWithAdditionalValues(this.attribute)&&this.attribute.validationType===s.ValidationType.NUMERIC}get isAdditionalValueAlphaNumeric(){return this.isWithAdditionalValues(this.attribute)&&this.attribute.validationType===s.ValidationType.NONE}getAriaLabel(e,r){const i=this.getAriaLabelWithoutAdditionalValue(e,r);return this.isWithAdditionalValues(this.attribute)?i+" "+this.getAdditionalValueAriaLabel():i}getAdditionalValueAriaLabel(){let e="";return this.translation.translate("configurator.a11y.additionalValue").pipe((0,m.q)(1)).subscribe(r=>e=r),e}getAriaLabelWithoutAdditionalValue(e,r){let i="";return e.valuePrice&&0!==e.valuePrice?.value?e.valuePriceTotal&&0!==e.valuePriceTotal?.value?this.translation.translate("configurator.a11y.selectedValueOfAttributeFullWithPrice",{value:e.valueDisplay,attribute:r.label,price:e.valuePriceTotal.formattedValue}).pipe((0,m.q)(1)).subscribe(a=>i=a):this.translation.translate("configurator.a11y.selectedValueOfAttributeFullWithPrice",{value:e.valueDisplay,attribute:r.label,price:e.valuePrice.formattedValue}).pipe((0,m.q)(1)).subscribe(a=>i=a):this.translation.translate("configurator.a11y.selectedValueOfAttributeFull",{value:e.valueDisplay,attribute:r.label}).pipe((0,m.q)(1)).subscribe(a=>i=a),i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ct),t.Y36(c.D7D))},n.\u0275dir=t.lG2({type:n,inputs:{attribute:"attribute",ownerKey:"ownerKey",language:"language",ownerType:"ownerType",expMode:"expMode"},outputs:{selectionChange:"selectionChange"},features:[t.qOj]}),n})(),bn=(()=>{class n extends q{constructor(e){super(),this.quantityService=e,this.loading$=new dt.X(!1),this.selectionChange=new t.vpe}get withQuantityOnAttributeLevel(){return this.quantityService.withQuantityOnAttributeLevel(this.attribute)}get withQuantity(){return this.quantityService.withQuantity(this.attribute.dataType??s.DataType.NOT_IMPLEMENTED,this.attribute.uiType??s.UiType.NOT_IMPLEMENTED)}get disableQuantityActions(){return this.quantityService.disableQuantityActionsMultiSelection(this.attribute)}extractQuantityParameters(e,r){const i=this.loading$.pipe((0,h.U)(a=>a||this.disableQuantityActions));return{allowZero:r??!this.attribute.required,initialQuantity:e,disableQuantityActions$:i}}onHandleAttributeQuantity(e){this.loading$.next(!0);const r={changedAttribute:{...this.attribute,quantity:e},ownerKey:this.ownerKey,updateType:s.UpdateType.ATTRIBUTE_QUANTITY};this.selectionChange.emit(r)}extractPriceFormulaParameters(){return{quantity:0,price:{value:0,currencyIso:""},priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractValuePriceFormulaParameters(e){return{quantity:e.quantity,price:e.valuePrice,priceTotal:e.valuePriceTotal,isLightedUp:e.selected}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ct))},n.\u0275dir=t.lG2({type:n,inputs:{attribute:"attribute",ownerKey:"ownerKey",expMode:"expMode"},outputs:{selectionChange:"selectionChange"},features:[t.qOj]}),n})(),pu=(()=>{class n extends bn{constructor(e,r){super(r),this.configUtilsService=e,this.quantityService=r,this.attributeCheckBoxForms=new Array}ngOnInit(){const e=!this.allowZeroValueQuantity;for(const r of this.attribute.values??[]){let i;i=new f.p4(!!r.selected&&{value:!0,disabled:e}),this.attributeCheckBoxForms.push(i)}}get allowZeroValueQuantity(){return this.quantityService.allowZeroValueQuantity(this.attribute)}onSelect(){const e=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute),r={changedAttribute:{...this.attribute,values:e},ownerKey:this.ownerKey,updateType:s.UpdateType.ATTRIBUTE};this.selectionChange.emit(r)}onChangeValueQuantity(e,r,i){if(0===e)return this.attributeCheckBoxForms[i].setValue(!1),void this.onSelect();const a=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute).find(d=>d.valueCode===r);if(!a)return void((0,t.X6Q)()&&console.warn("no value for event:",e));a.quantity=e;const u={changedAttribute:{...this.attribute,values:[a]},ownerKey:this.ownerKey,updateType:s.UpdateType.VALUE_QUANTITY};this.selectionChange.emit(u)}onChangeQuantity(e){e?this.onHandleAttributeQuantity(e):(this.attributeCheckBoxForms.forEach((r,i)=>this.attributeCheckBoxForms[i].setValue(!1)),this.onSelect())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y),t.Y36(ct))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-checkbox-list"]],inputs:{group:"group"},features:[t.qOj],decls:6,vars:4,consts:[[2,"display","none"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[1,"form-check"],[1,"cx-value-label-pair"],["type","checkbox",1,"form-check-input",3,"id","cxFocus","value","formControl","name","change"],["aria-hidden","true",1,"cx-configurator-attribute-value-label","form-check-label",3,"id","for"],[1,"cx-value-price"],[3,"quantityOptions","changeQuantity",4,"ngIf"]],template:function(e,r){1&e&&(t.TgZ(0,"fieldset")(1,"legend",0),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,Rr,3,2,"div",2),t.YNc(5,Fr,12,34,"ng-container",3),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(r.attribute.label),t.xp6(1),t.s9C("id",r.createAttributeIdForConfigurator(r.attribute)),t.xp6(1),t.Q6J("ngIf",r.withQuantityOnAttributeLevel),t.xp6(1),t.Q6J("ngForOf",r.attribute.values))},dependencies:[C.RRe,f.Wl,f.JJ,f.oH,p.sg,p.O5,$,F,c.X$D],encapsulation:2,changeDetection:0}),n})(),du=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.oPH,f.u5,f.UX,p.ez,c.LUR,H,M]}),n})(),gu=(()=>{class n extends q{constructor(){super(...arguments),this.selectionChange=new t.vpe,this.attributeCheckBoxForm=new f.p4("")}ngOnInit(){this.attributeCheckBoxForm.setValue(this.attribute.selectedSingleValue)}onSelect(){const e=this.assembleSingleValue(),r={ownerKey:this.ownerKey,changedAttribute:{...this.attribute,values:e}};this.selectionChange.emit(r)}assembleSingleValue(){const e=[],r=this.attribute.values?this.attribute.values[0]:void 0;if(r){const i={valueCode:r.valueCode};i.name=r.name,i.selected=this.attributeCheckBoxForm.value,e.push(i)}return e}extractValuePriceFormulaParameters(e){return{quantity:e.quantity,price:e.valuePrice,priceTotal:e.valuePriceTotal,isLightedUp:e.selected}}}return n.\u0275fac=function(){let o;return function(r){return(o||(o=t.n5z(n)))(r||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-checkbox"]],inputs:{attribute:"attribute",group:"group",ownerKey:"ownerKey",expMode:"expMode"},outputs:{selectionChange:"selectionChange"},features:[t.qOj],decls:2,vars:2,consts:[[4,"cxFeatureLevel"],[3,"id"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"id","value","cxFocus","formControl","name","change"],["aria-hidden","true",1,"form-check-label",3,"id","for"],[2,"display","none"],[1,"cx-value-label-pair"],[1,"cx-value-price"],[3,"formula"]],template:function(e,r){1&e&&(t.YNc(0,Mr,7,19,"ng-container",0),t.YNc(1,Gr,14,28,"ng-container",0)),2&e&&(t.Q6J("cxFeatureLevel","!4.1"),t.xp6(1),t.Q6J("cxFeatureLevel","4.1"))},dependencies:[C.RRe,f.Wl,f.JJ,f.oH,c.EJv,F,c.X$D],encapsulation:2,changeDetection:0}),n})(),fu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.oPH,f.u5,f.UX,p.ez,c.LUR,c.GSh,M]}),n})(),bt=(()=>{class n extends q{constructor(e){super(),this.config=e,this.attributeInputForm=new f.p4(""),this.inputChange=new t.vpe,this.FALLBACK_DEBOUNCE_TIME=500}ngOnInit(){this.attributeInputForm.setValue(this.attribute.userInput),this.ownerType===y.$g.OwnerType.CART_ENTRY&&this.attribute.required&&this.attribute.incomplete&&!this.attributeInputForm.value&&this.attributeInputForm.markAsTouched(),this.sub=this.attributeInputForm.valueChanges.pipe((0,Ot.D)(()=>(0,xt.H)(this.config.productConfigurator?.updateDebounceTime?.input??this.FALLBACK_DEBOUNCE_TIME))).subscribe(()=>this.onChange())}onChange(){const e={ownerKey:this.ownerKey,changedAttribute:{...this.attribute,userInput:this.attributeInputForm.value}};this.attributeInputForm.invalid||this.inputChange.emit(e)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}get isRequired(){return(this.attribute.uiType===s.UiType.STRING||this.attribute.uiType===s.UiType.NUMERIC)&&(this.attribute.required??!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ut))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-input-field"]],inputs:{ownerType:"ownerType",attribute:"attribute",group:"group",ownerKey:"ownerKey"},outputs:{inputChange:"inputChange"},features:[t.qOj],decls:4,vars:21,consts:[[1,"form-group",3,"id"],[1,"form-control",3,"formControl","required","maxlength","cxFocus"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"input",1),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t.qZA()),2&e&&(t.s9C("id",r.createAttributeIdForConfigurator(r.attribute)),t.xp6(1),t.s9C("maxlength",r.attribute.maxlength),t.Q6J("formControl",r.attributeInputForm)("required",r.isRequired)("cxFocus",t.VKq(14,P,r.createAttributeIdForConfigurator(r.attribute))),t.uIk("required",r.attribute.required)("aria-label",void 0===r.attribute.userInput||0===r.attribute.userInput.length?t.xi3(2,8,"configurator.a11y.valueOfAttributeBlank",t.VKq(16,tt,r.attribute.label)):t.xi3(3,11,"configurator.a11y.valueOfAttributeFull",t.WLB(18,D,r.attribute.userInput,r.attribute.label)))("aria-describedby",r.createAttributeUiKey("label",r.attribute.name)))},dependencies:[C.RRe,f.Fj,f.JJ,f.Q7,f.nD,f.oH,c.X$D],encapsulation:2,changeDetection:0}),n})(),_u=(()=>{class n{performValidationAccordingToMetaData(e,r,i,a,u){const g=new RegExp("\\"+r,"g"),l=e.replace(g,""),_=l.split(i);return _.length>2||(1===_.length?l.length>a-u:_[0].length>a-u||_[1].length>u)}formatIntervalValue(e,r,i){return void 0===r&&(r=0),(0,p.uf)(e,i,"1."+r+"-"+r)}getIntervals(e){const r=[];return e&&e.length>0&&e.forEach(i=>{const a=this.getInterval(i);a&&0!==Object.keys(a).length&&r.push(a)}),r}getInterval(e){const r={minValue:void 0,maxValue:void 0,minValueIncluded:!1,maxValueIncluded:!1};if(!e||!e.name||e.selected)return;let i="",a="";return e.name.includes(" - ")?({minVal:i,maxVal:a}=this.handleStandardInterval(e.name,i,a,r)):({minVal:i,maxVal:a}=this.handleSingleOrInfinite(e.name,i,r,a)),i&&i.length>0&&(r.minValue=+i),a&&a.length>0&&(r.maxValue=+a),r}handleSingleOrInfinite(e,r,i,a){return e.includes(">")&&(r=e,i.minValueIncluded=!1,r=r.replace(">","")),e.includes("<")&&(a=e,i.maxValueIncluded=!1,a=a.replace("<","")),e.includes("\u2265")&&(r=e,i.minValueIncluded=!0,r=r.replace("\u2265","")),e.includes("\u2264")&&(a=e,i.maxValueIncluded=!0,a=a.replace("\u2264","")),!e.includes(">")&&!e.includes("<")&&!e.includes("\u2264")&&!e.includes("\u2265")&&(r=e,a=e),{minVal:r,maxVal:a}}handleStandardInterval(e,r,i,a){let u=e.indexOf(" - ");return r=e.substring(0,u),i=e.substring(u+3,e.length),a.minValueIncluded=!0,a.maxValueIncluded=!0,r.includes(">")&&(a.minValueIncluded=!1,r=r.replace(">","")),i.includes("<")&&(a.maxValueIncluded=!1,i=i.replace("<","")),{minVal:r,maxVal:i}}getPatternForValidationMessage(e,r,i,a){let u=(10**r-1).toString();e>0&&(u=u.substring(0,r-e)+"."+u.substring(r-e,r));const d=Number(u);let g=(0,p.uf)(d,a,"1."+e+"-"+e).replace(/9/g,"#");return i&&(g="-"+g),g}getNumberFormatValidator(e,r,i,a){return u=>{const d=u.value;if(d){const g=(0,p.dv)(e,p.wE.Group),l=(0,p.dv)(e,p.wE.Decimal);return new RegExp((a?"^-?":"^")+"[0123456789"+g+l+"]*$").test(d)?this.createValidationError(this.performValidationAccordingToMetaData(d,g,l,i+(d.includes("-")?1:0),r)):this.createValidationError(!0)}return null}}createValidationError(e){return e?{wrongFormat:{}}:null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),de=(()=>{class n extends bt{constructor(e,r,i){super(r),this.configAttributeNumericInputFieldService=e,this.config=r,this.translation=i,this.iconType=C.e1G,this.intervals=[]}mustDisplayValidationMessage(){return(this.attributeInputForm.dirty||this.attributeInputForm.touched)&&this.attributeInputForm.errors?.wrongFormat}ngOnInit(){this.locale=this.getInstalledLocale(this.language);let e=this.attribute.numDecimalPlaces,r=this.attribute.numTotalLength,i=this.attribute.negativeAllowed;if(void 0===e||void 0===r||void 0===i){const a=this.getDefaultSettings();e=a.numDecimalPlaces,r=a.numTotalLength,i=a.negativeAllowed,(0,t.X6Q)()&&console.warn("Meta data for numeric attribute not present, falling back to defaults")}this.attributeInputForm=new f.p4("",[this.configAttributeNumericInputFieldService.getNumberFormatValidator(this.locale,e,r,i)]),this.numericFormatPattern=this.configAttributeNumericInputFieldService.getPatternForValidationMessage(e,r,i,this.locale),this.attribute.userInput&&this.attributeInputForm.setValue(this.attribute.userInput),this.ownerType===y.$g.OwnerType.CART_ENTRY&&this.attribute.required&&this.attribute.incomplete&&!this.attributeInputForm.value&&this.attributeInputForm.markAsTouched(),this.attribute.intervalInDomain&&(this.intervals=this.configAttributeNumericInputFieldService.getIntervals(this.attribute.values)),this.sub=this.attributeInputForm.valueChanges.pipe((0,Ot.D)(()=>(0,xt.H)(this.config.productConfigurator?.updateDebounceTime?.input??this.FALLBACK_DEBOUNCE_TIME))).subscribe(()=>this.onChange())}ngOnDestroy(){super.ngOnDestroy()}getHelpTextForInterval(){let e="",r="";return this.intervals.forEach((i,a)=>{e=this.getIntervalText(i),a>0?(e=e.charAt(0).toLowerCase()+e.slice(1),this.translation.translate("configurator.a11y.combinedIntervalsText",{combinedInterval:r,newInterval:e}).pipe((0,m.q)(1)).subscribe(u=>r=u)):r=e}),r.trim()}getAriaLabelComplete(){let e="";return 0===this.attribute.userInput?.length?this.translation.translate("configurator.a11y.valueOfAttributeBlank",{attribute:this.attribute.label}).pipe((0,m.q)(1)).subscribe(r=>e=r):this.translation.translate("configurator.a11y.valueOfAttributeFull",{value:this.attribute.userInput,attribute:this.attribute.label}).pipe((0,m.q)(1)).subscribe(r=>e=r),e+=" ",e+=this.getHelpTextForInterval(),e}getIntervalText(e){let r="",i="",a="";if(e.minValue&&(i=this.configAttributeNumericInputFieldService.formatIntervalValue(e.minValue,this.attribute.numDecimalPlaces,this.locale)),e.maxValue&&(a=this.configAttributeNumericInputFieldService.formatIntervalValue(e.maxValue,this.attribute.numDecimalPlaces,this.locale)),e.minValue&&e.maxValue){if(e.minValue===e.maxValue)return this.translation.translate("configurator.a11y.numericIntervalSingleValue",{value:i}).pipe((0,m.q)(1)).subscribe(u=>r=u),r;r=this.getTextForRealInterval(i,a,r,e)}else r=this.getTextForPartialInterval(e,r,i,a);return r}getTextForPartialInterval(e,r,i,a){return e.minValue?r=this.getInfiniteIntervalText(e.minValueIncluded?"configurator.a11y.numericInfiniteIntervalMinValueIncluded":"configurator.a11y.numericInfiniteIntervalMinValue",i):e.maxValue&&(r=this.getInfiniteIntervalText(e.maxValueIncluded?"configurator.a11y.numericInfiniteIntervalMaxValueIncluded":"configurator.a11y.numericInfiniteIntervalMaxValue",a)),r}getTextForRealInterval(e,r,i,a){return this.translation.translate("configurator.a11y.numericIntervalStandard",{minValue:e,maxValue:r}).pipe((0,m.q)(1)).subscribe(u=>i=u),(!a.minValueIncluded||!a.maxValueIncluded)&&(a.minValueIncluded||a.maxValueIncluded?(a.minValueIncluded||(i+=" ",i+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardLowerEndpointNotIncluded")),a.maxValueIncluded||(i+=" ",i+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardUpperEndpointNotIncluded"))):(i+=" ",i+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardOpen"))),i}getAdditionalIntervalText(e){let r="";return this.translation.translate(e).pipe((0,m.q)(1)).subscribe(i=>r=i),r}getInfiniteIntervalText(e,r){let i="";return this.translation.translate(e,{value:r}).pipe((0,m.q)(1)).subscribe(a=>i=a),i}getDefaultSettings(){return{numDecimalPlaces:2,numTotalLength:6,negativeAllowed:!1}}getInstalledLocale(e){try{return(0,p.wM)(e),e}catch{return this.reportMissingLocaleData(e),"en"}}reportMissingLocaleData(e){(0,t.X6Q)()&&console.warn(`ConfigAttributeNumericInputFieldComponent: No locale data registered for '${e}' (see https://angular.io/api/common/registerLocaleData).`)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_u),t.Y36(ut),t.Y36(c.D7D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-numeric-input-field"]],inputs:{language:"language"},features:[t.qOj],decls:4,vars:13,consts:[["class","cx-intervalHelpText",4,"ngIf"],[1,"form-group",3,"id"],[1,"form-control",3,"formControl","required","maxlength","cxFocus","change"],["class","cx-validation-msg","aria-live","assertive","aria-atomic","true","role","alert",3,"id",4,"ngIf"],[1,"cx-intervalHelpText"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-validation-msg",3,"id"],[3,"type"]],template:function(e,r){1&e&&(t.YNc(0,Pr,2,1,"label",0),t.TgZ(1,"div",1)(2,"input",2),t.NdJ("change",function(){return r.onChange()}),t.qZA()(),t.YNc(3,qr,4,8,"div",3)),2&e&&(t.Q6J("ngIf",r.attribute.intervalInDomain),t.xp6(1),t.s9C("id",r.createAttributeIdForConfigurator(r.attribute)),t.xp6(1),t.s9C("maxlength",r.attribute.maxlength),t.Q6J("formControl",r.attributeInputForm)("required",r.isRequired)("cxFocus",t.VKq(11,P,r.createAttributeIdForConfigurator(r.attribute))),t.uIk("aria-describedby",r.mustDisplayValidationMessage()?r.createAttributeUiKey("label",r.attribute.name)+" "+r.createAttributeUiKey("attribute-msg",r.attribute.name):r.createAttributeUiKey("label",r.attribute.name))("role",r.attribute.dataType)("required",r.attribute.required)("aria-label",r.getAriaLabelComplete()),t.xp6(1),t.Q6J("ngIf",r.mustDisplayValidationMessage()))},dependencies:[C.RRe,f.Fj,f.JJ,f.Q7,f.nD,f.oH,p.O5,C.oJW,c.X$D],encapsulation:2,changeDetection:0}),n})(),Cu=(()=>{class n extends yt{constructor(e,r){super(e,r),this.quantityService=e,this.translation=r,this.attributeDropDownForm=new f.p4("")}ngOnInit(){this.attributeDropDownForm.setValue(this.attribute.selectedSingleValue)}getSelectedValue(){return this.attribute.values?.find(e=>e?.selected)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ct),t.Y36(c.D7D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-drop-down"]],inputs:{group:"group"},features:[t.qOj],decls:4,vars:4,consts:[["class","form-group",4,"ngIf"],["class","cx-attribute-level-quantity-price",4,"ngIf"],["class","cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","language","inputChange",4,"ngIf"],["class","cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","inputChange",4,"ngIf"],[1,"form-group"],[1,"cx-visually-hidden",3,"for"],[1,"form-control",3,"id","formControl","cxFocus","change"],[3,"label","selected","value",4,"ngFor","ngForOf"],["class","cx-value-price",4,"ngIf"],[3,"label","selected","value"],[1,"cx-value-price"],[3,"formula"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[1,"cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","language","inputChange"],[1,"cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","inputChange"]],template:function(e,r){1&e&&(t.YNc(0,Vr,7,15,"div",0),t.YNc(1,kr,3,2,"div",1),t.YNc(2,Qr,2,7,"cx-configurator-attribute-numeric-input-field",2),t.YNc(3,Yr,2,6,"cx-configurator-attribute-input-field",3)),2&e&&(t.Q6J("ngIf",r.attribute.values&&0!==r.attribute.values.length),t.xp6(1),t.Q6J("ngIf",r.withQuantity),t.xp6(1),t.Q6J("ngIf",r.isAdditionalValueNumeric),t.xp6(1),t.Q6J("ngIf",r.isAdditionalValueAlphaNumeric))},dependencies:[p.sg,p.O5,$,f.YN,f.Kr,f.EJ,f.JJ,C.RRe,f.oH,F,de,bt,c.X$D],encapsulation:2,changeDetection:0}),n})(),ge=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.oPH,f.u5,f.UX,p.ez,c.LUR,C.QX1]}),n})(),fe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.oPH,f.u5,f.UX,p.ez,c.LUR]}),n})(),mu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,H,f.u5,c.LUR,C.oPH,j.A0,f.UX,M,ge,fe]}),n})(),hu=(()=>{class n extends bn{constructor(){super(...arguments),this.preventAction$=new dt.X(!1),this.multipleSelectionValues=[]}ngOnInit(){this.initialize()}initialize(){this.attribute.values&&this.attribute.values.length>0&&(this.multipleSelectionValues=this.attribute.values.map(({name:e,quantity:r,selected:i,valueCode:a})=>({name:e,quantity:r,selected:i,valueCode:a}))),this.attribute.required&&this.multipleSelectionValues.filter(e=>e.selected).length<2&&this.preventAction$.next(!0)}updateMultipleSelectionValues(e,r){const i=this.multipleSelectionValues.findIndex(u=>u.valueCode===e);return this.multipleSelectionValues[i]={...this.multipleSelectionValues[i],selected:r},{changedAttribute:{...this.attribute,values:this.multipleSelectionValues},ownerKey:this.ownerKey,updateType:s.UpdateType.ATTRIBUTE}}updateMultipleSelectionValuesQuantity(e){const r=this.multipleSelectionValues.find(a=>a.valueCode===e.valueCode);return r?(r.quantity=e.quantity,{changedAttribute:{...this.attribute,values:[r]},ownerKey:this.ownerKey,updateType:s.UpdateType.VALUE_QUANTITY}):void 0}onSelect(e){this.loading$.next(!0),this.selectionChange.emit(this.updateMultipleSelectionValues(e,!0))}onDeselect(e){this.loading$.next(!0),this.selectionChange.emit(this.updateMultipleSelectionValues(e,!1))}onDeselectAll(){this.loading$.next(!0);const e={changedAttribute:{...this.attribute,values:[]},ownerKey:this.ownerKey,updateType:s.UpdateType.ATTRIBUTE};this.selectionChange.emit(e)}onChangeValueQuantity(e){this.loading$.next(!0),this.selectionChange.emit(this.updateMultipleSelectionValuesQuantity(e))}onChangeAttributeQuantity(e){this.loading$.next(!0),e?this.onHandleAttributeQuantity(e):this.onDeselectAll()}extractPriceFormulaParameters(){return{quantity:0,price:{value:0,currencyIso:""},priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractProductCardParameters(e,r,i,a){return{disableAllButtons:e??!1,hideRemoveButton:r??!1,productBoundValue:i,multiSelect:!0,withQuantity:this.withQuantity,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeLabel:this.attribute.label,attributeName:this.attribute.name,itemCount:this.attribute.values?.length?this.attribute.values.length:0,itemIndex:a}}}return n.\u0275fac=function(){let o;return function(r){return(o||(o=t.n5z(n)))(r||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-multi-selection-bundle"]],features:[t.qOj],decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[3,"id","productCardOptions","handleDeselect","handleQuantity","handleSelect",4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[3,"id","productCardOptions","handleDeselect","handleQuantity","handleSelect"]],template:function(e,r){1&e&&t.YNc(0,$r,3,3,"div",0),2&e&&t.Q6J("ngIf",null==r.attribute||null==r.attribute.values?null:r.attribute.values.length)},dependencies:[p.sg,p.O5,le,$,F,p.Ov],encapsulation:2,changeDetection:0}),n})(),vu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,pe,f.u5,c.LUR,C.oPH,f.UX,V.Bz,c.bhT,H,M]}),n})(),yu=(()=>{class n extends q{constructor(e){super(),this.configUtilsService=e,this.selectionChange=new t.vpe,this.attributeCheckBoxForms=new Array}ngOnInit(){const e=this.attribute.values;if(e)for(const r of e){let i;i=new f.p4(!!r.selected),this.attributeCheckBoxForms.push(i)}}onSelect(e){this.attributeCheckBoxForms[e].setValue(!this.attributeCheckBoxForms[e].value);const r=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute),i={ownerKey:this.ownerKey,changedAttribute:{...this.attribute,values:r}};this.selectionChange.emit(i)}extractValuePriceFormulaParameters(e){return{quantity:e.quantity,price:e.valuePrice,priceTotal:e.valuePriceTotal,isLightedUp:e.selected}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-multi-selection-image"]],inputs:{attribute:"attribute",ownerKey:"ownerKey",expMode:"expMode"},outputs:{selectionChange:"selectionChange"},features:[t.qOj],decls:2,vars:2,consts:[[1,"cx-row",3,"id"],["class","cx-configurator-select",3,"id",4,"ngFor","ngForOf"],[1,"cx-configurator-select",3,"id"],["type","checkbox",1,"form-input",3,"id","value","formControl","name","cxFocus","click"],[1,"cx-label-container"],["aria-hidden","true",1,"form-check-label",3,"id","for"],["class","cx-img",3,"src","alt",4,"ngIf"],["class","cx-img-dummy",4,"ngIf"],[3,"formula"],[1,"cx-img",3,"src","alt"],[1,"cx-img-dummy"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.YNc(1,zr,10,30,"div",1),t.qZA()),2&e&&(t.s9C("id",r.createAttributeIdForConfigurator(r.attribute)),t.xp6(1),t.Q6J("ngForOf",r.attribute.values))},dependencies:[C.RRe,f.Wl,f.JJ,f.oH,p.sg,p.O5,F,c.X$D],encapsulation:2,changeDetection:0}),n})(),bu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.oPH,f.u5,f.UX,p.ez,c.LUR,M]}),n})(),Tu=(()=>{class n extends yt{constructor(e,r){super(e,r),this.quantityService=e,this.translation=r,this.attributeRadioButtonForm=new f.p4("")}ngOnInit(){this.attributeRadioButtonForm.setValue(this.attribute.selectedSingleValue)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ct),t.Y36(c.D7D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-radio-button"]],features:[t.qOj],decls:8,vars:6,consts:[[2,"display","none"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],["class","form-check",4,"ngFor","ngForOf"],["class","cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","language","inputChange",4,"ngIf"],["class","cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","inputChange",4,"ngIf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[1,"form-check"],[1,"cx-value-label-pair"],["type","radio","formcontrolname","attributeRadioButtonForm",1,"form-check-input",3,"id","formControl","value","name","cxFocus","change"],["aria-hidden","true",1,"form-check-label","form-radio-label",3,"id","for"],[1,"cx-value-price"],[1,"cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","language","inputChange"],[1,"cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","inputChange"]],template:function(e,r){1&e&&(t.TgZ(0,"fieldset")(1,"legend",0),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,Xr,3,2,"div",2),t.YNc(5,jr,7,16,"div",3),t.YNc(6,ti,1,4,"cx-configurator-attribute-numeric-input-field",4),t.YNc(7,ei,1,3,"cx-configurator-attribute-input-field",5),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(r.attribute.label),t.xp6(1),t.s9C("id",r.createAttributeIdForConfigurator(r.attribute)),t.xp6(1),t.Q6J("ngIf",r.withQuantity),t.xp6(1),t.Q6J("ngForOf",r.attribute.values),t.xp6(1),t.Q6J("ngIf",r.isAdditionalValueNumeric),t.xp6(1),t.Q6J("ngIf",r.isAdditionalValueAlphaNumeric))},dependencies:[p.sg,p.O5,$,f.Fj,f._,f.JJ,f.Q7,C.RRe,f.oH,F,de,bt],encapsulation:2,changeDetection:0}),n})(),xu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,H,f.u5,c.LUR,C.oPH,f.UX,M,ge,fe]}),n})(),Iu=(()=>{class n extends q{}return n.\u0275fac=function(){let o;return function(r){return(o||(o=t.n5z(n)))(r||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-read-only"]],inputs:{attribute:"attribute",group:"group",expMode:"expMode"},features:[t.qOj],decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],[4,"ngIf","ngIfElse"],["noStaticDomain",""],[4,"ngFor","ngForOf"],["tabindex","0","class","cx-visually-hidden",3,"id",4,"ngIf"],["class","cx-read-only-label","aria-hidden","true",4,"ngIf"],["tabindex","0",1,"cx-visually-hidden",3,"id"],["aria-hidden","true",1,"cx-read-only-label"],["aria-hidden","true"],[4,"ngIf"]],template:function(e,r){1&e&&t.YNc(0,si,4,3,"div",0),2&e&&t.Q6J("ngIf",void 0!==r.attribute.values&&r.attribute.values.length>0)},dependencies:[p.sg,p.O5,c.X$D],encapsulation:2,changeDetection:0}),n})(),Au=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.oPH,f.u5,f.UX,p.ez,c.LUR]}),n})(),Ou=(()=>{class n extends yt{constructor(){super(...arguments),this.attributeDropDownForm=new f.p4("")}ngOnInit(){this.attributeDropDownForm.setValue(this.attribute.selectedSingleValue);const e=this.attribute.values;if(e&&e.length>0){const r=e.find(i=>i.selected);r&&(this.selectionValue=r)}}extractProductCardParameters(){return{hideRemoveButton:!0,productBoundValue:this.selectionValue,singleDropdown:!0,withQuantity:!1,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeName:this.attribute.name,itemCount:0,itemIndex:0}}}return n.\u0275fac=function(){let o;return function(r){return(o||(o=t.n5z(n)))(r||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-single-selection-bundle-dropdown"]],inputs:{group:"group"},features:[t.qOj],decls:3,vars:3,consts:[["class","form-group",4,"ngIf"],[3,"id","productCardOptions","handleDeselect",4,"ngIf"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[1,"form-group"],[1,"cx-visually-hidden",3,"for"],[1,"form-control",3,"id","formControl","cxFocus","change"],[3,"label","selected","value",4,"ngFor","ngForOf"],[3,"label","selected","value"],[3,"id","productCardOptions","handleDeselect"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"]],template:function(e,r){1&e&&(t.YNc(0,pi,6,14,"div",0),t.YNc(1,di,1,2,"cx-configurator-attribute-product-card",1),t.YNc(2,gi,3,2,"div",2)),2&e&&(t.Q6J("ngIf",null==r.attribute||null==r.attribute.values?null:r.attribute.values.length),t.xp6(1),t.Q6J("ngIf","0"!==(null==r.selectionValue?null:r.selectionValue.valueCode)),t.xp6(1),t.Q6J("ngIf",r.withQuantity))},dependencies:[p.sg,p.O5,le,f.YN,f.Kr,f.EJ,f.JJ,C.RRe,f.oH,$,F,c.X$D],encapsulation:2,changeDetection:0}),n})(),wu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,pe,f.u5,c.LUR,C.oPH,j.A0,f.UX,H,M]}),n})(),Su=(()=>{class n extends yt{extractProductCardParameters(e,r){return{hideRemoveButton:this.attribute.required,fallbackFocusId:this.getFocusIdOfNearestValue(e),productBoundValue:e,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeLabel:this.attribute.label,attributeName:this.attribute.name,itemCount:this.attribute.values?.length?this.attribute.values.length:0,itemIndex:r}}getFocusIdOfNearestValue(e){if(!this.attribute.values)return"n/a";let r=this.attribute.values.findIndex(i=>i.valueCode===e.valueCode);return r--,r<0&&(r=this.attribute.values.length>1?1:0),this.createFocusId(this.getAttributeCode(this.attribute).toString(),this.attribute.values[r].valueCode)}}return n.\u0275fac=function(){let o;return function(r){return(o||(o=t.n5z(n)))(r||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-single-selection-bundle"]],features:[t.qOj],decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[3,"id","productCardOptions","handleDeselect","handleSelect",4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[3,"id","productCardOptions","handleDeselect","handleSelect"]],template:function(e,r){1&e&&t.YNc(0,Ci,3,3,"div",0),2&e&&t.Q6J("ngIf",null==r.attribute||null==r.attribute.values?null:r.attribute.values.length)},dependencies:[p.sg,p.O5,le,$,F],encapsulation:2,changeDetection:0}),n})(),Eu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,pe,H,f.u5,c.LUR,C.Td$,C.oPH,f.UX,V.Bz,c.bhT,M]}),n})(),Uu=(()=>{class n extends q{constructor(){super(...arguments),this.attributeRadioButtonForm=new f.p4(""),this.selectionChange=new t.vpe}ngOnInit(){this.attributeRadioButtonForm.setValue(this.attribute.selectedSingleValue)}onClick(e){const r={ownerKey:this.ownerKey,changedAttribute:{...this.attribute,selectedSingleValue:e}};this.selectionChange.emit(r)}extractValuePriceFormulaParameters(e){if(e)return{price:e.valuePrice,isLightedUp:e.selected}}}return n.\u0275fac=function(){let o;return function(r){return(o||(o=t.n5z(n)))(r||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-attribute-single-selection-image"]],inputs:{attribute:"attribute",ownerKey:"ownerKey",expMode:"expMode"},outputs:{selectionChange:"selectionChange"},features:[t.qOj],decls:2,vars:2,consts:[["role","radiogroup",1,"cx-row",3,"id"],["class","cx-configurator-select",3,"id",4,"ngFor","ngForOf"],[1,"cx-configurator-select",3,"id"],["type","radio","formcontrolname","attributeRadioButtonForm","role","radio",1,"form-input",3,"id","value","formControl","name","cxFocus","click"],[1,"cx-label-container"],["aria-hidden","true",1,"form-check-label","form-radio-label",3,"id","for"],["class","cx-img",3,"src","alt",4,"ngIf"],["class","cx-img-dummy",4,"ngIf"],[3,"formula"],[1,"cx-img",3,"src","alt"],[1,"cx-img-dummy"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.YNc(1,vi,10,34,"div",1),t.qZA()),2&e&&(t.s9C("id",r.createAttributeIdForConfigurator(r.attribute)),t.xp6(1),t.Q6J("ngForOf",r.attribute.values))},dependencies:[C.RRe,f.Fj,f._,f.JJ,f.Q7,f.oH,p.sg,p.O5,F,c.X$D],encapsulation:2,changeDetection:0}),n})(),Nu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.oPH,f.u5,f.UX,p.ez,c.LUR,M]}),n})();class Tn{}let Ru=(()=>{class n{constructor(){this.groupType=s.GroupType,this.iconTypes=C.e1G,this.tabindex="0"}displayConflictDescription(e){return e.groupType===s.GroupType.CONFLICT_GROUP}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-conflict-description"]],hostVars:1,hostBindings:function(e,r){2&e&&t.Ikx("tabindex",r.tabindex)},inputs:{currentGroup:"currentGroup"},decls:1,vars:1,consts:[[4,"ngIf"],["aria-hidden","true",3,"type"]],template:function(e,r){1&e&&t.YNc(0,yi,3,2,"ng-container",0),2&e&&t.Q6J("ngIf",r.displayConflictDescription(r.currentGroup))},dependencies:[p.O5,C.oJW],encapsulation:2,changeDetection:0}),n})(),Du=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,C.QX1]}),n})(),Fu=(()=>{class n{constructor(){this.groupType=s.GroupType,this.tabindex="0"}displayConflictSuggestion(e){return!(e.groupType!==s.GroupType.CONFLICT_GROUP||!e.attributes)&&e.attributes?.length>1}createSuggestionUiKey(){return"suggestion--"+this.suggestionNumber}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-conflict-suggestion"]],hostVars:1,hostBindings:function(e,r){2&e&&t.Ikx("tabindex",r.tabindex)},inputs:{currentGroup:"currentGroup",attribute:"attribute",suggestionNumber:"suggestionNumber"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"cx-title"],["aria-hidden","true"]],template:function(e,r){1&e&&t.YNc(0,bi,10,23,"ng-container",0),2&e&&t.Q6J("ngIf",r.displayConflictSuggestion(r.currentGroup))},dependencies:[p.O5,c.X$D],encapsulation:2,changeDetection:0}),n})(),Mu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,c.LUR]}),n})(),Gu=(()=>{class n{constructor(e,r,i,a,u,d){this.configuratorCommonsService=e,this.configuratorGroupsService=r,this.configRouterExtractorService=i,this.languageService=a,this.configUtils=u,this.configExpertModeService=d,this.subscriptions=new W.w,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,S.h)(g=>g.pageType===y.iB.PageType.CONFIGURATION),(0,v.w)(g=>this.configuratorCommonsService.getOrCreateConfiguration(g.owner))),this.currentGroup$=this.configRouterExtractorService.extractRouterData().pipe((0,v.w)(g=>this.configuratorGroupsService.getCurrentGroup(g.owner))),this.activeLanguage$=this.languageService.getActive(),this.uiType=s.UiType}ngOnInit(){this.configRouterExtractorService.extractRouterData().pipe((0,m.q)(1)).subscribe(e=>{e.resolveIssues&&this.configuratorCommonsService.hasConflicts(e.owner).pipe((0,m.q)(1)).subscribe(r=>{r&&!e.skipConflicts?this.configuratorGroupsService.navigateToConflictSolver(e.owner):this.configuratorGroupsService.navigateToFirstIncompleteGroup(e.owner)}),e.expMode&&this.configExpertModeService?.setExpModeRequested(e.expMode)})}updateConfiguration(e){this.configuratorCommonsService.updateConfiguration(e.ownerKey,e.changedAttribute,e.updateType)}isConflictGroupType(e){return this.configuratorGroupsService.isConflictGroupType(e)}createGroupId(e){return this.configUtils.createGroupId(e)}get expMode(){return this.configExpertModeService?.getExpModeActive()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(U),t.Y36(K),t.Y36(y.u6),t.Y36(c.TSl),t.Y36(Y),t.Y36(it,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-form"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostForm",""],[4,"ngIf"],["role","tabpanel",3,"id"],["class","cx-group-attribute",3,"cx-hidden",4,"ngFor","ngForOf"],[3,"currentGroup"],[1,"cx-group-attribute"],[3,"attribute","owner","groupId","groupType","expMode"],[3,"attribute","ownerKey","ownerType","language","expMode","selectionChange",4,"ngIf"],[3,"attribute","ownerKey","selectionChange",4,"ngIf"],[3,"attribute","group","ownerKey","selectionChange",4,"ngIf"],[3,"attribute","group","ownerKey","ownerType","language","expMode","selectionChange",4,"ngIf"],[3,"attribute","group","ownerType","ownerKey","inputChange",4,"ngIf"],[3,"attribute","group","ownerType","ownerKey","language","inputChange",4,"ngIf"],[3,"attribute","group","ownerKey","expMode","selectionChange",4,"ngIf"],[3,"attribute","group","expMode",4,"ngIf"],[3,"attribute","ownerKey","expMode","selectionChange",4,"ngIf"],[3,"attribute","owner","groupId"],[3,"currentGroup","attribute","suggestionNumber"],[3,"attribute","ownerKey","ownerType","language","expMode","selectionChange"],[3,"attribute","ownerKey","selectionChange"],[3,"attribute","group","ownerKey","selectionChange"],[3,"attribute","group","ownerKey","ownerType","language","expMode","selectionChange"],[3,"attribute","group","ownerType","ownerKey","inputChange"],[3,"attribute","group","ownerType","ownerKey","language","inputChange"],[3,"attribute","group","ownerKey","expMode","selectionChange"],[3,"attribute","group","expMode"],[3,"attribute","ownerKey","expMode","selectionChange"],[4,"ngFor","ngForOf"],[1,"cx-ghost-attribute"],[1,"cx-ghost-header"],[1,"cx-ghost-title","ghost"],[1,"cx-ghost-icon","ghost"],[1,"cx-ghost-body"],[1,"cx-ghost-text","ghost"],[1,"cx-ghost-price","ghost"],[1,"cx-ghost-description-box"],[1,"cx-ghost-description","ghost"],["class","cx-ghost-radiobutton-value",4,"ngFor","ngForOf"],[1,"cx-ghost-radiobutton-value"],[1,"cx-ghost-value-label-pair"],[1,"cx-ghost-value-icon","ghost"],[1,"cx-ghost-label","ghost"],[1,"cx-ghost-value-price","ghost"],[1,"cx-ghost-price"]],template:function(e,r){if(1&e&&(t.YNc(0,Bi,3,3,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Qi,1,2,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,r.configuration$))("ngIfElse",i)}},dependencies:[p.sg,p.O5,bt,ka,de,au,Tu,Su,hu,Iu,Uu,Ou,gu,pu,Cu,yu,Ru,Fu,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),Pu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorForm:{component:Gu}}})],imports:[f.u5,f.UX,p.ez,c.LUR,j.A0,fe,Qa,ge,uu,xu,Eu,vu,Au,Nu,wu,fu,du,mu,bu,Du,Mu]}),n})(),Lu=(()=>{class n{constructor(e){this.windowRef=e}getFocusedGroupIndex(e){if(e){const r=e.find(i=>i.nativeElement?.id===this.windowRef?.document?.activeElement?.id);if(r)return e.toArray().indexOf(r)}}updateCurrentGroupIndex(e,r){return r&&r!==e?r:e}focusNextGroup(e,r){const i=this.getFocusedGroupIndex(r);e=this.updateCurrentGroupIndex(e,i),r&&(e===r.length-1?r.first?.nativeElement?.focus():r.toArray()[e+1]?.nativeElement.focus())}focusPreviousGroup(e,r){const i=this.getFocusedGroupIndex(r);e=this.updateCurrentGroupIndex(e,i),r&&(0===e?r.last?.nativeElement?.focus():r.toArray()[e-1]?.nativeElement?.focus())}switchGroupOnArrowPress(e,r,i){e.preventDefault(),"ArrowUp"===e.code?this.focusPreviousGroup(r,i):"ArrowDown"===e.code&&this.focusNextGroup(r,i)}isBackBtnFocused(e){if(e)return-1!==e.first?.nativeElement?.classList?.value?.indexOf("cx-menu-back")&&this.windowRef?.document?.activeElement===e.first?.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.X9E))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qu=(()=>{class n{constructor(e,r,i,a,u,d,g,l,_){this.configCommonsService=e,this.configuratorGroupsService=r,this.hamburgerMenuService=i,this.configRouterExtractorService=a,this.configUtils=u,this.configGroupMenuService=d,this.directionService=g,this.translation=l,this.configExpertModeService=_,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe((0,v.w)(T=>this.configCommonsService.getConfiguration(T.owner).pipe((0,h.U)(w=>({routerData:T,configuration:w})),(0,S.h)(w=>w.configuration.complete&&w.configuration.consistent||w.configuration.interactionState.issueNavigationDone||!w.routerData.resolveIssues)).pipe((0,h.U)(w=>w.configuration)))),this.currentGroup$=this.routerData$.pipe((0,v.w)(T=>this.configuratorGroupsService.getCurrentGroup(T.owner))),this.displayedParentGroup$=this.configuration$.pipe((0,v.w)(T=>this.configuratorGroupsService.getMenuParentGroup(T.owner)),(0,v.w)(T=>T?this.getCondensedParentGroup(T):(0,L.of)(T))),this.displayedGroups$=this.displayedParentGroup$.pipe((0,v.w)(T=>this.configuration$.pipe((0,h.U)(w=>this.condenseGroups(T?T.subGroups:w.groups))))),this.iconTypes=C.e1G,this.ERROR=" ERROR",this.COMPLETE=" COMPLETE",this.WARNING=" WARNING",this.ICON="ICON"}click(e){this.configuration$.pipe((0,m.q)(1)).subscribe(r=>{r.interactionState.currentGroup!==e.id&&(this.configuratorGroupsService.hasSubGroups(e)?this.configuratorGroupsService.setMenuParentGroup(r.owner,e.id):(this.configuratorGroupsService.navigateToGroup(r,e.id),this.hamburgerMenuService.toggle(!0),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")))})}navigateUp(){this.displayedParentGroup$.pipe((0,m.q)(1)).subscribe(e=>{if(e){const r=this.getParentGroup(e);this.configuration$.pipe((0,m.q)(1)).subscribe(i=>{r.pipe((0,m.q)(1)).subscribe(a=>{this.configuratorGroupsService.setMenuParentGroup(i.owner,a?a.id:void 0)})})}})}getConflictNumber(e){return e&&e.groupType===s.GroupType.CONFLICT_HEADER_GROUP?"("+e.subGroups.length+")":""}hasSubGroups(e){return this.configuratorGroupsService.hasSubGroups(e)}getParentGroup(e){return this.configuration$.pipe((0,h.U)(r=>this.configuratorGroupsService.getParentGroup(r.groups,e)))}getCondensedParentGroup(e){return e&&e.subGroups&&1===e.subGroups.length&&e.groupType!==s.GroupType.CONFLICT_HEADER_GROUP?this.getParentGroup(e).pipe((0,v.w)(r=>r?this.getCondensedParentGroup(r):(0,L.of)(r))):(0,L.of)(e)}condenseGroups(e){return e.flatMap(r=>1===r.subGroups.length&&r.groupType!==s.GroupType.CONFLICT_HEADER_GROUP?this.condenseGroups(r.subGroups):r)}isGroupVisited(e,r){return this.configuratorGroupsService.isGroupVisited(r.owner,e.id).pipe((0,h.U)(i=>i&&!this.isConflictGroupType(e.groupType??s.GroupType.ATTRIBUTE_GROUP)),(0,m.q)(1))}isConflictGroupType(e){return this.configuratorGroupsService.isConflictGroupType(e)}isConflictHeader(e){return e&&e.groupType===s.GroupType.CONFLICT_HEADER_GROUP}isConflictGroup(e){return e&&e.groupType===s.GroupType.CONFLICT_GROUP}getGroupStatusStyles(e,r){return this.isGroupVisited(e,r).pipe((0,h.U)(i=>{const a="CLOUDCPQCONFIGURATOR";let u="cx-menu-item";return r.owner.configuratorType!==a&&!e.consistent&&(u+=this.WARNING),r.owner.configuratorType!==a&&e.complete&&e.consistent&&i&&(u+=this.COMPLETE),!e.complete&&i&&(u+=this.ERROR),u}))}isLTRDirection(){return this.directionService.getDirection()===C.uEG.LTR}isRTLDirection(){return this.directionService.getDirection()===C.uEG.RTL}isForwardsNavigation(e){return"ArrowRight"===e.code&&this.isLTRDirection()||"ArrowLeft"===e.code&&this.isRTLDirection()}isBackNavigation(e){return"ArrowLeft"===e.code&&this.isLTRDirection()||"ArrowRight"===e.code&&this.isRTLDirection()}switchGroupOnArrowPress(e,r,i,a){"ArrowUp"===e.code||"ArrowDown"===e.code?this.configGroupMenuService.switchGroupOnArrowPress(e,r,this.groups):this.isForwardsNavigation(e)?i&&this.hasSubGroups(i)&&(this.click(i),this.setFocusForSubGroup(i,a.id)):this.isBackNavigation(e)&&this.configGroupMenuService.isBackBtnFocused(this.groups)&&(this.navigateUp(),this.setFocusForMainMenu(a.id))}setFocusForMainMenu(e){let r=e;this.configuration$.pipe((0,m.q)(1)).subscribe(i=>{i.groups?.forEach(a=>{1!==a.subGroups?.length&&(this.isGroupSelected(a.id,e)||this.containsSelectedGroup(a,e))&&(r=a.id)})}),this.configUtils.setFocus(r)}setFocusForSubGroup(e,r){let i="cx-menu-back";this.containsSelectedGroup(e,r)&&(i=r),this.configUtils.setFocus(i)}containsSelectedGroup(e,r){let i=!1;return e.subGroups?.forEach(a=>{this.isGroupSelected(a.id,r)&&(i=!0)}),i}getTabIndex(e,r){return this.isGroupSelected(e.id,r)||this.containsSelectedGroup(e,r)?0:-1}isGroupSelected(e,r){return e===r}createAriaControls(e){return this.configUtils.createGroupId(e)}getAriaLabel(e){let r="";return e&&e.groupType&&this.isConflictGroupType(e.groupType)?this.isConflictHeader(e)?this.translation.translate("configurator.a11y.conflictsInConfiguration",{numberOfConflicts:this.getConflictNumber(e)}).pipe((0,m.q)(1)).subscribe(i=>r=i):r=e.description?e.description:"":this.translation.translate("configurator.a11y.groupName",{group:e.description}).pipe((0,m.q)(1)).subscribe(i=>r=i),r}createIconId(e,r){return this.ICON+e+r}getAriaDescribedby(e,r){return this.isGroupVisited(e,r).pipe((0,h.U)(i=>{const a="CLOUDCPQCONFIGURATOR";let u="";return r.owner.configuratorType!==a&&!e.consistent&&e.groupType&&!this.isConflictGroupType(e.groupType)&&(u+=this.createIconId(C.e1G.WARNING,e.id)),r.owner.configuratorType!==a&&e.complete&&e.consistent&&i&&(u=u+" "+this.createIconId(C.e1G.SUCCESS,e.id)),!e.complete&&i&&(u=u+" "+this.createIconId(C.e1G.ERROR,e.id)),this.hasSubGroups(e)&&(u=u+" "+this.createIconId(C.e1G.CARET_RIGHT,e.id)),u+=" inListOfGroups",u}))}getGroupMenuTitle(e){let r=e.description;return!this.isConflictHeader(e)&&!this.isConflictGroup(e)&&this.configExpertModeService?.getExpModeActive().pipe((0,m.q)(1)).subscribe(i=>{i&&(r+=" / ["+e.name+"]")}),r}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(U),t.Y36(K),t.Y36(C.O2g),t.Y36(y.u6),t.Y36(Y),t.Y36(Lu),t.Y36(C.Lh6),t.Y36(c.D7D),t.Y36(it,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-group-menu"]],viewQuery:function(e,r){if(1&e&&t.Gf(Yi,5),2&e){let i;t.iGM(i=t.CRH())&&(r.groups=i)}},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostGroups",""],["role","tablist",1,"cx-group-menu"],["id","listOfGroups",1,"cx-visually-hidden"],["id","inListOfGroups","aria-hidden","true",1,"cx-visually-hidden"],[4,"ngIf"],[4,"ngFor","ngForOf"],["role","tab",3,"id","ngClass","cxFocus","tabindex","click","keydown"],["groupItem",""],[3,"title"],[1,"groupIndicators"],[1,"conflictNumberIndicator"],[1,"groupStatusIndicator"],[1,"WARNING",3,"type","id"],[1,"ERROR",3,"type","id"],[1,"COMPLETE",3,"type","id"],[1,"subGroupIndicator"],[3,"type","id",4,"ngIf"],["class","cx-menu-back","role","tab","aria-describedby","listOfGroups",3,"cxFocus","click","keydown",4,"ngIf"],["role","tab","aria-describedby","listOfGroups",1,"cx-menu-back",3,"cxFocus","click","keydown"],[3,"type"],[3,"type","id"],[1,"cx-ghost-group-menu"],["class","cx-ghost-menu-item",4,"ngFor","ngForOf"],[1,"cx-ghost-menu-item"],[1,"cx-ghost-item-title","ghost"]],template:function(e,r){if(1&e&&(t.YNc(0,ji,10,9,"ng-container",0),t.ALo(1,"async"),t.YNc(2,no,2,2,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,r.configuration$))("ngIfElse",i)}},dependencies:[p.mk,p.sg,p.O5,C.oJW,C.RRe,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),Bu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorMenu:{component:qu}}})],imports:[p.ez,c.LUR,C.QX1,C.oPH]}),n})(),Zu=(()=>{class n{constructor(e,r,i,a){this.configuratorCommonsService=e,this.configuratorGroupsService=r,this.configRouterExtractorService=i,this.configExpertModeService=a,this.ghostStyle=!0,this.displayedGroup$=this.configRouterExtractorService.extractRouterData().pipe((0,v.w)(u=>this.configuratorGroupsService.getCurrentGroup(u.owner).pipe((0,R.b)(()=>{this.ghostStyle=!1})))),this.iconTypes=C.e1G}getGroupTitle(e){let r=e.description;return e.groupType!==s.GroupType.CONFLICT_GROUP&&this.configExpertModeService?.getExpModeActive().pipe((0,m.q)(1)).subscribe(i=>{i&&(r+=" / ["+e.name+"]")}),r}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(U),t.Y36(K),t.Y36(y.u6),t.Y36(it,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-group-title"]],hostVars:2,hostBindings:function(e,r){2&e&&t.ekj("ghost",r.ghostStyle)},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostGroup",""],[1,"cx-group-title"],[1,"cx-ghost-group-title"]],template:function(e,r){if(1&e&&(t.YNc(0,ro,3,1,"ng-container",0),t.ALo(1,"async"),t.YNc(2,io,1,0,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,r.displayedGroup$))("ngIfElse",i)}},dependencies:[p.O5,p.Ov],encapsulation:2,changeDetection:0}),n})(),Vu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorGroupTitle:{component:Zu}}})],imports:[p.ez]}),n})(),ku=(()=>{class n{constructor(e){this.breakpointService=e}extractPriceFormulaParameters(){return{quantity:this.attributeOverview.quantity,price:this.attributeOverview.valuePrice,priceTotal:this.attributeOverview.valuePriceTotal,isLightedUp:!0}}isDesktop(){return this.breakpointService.isUp(C.Bst.md)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.r))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-overview-attribute"]],inputs:{attributeOverview:"attributeOverview"},decls:11,vars:26,consts:[[1,"cx-visually-hidden"],["aria-hidden","true",1,"cx-attribute-value"],[4,"ngIf","ngIfElse"],["mobile",""],["aria-hidden","true",1,"cx-attribute-label"],["aria-hidden","true",1,"cx-attribute-price"],[3,"formula"]],template:function(e,r){if(1&e&&(t.TgZ(0,"span",0),t._uU(1),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t.ALo(4,"cxTranslate"),t.qZA(),t.TgZ(5,"div",1),t._uU(6),t.qZA(),t.YNc(7,oo,5,2,"ng-container",2),t.ALo(8,"async"),t.YNc(9,ao,4,2,"ng-template",null,3,t.W1O)),2&e){const i=t.MAs(10);t.xp6(1),t.hij(" ",r.attributeOverview.valuePrice&&0!==(null==r.attributeOverview.valuePrice?null:r.attributeOverview.valuePrice.value)?r.attributeOverview.valuePriceTotal&&0!==(null==r.attributeOverview.valuePriceTotal?null:r.attributeOverview.valuePriceTotal.value)?t.xi3(2,4,"configurator.a11y.valueOfAttributeFullWithPrice",t.kEZ(15,k,r.attributeOverview.value,r.attributeOverview.attribute,r.attributeOverview.valuePriceTotal.formattedValue)):t.xi3(3,7,"configurator.a11y.valueOfAttributeFullWithPrice",t.kEZ(19,k,r.attributeOverview.value,r.attributeOverview.attribute,r.attributeOverview.valuePrice.formattedValue)):t.xi3(4,10,"configurator.a11y.valueOfAttributeFull",t.WLB(23,D,r.attributeOverview.value,r.attributeOverview.attribute)),"\n"),t.xp6(5),t.hij(" ",r.attributeOverview.value,"\n"),t.xp6(1),t.Q6J("ngIf",t.lcZ(8,13,r.isDesktop()))("ngIfElse",i)}},dependencies:[p.O5,F,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),xn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,c.LUR,M]}),n})(),Qu=(()=>{class n{constructor(e,r){this.productService=e,this.translation=r}ngOnInit(){const e={images:{}};this.product$=this.attributeOverview.productCode?this.productService.get(this.attributeOverview.productCode,"list").pipe((0,h.U)(r=>r||e)):(0,L.of)(e)}getProductPrimaryImage(e){return e?.images?.PRIMARY}extractPriceFormulaParameters(){return{quantity:this.attributeOverview.quantity,price:this.attributeOverview.valuePrice,priceTotal:this.attributeOverview.valuePriceTotal,isLightedUp:!0}}displayQuantity(){const e=this.attributeOverview.quantity;return void 0!==e&&e>0}displayPrice(){return void 0!==this.attributeOverview.valuePrice?.value&&this.attributeOverview.valuePrice?.value>0}getAriaLabel(){let e="";return this.displayQuantity()?void 0!==this.attributeOverview.valuePrice?.value&&0!==this.attributeOverview.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeFullWithPriceAndQuantity",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,price:this.attributeOverview.valuePriceTotal?.formattedValue,quantity:this.attributeOverview.quantity}).pipe((0,m.q)(1)).subscribe(r=>e=r):this.translation.translate("configurator.a11y.itemOfAttributeFullWithQuantity",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,quantity:this.attributeOverview.quantity}).pipe((0,m.q)(1)).subscribe(r=>e=r):void 0!==this.attributeOverview.valuePrice?.value&&0!==this.attributeOverview.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeFullWithPrice",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,price:this.attributeOverview.valuePriceTotal?.formattedValue}).pipe((0,m.q)(1)).subscribe(r=>e=r):this.translation.translate("configurator.a11y.itemOfAttributeFull",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute}).pipe((0,m.q)(1)).subscribe(r=>e=r),e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.M52),t.Y36(c.D7D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-cpq-overview-attribute"]],inputs:{attributeOverview:"attributeOverview"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-value-container"],[1,"cx-thumbnail"],["format","product","aria-hidden","true",3,"container"],[1,"cx-visually-hidden"],["aria-hidden","true",1,"cx-value-info"],["class","cx-code",4,"ngIf"],["class","cx-quantity",4,"ngIf"],["class","cx-price",4,"ngIf"],["aria-hidden","true",1,"cx-attribute-price-container"],[1,"cx-attribute-label"],[3,"formula"],[1,"cx-code"],[1,"cx-quantity"],[1,"cx-identifier"],[1,"cx-item"],[1,"cx-price"]],template:function(e,r){1&e&&(t.YNc(0,lo,16,8,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,r.product$))},dependencies:[p.O5,C.R7z,F,p.Ov,c.X$D,c.bOD],encapsulation:2,changeDetection:0}),n})(),Yu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,C.cOq,c.LUR,M]}),n})(),Ju=(()=>{class n{constructor(e,r){this.configuratorCommonsService=e,this.configRouterExtractorService=r,this.attributeOverviewType=s.AttributeOverviewType,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,v.w)(i=>this.configuratorCommonsService.getOrCreateConfiguration(i.owner)),(0,Vn.g)("configId"),(0,v.w)(i=>this.configuratorCommonsService.getConfigurationWithOverview(i)),(0,S.h)(i=>null!=i.overview))}hasAttributes(e){return void 0!==e.overview?.groups?.find(r=>!!r.attributes&&r.attributes.length)}isSameAttribute(e,r){return e.length>1&&(0===r?e[r]?.attribute===e[r+1]?.attribute:e[r]?.attribute===e[r-1]?.attribute)}getStyleClasses(e,r){let i="";switch(e[r]?.type){case this.attributeOverviewType.BUNDLE:i+="bundle";break;case this.attributeOverviewType.GENERAL:i+="general"}return(0===r||!this.isSameAttribute(e,r))&&(i+=" margin"),!this.isSameAttribute(e,r+1)&&!i.includes("bundle")&&(i+=" last-value-pair"),i}getGroupLevelStyleClasses(e,r){let i="cx-group";return 1===e?(i+=" topLevel",r&&r.length>0&&(i+=" subgroupTopLevel")):(i+=" subgroup",i+=" subgroupLevel"+e),i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(U),t.Y36(y.u6))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-overview-form"]],decls:8,vars:4,consts:[[4,"ngIf","ngIfElse"],["noAttributes",""],["groups",""],["ghostForm",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cx-no-attribute-value-pairs"],[1,"cx-visually-hidden"],[4,"cxFeatureLevel"],[4,"ngFor","ngForOf"],[1,"cx-group"],["aria-hidden","true"],["class","cx-attribute-value-pair",3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"cx-attribute-value-pair",3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"attributeOverview"],[3,"ngClass"],[1,"cx-ghost-group"],[1,"cx-ghost-header","ghost"],[1,"cx-ghost-body"],[1,"cx-ghost-attribute-value"],[1,"cx-ghost-value","ghost"],[1,"cx-ghost-attribute-label"],[1,"cx-ghost-label","ghost"],[1,"cx-ghost-attribute-price","ghost"]],template:function(e,r){if(1&e&&(t.YNc(0,_o,2,2,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Co,7,6,"ng-template",null,1,t.W1O),t.YNc(4,Do,5,5,"ng-template",null,2,t.W1O),t.YNc(6,Po,1,2,"ng-template",null,3,t.W1O)),2&e){const i=t.MAs(7);t.Q6J("ngIf",t.lcZ(1,2,r.configuration$))("ngIfElse",i)}},dependencies:[p.mk,p.sg,p.O5,p.tP,p.RF,p.n9,p.ED,ku,Qu,c.EJv,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),Ku=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorOverviewForm:{component:Ju}}})],imports:[p.ez,xn,Yu,c.LUR,c.GSh]}),n})(),$u=(()=>{class n{constructor(e,r,i){this.configuratorCommonsService=e,this.configRouterExtractorService=r,this.commonConfigUtilsService=i,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe((0,S.h)(a=>a.owner.type===y.$g.OwnerType.PRODUCT||a.owner.type===y.$g.OwnerType.CART_ENTRY),(0,v.w)(a=>this.configuratorCommonsService.getConfiguration(a.owner))),this.configurationOverview$=this.configuration$.pipe((0,h.U)(a=>a.overview)),this.numberOfIssues$=this.configuration$.pipe((0,h.U)(a=>{const u=a.overview;return u?.totalNumberOfIssues?void 0!==u.numberOfIncompleteCharacteristics?u.numberOfIncompleteCharacteristics:u.totalNumberOfIssues:a.totalNumberOfIssues?a.totalNumberOfIssues:0})),this.numberOfConflicts$=this.configuration$.pipe((0,h.U)(a=>a.overview?.numberOfConflicts??0)),this.skipConflictsOnIssueNavigation$=this.configuration$.pipe((0,h.U)(a=>(a.overview?.numberOfConflicts??0)>0)),this.iconTypes=C.e1G}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(U),t.Y36(y.u6),t.Y36(y.NU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-overview-notification-banner"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","cx-error-notification-banner",4,"ngIf"],["class","cx-conflict-notification-banner",4,"ngIf"],[1,"cx-error-notification-banner"],[3,"type"],["id","cx-configurator-overview-error-msg",1,"cx-error-msg"],["aria-describedby","cx-configurator-overview-error-msg","cxAutoFocus","",1,"link","cx-action-link",3,"routerLink","queryParams"],[1,"cx-conflict-notification-banner"],["id","cx-configurator-overview-conflict-msg",1,"cx-conflict-msg"],["aria-describedby","cx-configurator-overview-conflict-msg","cxAutoFocus","",1,"link","cx-action-link",3,"routerLink","queryParams"]],template:function(e,r){1&e&&(t.YNc(0,ko,3,3,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,r.routerData$))},dependencies:[p.O5,C.oJW,V.rH,p.Ov,c.X$D,c.l2T],encapsulation:2,changeDetection:0}),n})(),Hu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorOverviewBanner:{component:$u}}})],imports:[p.ez,c.LUR,c.bhT,C.QX1,V.Bz]}),n})(),Wu=(()=>{class n{constructor(e,r,i,a){this.configuratorGroupsService=e,this.configuratorCommonsService=r,this.configRouterExtractorService=i,this.configUtils=a,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,v.w)(u=>this.configuratorCommonsService.getConfiguration(u.owner)))}onPrevious(e){this.configuratorGroupsService.getPreviousGroupId(e.owner).pipe((0,m.q)(1)).subscribe(r=>{r&&(this.configuratorGroupsService.navigateToGroup(e,r),this.focusFirstAttribute())}),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")}onNext(e){this.configuratorGroupsService.getNextGroupId(e.owner).pipe((0,m.q)(1)).subscribe(r=>{r&&(this.configuratorGroupsService.navigateToGroup(e,r),this.focusFirstAttribute())}),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")}isFirstGroup(e){return this.configuratorGroupsService.getPreviousGroupId(e).pipe((0,h.U)(r=>!r))}isLastGroup(e){return this.configuratorGroupsService.getNextGroupId(e).pipe((0,h.U)(r=>!r))}focusFirstAttribute(){this.configRouterExtractorService.extractRouterData().pipe((0,v.w)(e=>this.configuratorCommonsService.isConfigurationLoading(e.owner).pipe((0,S.h)(r=>r),(0,m.q)(1),(0,v.w)(()=>this.configuratorCommonsService.isConfigurationLoading(e.owner).pipe((0,S.h)(r=>!r),(0,m.q)(1),(0,It.g)(0)))))).subscribe(()=>this.configUtils.focusFirstAttribute())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(K),t.Y36(U),t.Y36(y.u6),t.Y36(Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-previous-next-buttons"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-btn","btn","btn-action",3,"disabled","click"],[1,"cx-btn","btn","btn-secondary",3,"disabled","click"]],template:function(e,r){1&e&&(t.YNc(0,Yo,2,1,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,r.configuration$))},dependencies:[p.O5,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),zu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorPrevNext:{component:Wu}}})],imports:[p.ez,c.LUR,C.oPH]}),n})(),Xu=(()=>{class n{constructor(e,r){this.configuratorCommonsService=e,this.configRouterExtractorService=r,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,v.w)(i=>this.configuratorCommonsService.getConfiguration(i.owner)))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(U),t.Y36(y.u6))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-price-summary"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-price-summary-container"],[1,"cx-total-summary"],[1,"cx-summary-row","cx-base-price"],[1,"cx-label"],[1,"cx-amount"],[1,"cx-summary-row","cx-selected-options"],[1,"cx-summary-row","cx-total-price"]],template:function(e,r){1&e&&(t.YNc(0,Ko,2,1,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,r.configuration$))},dependencies:[p.O5,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),ju=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorPriceSummary:{component:Xu}}})],imports:[f.u5,f.UX,p.ez,c.LUR]}),n})(),tc=(()=>{class n{constructor(e,r,i,a){this.configuratorCommonsService=e,this.configRouterExtractorService=r,this.productService=i,this.configExpertModeService=a,this.ghostStyle=!0,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,v.w)(u=>this.configuratorCommonsService.getConfiguration(u.owner))),this.product$=this.configuration$.pipe((0,h.U)(u=>{switch(u.owner.type){case y.$g.OwnerType.PRODUCT:case y.$g.OwnerType.CART_ENTRY:return u.productCode;case y.$g.OwnerType.ORDER_ENTRY:return u.overview?.productCode}}),(0,v.w)(u=>u?this.productService.get(u,"list"):Ln.E)).pipe((0,R.b)(()=>{this.ghostStyle=!1})),this.showMore=!1,this.iconTypes=C.e1G}triggerDetails(){this.showMore=!this.showMore}get expMode(){return this.configExpertModeService?.getExpModeActive()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(U),t.Y36(y.u6),t.Y36(c.M52),t.Y36(it,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-product-title"]],hostVars:2,hostBindings:function(e,r){2&e&&t.ekj("ghost",r.ghostStyle)},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostProductTitle",""],[1,"cx-general-product-info"],[1,"cx-title"],[3,"click"],[4,"ngIf"],[1,"cx-details"],["aria-hidden","true",1,"cx-details-image"],["format","product",3,"container"],[1,"cx-details-content"],[1,"cx-detail-title"],[1,"cx-code"],[1,"cx-description"],[4,"cxFeatureLevel"],[1,"cx-toggle-details-link-text"],["aria-hidden","true"],[3,"type"],[1,"cx-kb-key-details"],[1,"cx-kb-pair"],[1,"cx-label"],[1,"cx-value"],[1,"cx-ghost-general-product-info"]],template:function(e,r){if(1&e&&(t.YNc(0,la,19,12,"ng-container",0),t.ALo(1,"async"),t.YNc(2,pa,1,0,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,r.product$))("ngIfElse",i)}},dependencies:[p.O5,C.oJW,C.R7z,c.EJv,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),ec=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorProductTitle:{component:tc}}})],imports:[f.u5,f.UX,j.A0,p.ez,c.LUR,C.QX1,C.cOq,c.GSh]}),n})(),nc=(()=>{class n{constructor(e,r){this.configRouterExtractorService=e,this.configuratorCommonsService=r,this.ghostStyle=!0,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe((0,v.w)(i=>this.configuratorCommonsService.getConfiguration(i.owner).pipe((0,R.b)(()=>{this.ghostStyle=!1})))),this.isOverviewPage$=this.routerData$.pipe((0,h.U)(i=>i.pageType===y.iB.PageType.OVERVIEW))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.u6),t.Y36(U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-tab-bar"]],hostVars:2,hostBindings:function(e,r){2&e&&t.ekj("ghost",r.ghostStyle)},decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngIf","ngIfElse"],["ghostTabBar",""],[1,"cx-tab-bar"],["tabindex","0",3,"routerLink"],[1,"cx-ghost-tab-bar"]],template:function(e,r){1&e&&(t.YNc(0,_a,5,4,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,r.routerData$))},dependencies:[p.O5,V.yS,p.Ov,c.X$D,c.l2T],encapsulation:2,changeDetection:0}),n})(),rc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorTabBar:{component:nc}}})],imports:[f.u5,f.UX,j.A0,p.ez,c.LUR,c.bhT,V.Bz]}),n})();const ic={productConfigurator:{updateConfigurationMessage:{waitingTime:1e3}}};let oc=(()=>{class n{constructor(e,r,i){this.configuratorCommonsService=e,this.configRouterExtractorService=r,this.config=i,this.hasPendingChanges$=this.configRouterExtractorService.extractRouterData().pipe((0,v.w)(a=>this.configuratorCommonsService.hasPendingChanges(a.owner)),(0,kn.x)())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(U),t.Y36(y.u6),t.Y36(Tn))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-update-message"]],decls:7,vars:7,consts:[["aria-live","polite","aria-atomic","false"],[1,"cx-update-msg"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.ALo(2,"async"),t._UZ(3,"cx-spinner"),t.TgZ(4,"strong"),t._uU(5),t.ALo(6,"cxTranslate"),t.qZA()()()),2&e&&(t.xp6(1),t.ekj("visible",t.lcZ(2,3,r.hasPendingChanges$)),t.xp6(4),t.Oqu(t.lcZ(6,5,"configurator.header.updateMessage")))},dependencies:[C.ORR,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),ac=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorUpdateMessage:{component:oc}}}),(0,c.i51)(ic),{provide:Tn,useExisting:c.DeH}],imports:[p.ez,C.Fme,c.LUR]}),n})(),uc=(()=>{class n{constructor(e,r){this.configuratorCommonsService=e,this.configRouterExtractorService=r,this.iconTypes=C.e1G,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,v.w)(i=>this.configuratorCommonsService.getConfiguration(i.owner))),this.showWarnings=!1,this.showErrors=!1}toggleWarnings(){this.showWarnings=!this.showWarnings}toggleErrors(){this.showErrors=!this.showErrors}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(U),t.Y36(y.u6))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configuration-conflict-and-error-messages"]],decls:2,vars:3,consts:[[4,"ngIf"],["aria-live","assertive","aria-atomic","true",1,"alert-message","alert-message-invalid-warning"],[1,"alert-icon"],["type","WARNING"],["class","cx-warning-text",4,"ngIf"],["class","cx-warning-toggle",3,"click",4,"ngIf"],[1,"cx-warning-messages"],["class","cx-warning-message",3,"open",4,"ngFor","ngForOf"],[1,"cx-warning-text"],[1,"cx-warning-toggle",3,"click"],["type","CARET_DOWN"],["type","CARET_UP"],[1,"cx-warning-message"],["aria-live","assertive","aria-atomic","true","role","alert",1,"alert-message","alert-message-error"],["type","ERROR"],["class","cx-error-text",4,"ngIf"],["class","cx-error-toggle",3,"click",4,"ngIf"],[1,"cx-error-messages"],["class","cx-error-message",3,"open",4,"ngFor","ngForOf"],[1,"cx-error-text"],[1,"cx-error-toggle",3,"click"],[1,"cx-error-message"]],template:function(e,r){1&e&&(t.YNc(0,Sa,3,2,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,r.configuration$))},dependencies:[p.sg,p.O5,C.oJW,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),cc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{CpqConfiguratorConflictAndErrorMessagesComponent:{component:uc}}})],imports:[p.ez,V.Bz,c.bhT,c.LUR,C.QX1]}),n})(),sc=(()=>{class n{constructor(e,r,i,a,u,d,g){this.productService=e,this.routingService=r,this.configRouterExtractorService=i,this.configuratorCommonsService=a,this.breakpointService=u,this.windowRef=d,this.location=g,this.container$=this.configRouterExtractorService.extractRouterData().pipe((0,v.w)(l=>this.configuratorCommonsService.getConfiguration(l.owner).pipe((0,h.U)(_=>({routerData:l,configuration:_}))).pipe((0,v.w)(_=>this.productService.get(_.configuration.productCode).pipe((0,h.U)(T=>({routerData:_.routerData,configuration:_.configuration,product:T})))))))}navigateToCart(){this.routingService.go("cart")}exitConfiguration(){this.container$.pipe((0,m.q)(1)).subscribe(e=>{e.routerData.owner.type===y.$g.OwnerType.CART_ENTRY?this.navigateToCart():this.routingService.go({cxRoute:"product",params:e.product})})}isDesktop(){return this.breakpointService.isUp(C.Bst.md)}isMobile(){return this.breakpointService.isDown(C.Bst.sm)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.M52),t.Y36(c.Znh),t.Y36(y.u6),t.Y36(U),t.Y36(C.r),t.Y36(c.X9E),t.Y36(p.Ye))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-exit-button"]],decls:2,vars:3,consts:[[4,"ngIf"],["tabindex","0",1,"cx-config-exit-button",3,"click"]],template:function(e,r){1&e&&(t.YNc(0,Ma,4,2,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,r.container$))},dependencies:[p.O5,p.Ov,c.X$D],encapsulation:2}),n})(),lc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorExitButton:{component:sc}}}),c.X9E],imports:[p.ez,c.LUR]}),n})(),pc=(()=>{class n{constructor(e,r,i,a){this.productService=e,this.translationService=r,this.configuratorRouterExtractorService=i,this.configuratorCommonsService=a,this.configuration$=this.configuratorRouterExtractorService.extractRouterData().pipe((0,v.w)(u=>this.configuratorCommonsService.getConfiguration(u.owner))),this.title$=this.translationService.translate("configurator.variantCarousel.title"),this.items$=this.configuration$.pipe((0,h.U)(u=>u.variants?u.variants:[]),(0,h.U)(u=>u.map(d=>this.productService.get(d.productCode))))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.M52),t.Y36(c.D7D),t.Y36(y.u6),t.Y36(U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cx-configurator-variant-carousel"]],decls:3,vars:5,consts:[[4,"ngIf"],[1,"cx-variant-carousel-container"],["role","region","itemWidth","285px",3,"items","title","template"],["carouselItem",""],[3,"item"]],template:function(e,r){if(1&e&&(t.YNc(0,La,8,13,"ng-container",0),t.ALo(1,"async"),t.ALo(2,"async")),2&e){let i;t.Q6J("ngIf",(null==(i=t.lcZ(1,1,r.items$))?null:i.length)>0&&t.lcZ(2,3,r.items$))}},dependencies:[p.O5,C.Fy4,C.mEt,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),n})(),dc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorVariantCarousel:{component:pc}}})],imports:[f.u5,f.UX,p.ez,c.LUR,C.bBg,C.pvk]}),n})(),gc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[ju,Va,Bu,ec,rc,Pu,Vu,ac,zu,xn,Ku,Hu,cc,lc,dc]}),n})(),fc=(()=>{class n{constructor(){}convert(e,r){return{...r,userId:e.userId,cartId:e.cartId,product:{code:e.productCode},quantity:e.quantity,configId:e.configId}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var I;!function(n){let o;var u;let e,r,i,a;(u=o=n.GroupType||(n.GroupType={})).CSTIC_GROUP="CSTIC_GROUP",u.INSTANCE="INSTANCE",u.CONFLICT_HEADER="CONFLICT_HEADER",u.CONFLICT="CONFLICT",function(u){u.STRING="STRING",u.NUMERIC="NUMERIC",u.CHECK_BOX="CHECK_BOX",u.CHECK_BOX_LIST="CHECK_BOX_LIST",u.RADIO_BUTTON="RADIO_BUTTON",u.RADIO_BUTTON_ADDITIONAL_INPUT="RADIO_BUTTON_ADDITIONAL_INPUT",u.DROPDOWN="DROPDOWN",u.DROPDOWN_ADDITIONAL_INPUT="DROPDOWN_ADDITIONAL_INPUT",u.READ_ONLY="READ_ONLY",u.NOT_IMPLEMENTED="NOT_IMPLEMENTED",u.SINGLE_SELECTION_IMAGE="SINGLE_SELECTION_IMAGE",u.MULTI_SELECTION_IMAGE="MULTI_SELECTION_IMAGE"}(e=n.UiType||(n.UiType={})),function(u){u.BUY="BUY"}(r=n.PriceType||(n.PriceType={})),function(u){u.VALUE_IMAGE="VALUE_IMAGE",u.CSTIC_IMAGE="CSTIC_IMAGE"}(i=n.ImageFormatType||(n.ImageFormatType={})),function(u){u.PRIMARY="PRIMARY",u.GALLERY="GALLERY"}(a=n.ImageType||(n.ImageType={}))}(I||(I={}));let _c=(()=>{class n{constructor(e,r,i){this.config=e,this.translation=r,this.uiSettingsConfig=i}convert(e,r){const i={...r,owner:r?.owner??y.mR.createInitialOwner(),interactionState:r?.interactionState??{},configId:e.configId,complete:e.complete,consistent:e.consistent,totalNumberOfIssues:e.totalNumberOfIssues,productCode:e.rootProduct,groups:[],flatGroups:[],kbKey:e.kbKey??void 0,pricingEnabled:e.pricingEnabled??!0},a=[];return e.groups?.forEach(u=>this.convertGroup(u,i.groups,a)),i.flatGroups=a,i}convertGroup(e,r,i){const a=[];e.attributes&&e.attributes.forEach(d=>this.convertAttribute(d,a));const u={description:e.description,configurable:e.configurable,complete:e.complete,consistent:e.consistent,groupType:this.convertGroupType(e.groupType),name:e.name,id:e.id,attributes:a,subGroups:[]};this.setGroupDescription(u),e.subGroups&&e.subGroups.forEach(d=>this.convertGroup(d,u.subGroups,i)),(u.groupType===s.GroupType.ATTRIBUTE_GROUP||u.groupType===s.GroupType.CONFLICT_GROUP)&&i.push(u),r.push(u)}getGroupId(e,r){return e.replace("@"+r,"")}convertAttribute(e,r){const i=e.conflicts?e.conflicts.length:0,a=[],u=[];e.images&&e.images.forEach(l=>this.convertImage(l,a)),this.addRetractValue(e,u),e.domainValues&&e.domainValues.forEach(l=>this.convertValue(l,u));const d=this.convertAttributeType(e),g={name:e.name,label:e.langDepName,required:e.required,uiType:d,groupId:this.getGroupId(e.key,e.name),userInput:d===s.UiType.NUMERIC||d===s.UiType.STRING?e.formattedValue?e.formattedValue:"":void 0,maxlength:(e.maxlength??0)+(e.negativeAllowed?1:0),numDecimalPlaces:e.numberScale,negativeAllowed:e.negativeAllowed,numTotalLength:e.typeLength,selectedSingleValue:void 0,hasConflicts:i>0,images:a,values:u,intervalInDomain:e.intervalInDomain,key:e.key,validationType:e.validationType,visible:e.visible};this.setSelectedSingleValue(g),this.compileAttributeIncomplete(g),r.push(g)}setSelectedSingleValue(e){if(e.values){const r=e.values.map(i=>i).filter(i=>i.selected);r&&1===r.length&&(e.selectedSingleValue=r[0].valueCode)}}isRetractValueSelected(e){return!(e.domainValues&&e.domainValues.filter(r=>r.selected).length)}setRetractValueDisplay(e,r){(e===s.UiType.DROPDOWN||e===s.UiType.RADIOBUTTON)&&(e===s.UiType.DROPDOWN&&r.selected?this.translation.translate("configurator.attribute.dropDownSelectMsg").pipe((0,m.q)(1)).subscribe(i=>r.valueDisplay=i):this.translation.translate("configurator.attribute.noOptionSelectedMsg").pipe((0,m.q)(1)).subscribe(i=>r.valueDisplay=i))}hasSourceAttributeConflicts(e){return!!e.conflicts&&e.conflicts.length>0}isSourceAttributeTypeReadOnly(e){return e.type===I.UiType.READ_ONLY}isRetractBlocked(e){return!!e.retractBlocked&&e.retractBlocked}addRetractValue(e,r){const i=this.isRetractBlocked(e),a=this.hasSourceAttributeConflicts(e);if(!i&&(this.uiSettingsConfig?.productConfigurator?.addRetractOption||this.isSourceAttributeTypeReadOnly(e)&&a)){const u=this.convertAttributeType(e);if(u===s.UiType.RADIOBUTTON||u===s.UiType.DROPDOWN){const d={valueCode:n.RETRACT_VALUE_CODE,selected:this.isRetractValueSelected(e)};this.setRetractValueDisplay(u,d),r.push(d)}}}convertValue(e,r){const i=[];e.images&&e.images.forEach(u=>this.convertImage(u,i)),r.push({valueCode:e.key,valueDisplay:e.langDepName,name:e.name,selected:e.selected,images:i})}convertImage(e,r){const i={url:(this.config?.backend?.media?.baseUrl||this.config?.backend?.occ?.baseUrl||"")+e.url,altText:e.altText,galleryIndex:e.galleryIndex,type:this.convertImageType(e.imageType),format:this.convertImageFormatType(e.format)};r.push(i)}convertAttributeType(e){let r;switch(e.type){case I.UiType.RADIO_BUTTON:r=s.UiType.RADIOBUTTON;break;case I.UiType.RADIO_BUTTON_ADDITIONAL_INPUT:r=s.UiType.RADIOBUTTON_ADDITIONAL_INPUT;break;case I.UiType.DROPDOWN:r=s.UiType.DROPDOWN;break;case I.UiType.DROPDOWN_ADDITIONAL_INPUT:r=s.UiType.DROPDOWN_ADDITIONAL_INPUT;break;case I.UiType.STRING:r=s.UiType.STRING;break;case I.UiType.NUMERIC:r=s.UiType.NUMERIC;break;case I.UiType.READ_ONLY:r=!e.retractBlocked&&this.hasSourceAttributeConflicts(e)?s.UiType.RADIOBUTTON:s.UiType.READ_ONLY;break;case I.UiType.CHECK_BOX_LIST:r=s.UiType.CHECKBOXLIST;break;case I.UiType.CHECK_BOX:r=s.UiType.CHECKBOX;break;case I.UiType.MULTI_SELECTION_IMAGE:r=s.UiType.MULTI_SELECTION_IMAGE;break;case I.UiType.SINGLE_SELECTION_IMAGE:r=s.UiType.SINGLE_SELECTION_IMAGE;break;default:r=s.UiType.NOT_IMPLEMENTED}return r}convertGroupType(e){switch(e){case I.GroupType.CSTIC_GROUP:return s.GroupType.ATTRIBUTE_GROUP;case I.GroupType.INSTANCE:return s.GroupType.SUB_ITEM_GROUP;case I.GroupType.CONFLICT_HEADER:return s.GroupType.CONFLICT_HEADER_GROUP;case I.GroupType.CONFLICT:return s.GroupType.CONFLICT_GROUP}}setGroupDescription(e){switch(e.groupType){case s.GroupType.CONFLICT_HEADER_GROUP:this.translation.translate("configurator.group.conflictHeader").pipe((0,m.q)(1)).subscribe(i=>e.description=i);break;case s.GroupType.CONFLICT_GROUP:const r=e.description;this.translation.translate("configurator.group.conflictGroup",{attribute:e.name}).pipe((0,m.q)(1)).subscribe(i=>e.description=i),e.name=r;break;default:if("_GEN"!==e.name)return;this.translation.translate("configurator.group.general").pipe((0,m.q)(1)).subscribe(i=>e.description=i)}}convertImageType(e){switch(e){case I.ImageType.GALLERY:return s.ImageType.GALLERY;case I.ImageType.PRIMARY:return s.ImageType.PRIMARY}}convertImageFormatType(e){switch(e){case I.ImageFormatType.VALUE_IMAGE:return s.ImageFormatType.VALUE_IMAGE;case I.ImageFormatType.CSTIC_IMAGE:return s.ImageFormatType.ATTRIBUTE_IMAGE}}compileAttributeIncomplete(e){switch(e.incomplete=!1,e.uiType){case s.UiType.RADIOBUTTON:case s.UiType.RADIOBUTTON_ADDITIONAL_INPUT:case s.UiType.DROPDOWN_ADDITIONAL_INPUT:case s.UiType.DROPDOWN:(!e.selectedSingleValue||e.selectedSingleValue===n.RETRACT_VALUE_CODE)&&(e.incomplete=!0);break;case s.UiType.SINGLE_SELECTION_IMAGE:e.selectedSingleValue||(e.incomplete=!0);break;case s.UiType.NUMERIC:case s.UiType.STRING:e.userInput||(e.incomplete=!0);break;case s.UiType.CHECKBOXLIST:case s.UiType.CHECKBOX:case s.UiType.MULTI_SELECTION_IMAGE:{const r=void 0!==e.values?.find(i=>i.selected);e.incomplete=!r;break}}}}return n.RETRACT_VALUE_CODE="###RETRACT_VALUE_CODE###",n.\u0275fac=function(e){return new(e||n)(t.LFG(c.Vri),t.LFG(c.D7D),t.LFG(ut))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const st=new t.OlP("VariantConfiguratorNormalizer"),In=new t.OlP("VariantConfiguratorSerializer"),An=new t.OlP("VariantConfiguratorPriceSummaryNormalizer"),On=new t.OlP("VariantConfiguratorPriceNormalizer"),wn=new t.OlP("VariantConfiguratorAddToCartSerializer"),Sn=new t.OlP("VariantConfiguratorUpdateCartEntrySerializer"),_e=new t.OlP("VariantConfiguratorOverviewNormalizer");let Cc=(()=>{class n{constructor(e,r){this.translation=e,this.converterService=r}convert(e,r){const i={priceSummary:e.pricing,configId:e.id},a={...r,configId:e.id,groups:e.groups?.flatMap(u=>this.convertGroup(u)),priceSummary:this.converterService.convert(i,An),productCode:e.productCode};return this.setIssueCounters(a,e),a}convertGroup(e){const r=[],i=e.characteristicValues,a=e.subGroups,u={id:e.id,groupDescription:e.groupDescription,attributes:i?i.map(d=>({attribute:d.characteristic,attributeId:d.characteristicId,value:d.value,valueId:d.valueId,valuePrice:d.price})):[]};if(this.setGeneralDescription(u),a){const d=[];a.forEach(g=>this.convertGroup(g).forEach(l=>d.push(l))),u.subGroups=d}return r.push(u),r}setGeneralDescription(e){"_GEN"===e.id&&this.translation.translate("configurator.group.general").pipe((0,m.q)(1)).subscribe(r=>e.groupDescription=r)}setIssueCounters(e,r){e.totalNumberOfIssues=r.totalNumberOfIssues,e.numberOfConflicts=r.numberOfConflicts,e.numberOfIncompleteCharacteristics=r.numberOfIncompleteCharacteristics}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.D7D),t.LFG(c.IXI))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mc=(()=>{class n{convert(e,r){return{...r,...e.priceSummary}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hc=(()=>{class n{convert(e,r){const i=[];return e.groups.forEach(u=>this.convertGroup(u,i)),{...r,configId:e.configId,rootProduct:e.productCode,complete:e.complete,groups:i}}convertGroup(e,r){const i=[],a=[];e.attributes&&e.attributes.forEach(d=>this.convertAttribute(d,a)),e.subGroups&&e.subGroups.forEach(d=>this.convertGroup(d,i));const u={name:e.name,id:e.id,configurable:e.configurable,groupType:this.convertGroupType(e.groupType??s.GroupType.ATTRIBUTE_GROUP),description:e.description,attributes:a,subGroups:i};r.push(u)}isRetractValue(e){return e.selectedSingleValue===n.RETRACT_VALUE_CODE}getRetractedValue(e){return e.values?.find(r=>r.selected)?.valueCode}retractValue(e,r){this.isRetractValue(e)?(r.value=this.getRetractedValue(e),r.retractTriggered=!0):r.value=e.selectedSingleValue}convertAttribute(e,r){const i={key:e.name,name:e.name,langDepName:e.label,required:e.required,retractTriggered:e.retractTriggered,type:this.convertCharacteristicType(e.uiType??s.UiType.NOT_IMPLEMENTED)};if(e.uiType===s.UiType.DROPDOWN||e.uiType===s.UiType.DROPDOWN_ADDITIONAL_INPUT||e.uiType===s.UiType.RADIOBUTTON||e.uiType===s.UiType.RADIOBUTTON_ADDITIONAL_INPUT||e.uiType===s.UiType.SINGLE_SELECTION_IMAGE)this.retractValue(e,i);else if(e.uiType===s.UiType.STRING)i.value=e.userInput;else if(e.uiType===s.UiType.NUMERIC)i.formattedValue=e.userInput;else if(e.uiType===s.UiType.CHECKBOXLIST||e.uiType===s.UiType.CHECKBOX||e.uiType===s.UiType.MULTI_SELECTION_IMAGE){const a=[];e.values&&e.values.forEach(u=>{this.convertValue(u,a)}),i.domainValues=a}r.push(i)}convertValue(e,r){r.push({key:e.valueCode,langDepName:e.valueDisplay,name:e.name,selected:e.selected})}convertCharacteristicType(e){let r;switch(e){case s.UiType.RADIOBUTTON:r=I.UiType.RADIO_BUTTON;break;case s.UiType.RADIOBUTTON_ADDITIONAL_INPUT:r=I.UiType.RADIO_BUTTON_ADDITIONAL_INPUT;break;case s.UiType.DROPDOWN:r=I.UiType.DROPDOWN;break;case s.UiType.DROPDOWN_ADDITIONAL_INPUT:r=I.UiType.DROPDOWN_ADDITIONAL_INPUT;break;case s.UiType.STRING:r=I.UiType.STRING;break;case s.UiType.NUMERIC:r=I.UiType.NUMERIC;break;case s.UiType.CHECKBOX:r=I.UiType.CHECK_BOX;break;case s.UiType.CHECKBOXLIST:r=I.UiType.CHECK_BOX_LIST;break;case s.UiType.MULTI_SELECTION_IMAGE:r=I.UiType.MULTI_SELECTION_IMAGE;break;case s.UiType.SINGLE_SELECTION_IMAGE:r=I.UiType.SINGLE_SELECTION_IMAGE;break;default:r=I.UiType.NOT_IMPLEMENTED}return r}convertGroupType(e){switch(e){case s.GroupType.ATTRIBUTE_GROUP:return I.GroupType.CSTIC_GROUP;case s.GroupType.SUB_ITEM_GROUP:return I.GroupType.INSTANCE;case s.GroupType.CONFLICT_GROUP:return I.GroupType.CONFLICT;case s.GroupType.CONFLICT_HEADER_GROUP:return I.GroupType.CONFLICT_HEADER}}}return n.RETRACT_VALUE_CODE="###RETRACT_VALUE_CODE###",n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vc=(()=>{class n{convert(e,r){return{...r,userId:e.userId,cartId:e.cartId,product:{code:e.configuration.productCode},entryNumber:e.cartEntryNumber,configId:e.configuration.configId,configurationInfos:[{configuratorType:"CPQCONFIGURATOR"}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yc=(()=>{class n{constructor(e,r,i,a){this.http=e,this.occEndpointsService=r,this.converterService=i,this.configExpertModeService=a}getConfiguratorType(){return"CPQCONFIGURATOR"}getExpModeRequested(){let e=!1;return this.configExpertModeService?.getExpModeRequested().pipe((0,m.q)(1)).subscribe(r=>e=r),e}setExpModeActive(e){this.configExpertModeService?.setExpModeActive(e)}createConfiguration(e){const r=e.id,i=this.getExpModeRequested();return this.http.get(this.occEndpointsService.buildUrl("createVariantConfiguration",{urlParams:{productCode:r},queryParams:{expMode:i}}),{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(st),(0,R.b)(a=>{this.setExpModeActive(void 0!==a.kbKey)}),(0,h.U)(a=>({...a,owner:e})))}readConfiguration(e,r,i){const a=this.getExpModeRequested();return this.http.get(this.occEndpointsService.buildUrl("readVariantConfiguration",{urlParams:{configId:e},queryParams:{groupId:r,expMode:a}}),{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(st),(0,R.b)(u=>{this.setExpModeActive(void 0!==u.kbKey)}),(0,h.U)(u=>({...u,owner:i})))}updateConfiguration(e){const r=e.configId,i=this.getExpModeRequested(),a=this.occEndpointsService.buildUrl("updateVariantConfiguration",{urlParams:{configId:r},queryParams:{expMode:i}}),u=this.converterService.convert(e,In);return this.http.patch(a,u,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(st),(0,R.b)(d=>{this.setExpModeActive(void 0!==d.kbKey)}),(0,h.U)(d=>({...d,owner:e.owner})))}addToCart(e){const r=this.occEndpointsService.buildUrl("addVariantConfigurationToCart",{urlParams:{userId:e.userId,cartId:e.cartId}}),i=this.converterService.convert(e,wn),a=new Z.WM({"Content-Type":"application/json"});return this.http.post(r,i,{headers:a}).pipe(this.converterService.pipeable(X.Ke))}readConfigurationForCartEntry(e){const r=this.occEndpointsService.buildUrl("readVariantConfigurationForCartEntry",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber}});return this.http.get(r).pipe(this.converterService.pipeable(st),(0,h.U)(i=>({...i,owner:e.owner})))}updateConfigurationForCartEntry(e){const r=this.occEndpointsService.buildUrl("updateVariantConfigurationForCartEntry",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber}}),i=new Z.WM({"Content-Type":"application/json"}),a=this.converterService.convert(e,Sn);return this.http.put(r,a,{headers:i}).pipe(this.converterService.pipeable(X.Ke))}readConfigurationForOrderEntry(e){const r=this.occEndpointsService.buildUrl("readVariantConfigurationOverviewForOrderEntry",{urlParams:{userId:e.userId,orderId:e.orderId,orderEntryNumber:e.orderEntryNumber}});return this.http.get(r).pipe(this.converterService.pipeable(_e),(0,h.U)(i=>({configId:i.configId,productCode:i.productCode,groups:[],flatGroups:[],interactionState:{},overview:i,owner:y.mR.createInitialOwner()})),(0,h.U)(i=>({...i,owner:e.owner})))}readPriceSummary(e){const r=this.occEndpointsService.buildUrl("readVariantConfigurationPriceSummary",{urlParams:{configId:e.configId},queryParams:{groupId:e.interactionState.currentGroup}});return this.http.get(r,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(On),(0,h.U)(i=>({...e,priceSummary:i.priceSummary,priceSupplements:i.priceSupplements})))}getConfigurationOverview(e){const r=this.occEndpointsService.buildUrl("getVariantConfigurationOverview",{urlParams:{configId:e}});return this.http.get(r,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(_e))}searchVariants(e){const r=this.occEndpointsService.buildUrl("searchConfiguratorVariants",{urlParams:{configId:e}});return this.http.get(r,{context:this.indicateSendUserForAsm()})}indicateSendUserForAsm(){return(new Z.qT).set(c.oT0,{sendUserIdAsHeader:!0})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Z.eN),t.LFG(c.Lz0),t.LFG(c.IXI),t.LFG(it,8))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),bc=(()=>{class n{convert(e,r){const i=[];return e.attributes?.forEach(u=>{this.convertAttributeSupplements(u,i)}),{...r,configId:e.configId,productCode:"",groups:[],flatGroups:[],owner:y.mR.createInitialOwner(),interactionState:{},priceSummary:e?.priceSummary,priceSupplements:i}}convertAttributeSupplements(e,r){const i={attributeUiKey:e?.csticUiKey,valueSupplements:[]};e?.priceSupplements?.forEach(a=>{this.convertValueSupplement(a,i?.valueSupplements)}),r.push(i)}convertValueSupplement(e,r){r.push({attributeValueKey:e?.attributeValueKey,priceValue:e?.priceValue,obsoletePriceValue:e?.obsoletePriceValue})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Tc(){return{backend:{occ:{endpoints:{createVariantConfiguration:"products/${productCode}/configurators/ccpconfigurator",readVariantConfiguration:"ccpconfigurator/${configId}",updateVariantConfiguration:"ccpconfigurator/${configId}",addVariantConfigurationToCart:"users/${userId}/carts/${cartId}/entries/ccpconfigurator",readVariantConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/ccpconfigurator",updateVariantConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/ccpconfigurator",readVariantConfigurationOverviewForOrderEntry:"users/${userId}/orders/${orderId}/entries/${orderEntryNumber}/ccpconfigurator/configurationOverview",readVariantConfigurationPriceSummary:"ccpconfigurator/${configId}/pricing",getVariantConfigurationOverview:"ccpconfigurator/${configId}/configurationOverview",searchConfiguratorVariants:"ccpconfigurator/${configId}/variants"}}}}}let xc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:N.CONFIGURATOR_ADAPTER_LIST,useClass:yc,multi:!0},{provide:st,useExisting:_c,multi:!0},{provide:In,useExisting:hc,multi:!0},{provide:An,useExisting:mc,multi:!0},{provide:On,useExisting:bc,multi:!0},{provide:wn,useExisting:fc,multi:!0},{provide:Sn,useExisting:vc,multi:!0},{provide:_e,useExisting:Cc,multi:!0}],imports:[p.ez,c.pEA.withConfigFactory(Tc)]}),n})(),Ic=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[xc,ou,gc]}),n})();var Ac=b(3935),Oc=b(567);const En=new t.OlP("CpqConfiguratorAddToCartSerializer"),Un=new t.OlP("CpqConfiguratorUpdateCartEntrySerializer");let wc=(()=>{class n{convert(e,r){return{...r,userId:e.userId,cartId:e.cartId,product:{code:e.productCode},quantity:e.quantity,configId:e.configId}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Sc=(()=>{class n{convert(e,r){return{...r,userId:e.userId,cartId:e.cartId,entryNumber:e.cartEntryNumber,configId:e.configuration.configId}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ec(){return{backend:{occ:{endpoints:{getCpqAccessData:"users/${userId}/access/cpqconfigurator",addCpqConfigurationToCart:"users/${userId}/carts/${cartId}/entries/cpqconfigurator",readCpqConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/cpqconfigurator",readCpqConfigurationForOrderEntry:"users/${userId}/orders/${orderId}/entries/${orderEntryNumber}/cpqconfigurator",updateCpqConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/cpqconfigurator"}}}}}let Uc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[(0,c.x2j)(Ec),{provide:En,useExisting:wc,multi:!0},{provide:Un,useExisting:Sc,multi:!0}],imports:[p.ez]}),n})(),Nc=(()=>{class n{constructor(e,r,i){this.http=e,this.occEndpointsService=r,this.converterService=i}addToCart(e){const r=this.occEndpointsService.buildUrl("addCpqConfigurationToCart",{urlParams:{userId:e.userId,cartId:e.cartId}}),i=this.converterService.convert(e,En);return this.http.post(r,i).pipe(this.converterService.pipeable(X.Ke))}updateCartEntry(e){const r=this.occEndpointsService.buildUrl("updateCpqConfigurationForCartEntry",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber}}),i=this.converterService.convert(e,Un);return this.http.put(r,i).pipe(this.converterService.pipeable(X.Ke))}getConfigIdForCartEntry(e){const r=this.occEndpointsService.buildUrl("readCpqConfigurationForCartEntry",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber}});return this.http.get(r).pipe((0,h.U)(i=>i.configId))}getConfigIdForOrderEntry(e){const r=this.occEndpointsService.buildUrl("readCpqConfigurationForOrderEntry",{urlParams:{userId:e.userId,orderId:e.orderId,orderEntryNumber:e.orderEntryNumber}});return this.http.get(r).pipe((0,h.U)(i=>i.configId))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Z.eN),t.LFG(c.Lz0),t.LFG(c.IXI))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var E;!function(n){let o;var r;let e;(r=o=n.DisplayAs||(n.DisplayAs={}))[r.RADIO_BUTTON=1]="RADIO_BUTTON",r[r.CHECK_BOX=2]="CHECK_BOX",r[r.DROPDOWN=3]="DROPDOWN",r[r.LIST_BOX=4]="LIST_BOX",r[r.LIST_BOX_MULTI=5]="LIST_BOX_MULTI",r[r.READ_ONLY=71]="READ_ONLY",r[r.INPUT=95]="INPUT",r[r.AUTO_COMPLETE_CUSTOM=102]="AUTO_COMPLETE_CUSTOM",function(r){r.INPUT_STRING="String",r.INPUT_NUMBER="Number",r.QTY_ATTRIBUTE_LEVEL="Quantity",r.QTY_VALUE_LEVEL="Attr.Quantity",r.N_A="N/A"}(e=n.DataType||(n.DataType={}))}(E||(E={}));let Nn=(()=>{class n{constructor(e){this.languageService=e}convertQuantity(e,r){if(!e.selected)return;let a;switch(this.convertDataType(r)){case s.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL:a=Number(r.quantity);break;case s.DataType.USER_SELECTION_QTY_VALUE_LEVEL:a=Number(e.quantity);break;default:a=void 0}return a}convertValuePrice(e,r){let i;return e.price&&(i={currencyIso:r,value:parseFloat(e.price)},this.formatPriceForLocale(i,this.getLanguage())),i}calculateValuePriceTotal(e,r){let i;return r&&(i={currencyIso:r.currencyIso,value:(e||1)*r.value},this.formatPriceForLocale(i,this.getLanguage())),i}calculateAttributePriceTotal(e,r){const i=e.values?.filter(u=>u.selected&&u.valuePriceTotal).reduce((u,d)=>u+(d.valuePriceTotal?.value??0),0),a={currencyIso:r,value:i??0};return this.formatPriceForLocale(a,this.getLanguage()),a}formatPriceForLocale(e,r){const i=(0,p.jK)(e.currencyIso,"narrow",r);e.formattedValue=(0,p.xG)(e.value,r,i,e.currencyIso)}convertDataType(e){let r;switch(e.dataType){case E.DataType.INPUT_STRING:r=s.DataType.INPUT_STRING;break;case E.DataType.INPUT_NUMBER:r=s.DataType.INPUT_NUMBER;break;case E.DataType.N_A:r=s.DataType.USER_SELECTION_NO_QTY;break;case E.DataType.QTY_ATTRIBUTE_LEVEL:r=s.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL;break;case E.DataType.QTY_VALUE_LEVEL:r=e.displayAs===E.DisplayAs.RADIO_BUTTON||e.displayAs===E.DisplayAs.DROPDOWN||e.displayAs===E.DisplayAs.CHECK_BOX&&!e.isLineItem?s.DataType.USER_SELECTION_NO_QTY:s.DataType.USER_SELECTION_QTY_VALUE_LEVEL;break;default:r=s.DataType.NOT_IMPLEMENTED}return r}convertPriceSummary(e){const r={};if(e.currencyISOCode){const i=e.currencyISOCode;if(e?.responder?.totalPrice&&e?.currencySign){const a=e?.currencySign,u=e.responder.totalPrice.replace(a,""),d={currencyIso:i,value:parseFloat(u)};this.formatPriceForLocale(d,this.getLanguage()),r.currentTotal=d}if(e?.responder?.baseProductPrice){const u={currencyIso:i,value:parseFloat(e.responder.baseProductPrice)};this.formatPriceForLocale(u,this.getLanguage()),r.basePrice=u}if(r.currentTotal&&r.basePrice){const a={currencyIso:i,value:r.currentTotal.value-r.basePrice.value};this.formatPriceForLocale(a,this.getLanguage()),r.selectedOptions=a}}return r}hasAnyProducts(e){return e.some(r=>r?.productSystemId)}convertAttributeLabel(e){return e.label?e.label:e.name?e.name:""}getLanguage(){const e=this.getActiveLanguage();try{return(0,p.wM)(e),e}catch{return this.reportMissingLocaleData(e),"en"}}getActiveLanguage(){let e;return this.languageService.getActive().subscribe(r=>e=r).unsubscribe(),e??"en"}reportMissingLocaleData(e){(0,t.X6Q)()&&console.warn(`CpqConfiguratorNormalizerUtilsService: No locale data registered for '${e}' (see https://angular.io/api/common/registerLocaleData).`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.TSl))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rc=(()=>{class n{constructor(e,r){this.cpqConfiguratorNormalizerUtilsService=e,this.translation=r}convert(e,r){const i={...r,configId:"",complete:!e.incompleteAttributes?.length,consistent:!(e.invalidMessages?.length||e.failedValidations?.length||e.incompleteMessages?.length||e.errorMessages?.length),totalNumberOfIssues:this.generateTotalNumberOfIssues(e),productCode:e.productSystemId,priceSummary:this.cpqConfiguratorNormalizerUtilsService.convertPriceSummary(e),groups:[],flatGroups:[],owner:y.mR.createInitialOwner(),interactionState:{},errorMessages:this.generateErrorMessages(e),warningMessages:this.generateWarningMessages(e),pricingEnabled:!0};return e.tabs?.forEach(a=>this.convertGroup(a,e.attributes??[],e.currencyISOCode,i.groups,i.flatGroups)),(!i.groups||0===i.groups.length)&&this.convertGenericGroup(e.attributes??[],e.incompleteAttributes??[],e.currencyISOCode,i.groups,i.flatGroups),i}generateTotalNumberOfIssues(e){return(e.incompleteAttributes?.length??0)+(e.incompleteMessages?.length??0)+(e.invalidMessages?.length??0)+(e.failedValidations?.length??0)+(e.errorMessages?.length??0)}generateWarningMessages(e){let r=[];return r=r.concat(e.failedValidations??[]),r=r.concat(e.incompleteMessages??[]),r}generateErrorMessages(e){let r=[];return r=r.concat(e.errorMessages??[]),r=r.concat(e.invalidMessages??[]),r}convertGroup(e,r,i,a,u){const d=[];e.isSelected&&r.forEach(l=>this.convertAttribute(l,e.id,i,d));const g={id:e.id.toString(),name:e.name,description:e.displayName,configurable:!0,complete:!e.isIncomplete,consistent:!0,groupType:s.GroupType.ATTRIBUTE_GROUP,attributes:d,subGroups:[]};u.push(g),a.push(g)}convertGenericGroup(e,r,i,a,u){const d=[];e.forEach(l=>this.convertAttribute(l,0,i,d));const g={id:"0",name:"_GEN",configurable:!0,complete:0===r.length,consistent:!0,groupType:s.GroupType.ATTRIBUTE_GROUP,attributes:d,subGroups:[]};this.translation.translate("configurator.group.general").pipe((0,m.q)(1)).subscribe(l=>g.description=l),a.push(g),u.push(g)}convertAttribute(e,r,i,a){const u={attrCode:e.stdAttrCode,name:e.pA_ID.toString(),description:e.description,label:this.cpqConfiguratorNormalizerUtilsService.convertAttributeLabel(e),required:e.required,isLineItem:e.isLineItem,uiType:this.convertAttributeType(e),dataType:this.cpqConfiguratorNormalizerUtilsService.convertDataType(e),quantity:Number(e.quantity),groupId:r.toString(),userInput:e.userInput,hasConflicts:e.hasConflict,selectedSingleValue:void 0,images:[],visible:!0};if(e.values&&e.displayAs!==E.DisplayAs.INPUT){const d=[];e.values.forEach(g=>this.convertValue(g,e,i,d)),u.values=d,this.setSelectedSingleValue(u)}u.attributePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateAttributePriceTotal(u,i),this.compileAttributeIncomplete(u),a.push(u)}setSelectedSingleValue(e){const r=e.values;if(r){const i=r.map(a=>a).filter(a=>a.selected);i&&1===i.length&&(e.selectedSingleValue=i[0].valueCode)}}convertValueDisplay(e,r,i){r.displayAs===E.DisplayAs.DROPDOWN&&e.selected&&0===e.paV_ID&&this.translation.translate("configurator.attribute.dropDownSelectMsg").pipe((0,m.q)(1)).subscribe(a=>i.valueDisplay=a)}convertValue(e,r,i,a){if(this.hasValueToBeIgnored(r,e))return;const u={valueCode:e.paV_ID.toString(),name:e.valueCode,valueDisplay:e.valueDisplay,description:e.description,productSystemId:e.productSystemId,selected:e.selected,quantity:this.cpqConfiguratorNormalizerUtilsService.convertQuantity(e,r),valuePrice:this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(e,i),images:[]};this.convertValueDisplay(e,r,u),u.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(u.quantity??1,u.valuePrice),a.push(u)}convertAttributeType(e){const r=e.displayAs,i=!(!e.values||!this.cpqConfiguratorNormalizerUtilsService.hasAnyProducts(e.values));return e.isEnabled||r!==E.DisplayAs.RADIO_BUTTON&&r!==E.DisplayAs.DROPDOWN&&r!==E.DisplayAs.CHECK_BOX&&r!==E.DisplayAs.INPUT?this.findUiTypeFromDisplayType(r,i,e):s.UiType.READ_ONLY}findUiTypeFromDisplayType(e,r,i){let a;switch(e){case E.DisplayAs.RADIO_BUTTON:a=r?s.UiType.RADIOBUTTON_PRODUCT:a=s.UiType.RADIOBUTTON;break;case E.DisplayAs.DROPDOWN:a=r?s.UiType.DROPDOWN_PRODUCT:a=s.UiType.DROPDOWN;break;case E.DisplayAs.CHECK_BOX:a=r?s.UiType.CHECKBOXLIST_PRODUCT:a=s.UiType.CHECKBOXLIST;break;case E.DisplayAs.INPUT:a=i.dataType===E.DataType.INPUT_STRING?s.UiType.STRING:s.UiType.NOT_IMPLEMENTED;break;default:a=s.UiType.NOT_IMPLEMENTED}return a}compileAttributeIncomplete(e){switch(e.incomplete=!1,e.uiType){case s.UiType.RADIOBUTTON:case s.UiType.RADIOBUTTON_PRODUCT:case s.UiType.DROPDOWN:case s.UiType.DROPDOWN_PRODUCT:case s.UiType.SINGLE_SELECTION_IMAGE:(!e.selectedSingleValue||"0"===e.selectedSingleValue)&&(e.incomplete=!0);break;case s.UiType.NUMERIC:case s.UiType.STRING:e.userInput||(e.incomplete=!0);break;case s.UiType.CHECKBOXLIST:case s.UiType.CHECKBOXLIST_PRODUCT:case s.UiType.CHECKBOX:case s.UiType.MULTI_SELECTION_IMAGE:void 0!==e.values?.find(i=>i.selected)||(e.incomplete=!0)}}hasValueToBeIgnored(e,r){const i=e.values?.map(a=>a).filter(a=>a.selected&&0!==a.paV_ID);return(e.displayAs===E.DisplayAs.DROPDOWN&&e.required&&i&&i.length>0&&0===r.paV_ID)??!1}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Nn),t.LFG(c.D7D))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Dc=(()=>{class n{constructor(e,r){this.cpqConfiguratorNormalizerUtilsService=e,this.translation=r,this.NO_OPTION_SELECTED=0}convert(e,r){return{...r,configId:"",productCode:e.productSystemId,priceSummary:this.cpqConfiguratorNormalizerUtilsService.convertPriceSummary(e),groups:e.tabs?.flatMap(a=>this.convertTab(a,e.currencyISOCode)).filter(a=>a.attributes&&a.attributes.length>0),totalNumberOfIssues:this.calculateTotalNumberOfIssues(e)}}convertTab(e,r){let i=[];e.attributes?.forEach(u=>{i=i.concat(this.convertAttribute(u,r))});const a={id:e.id.toString(),groupDescription:e.displayName,attributes:i};return"0"===a.id&&this.translation.translate("configurator.group.general").pipe((0,m.q)(1)).subscribe(u=>a.groupDescription=u),a}convertAttribute(e,r){const i=e?.values&&this.cpqConfiguratorNormalizerUtilsService.hasAnyProducts(e?.values)?s.AttributeOverviewType.BUNDLE:s.AttributeOverviewType.GENERAL,a=[];return this.convertAttributeValue(e,r).forEach(u=>{a.push({...u,type:i,attribute:this.cpqConfiguratorNormalizerUtilsService.convertAttributeLabel(e),attributeId:e.stdAttrCode.toString()})}),a}convertAttributeValue(e,r){const i=[];switch(e.displayAs){case E.DisplayAs.INPUT:e?.dataType===E.DataType.INPUT_STRING?e.userInput&&e.userInput.length>0&&i.push(this.extractValueUserInput(e,r)):i.push({attribute:"",value:"NOT_IMPLEMENTED"});break;case E.DisplayAs.RADIO_BUTTON:case E.DisplayAs.DROPDOWN:const a=e.values?.find(u=>u.selected&&u.paV_ID!==this.NO_OPTION_SELECTED);a&&i.push(this.extractValue(a,e,r));break;case E.DisplayAs.CHECK_BOX:e.values?.filter(u=>u.selected)?.forEach(u=>{i.push(this.extractValue(u,e,r))});break;default:i.push({attribute:"",value:"NOT_IMPLEMENTED"})}return i}extractValue(e,r,i){const a={attribute:"",value:e.valueDisplay??e.paV_ID.toString(),valueId:e.paV_ID.toString(),productCode:e.productSystemId,quantity:this.cpqConfiguratorNormalizerUtilsService.convertQuantity(e,r),valuePrice:this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(e,i)};return a.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(a.quantity??1,a.valuePrice),a}extractValueUserInput(e,r){const i=e.values?e.values[0]:void 0,a={attribute:"",value:e.userInput??e.stdAttrCode.toString(),valueId:i?.paV_ID.toString(),quantity:1};return i&&(a.valuePrice=this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(i,r),a.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(a.quantity??1,a.valuePrice)),a}calculateTotalNumberOfIssues(e){return(e.incompleteAttributes?.length??0)+(e.incompleteMessages?.length??0)+(e.invalidMessages?.length??0)+(e.failedValidations?.length??0)+(e.errorMessages?.length??0)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Nn),t.LFG(c.D7D))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();class lt{static getUpdateInformation(o){const e=o.attrCode,r=o.groupId;if(e&&r)return{standardAttributeCode:e.toString(),tabId:r};throw new Error("Attribute code of group id not present: "+JSON.stringify(o))}static findFirstChangedAttribute(o){const e=o.groups[0];if(e.attributes)return e.attributes[0];throw new Error("No changed attributes found")}}let Fc=(()=>{class n{convert(e){const r=lt.findFirstChangedAttribute(e);let i;return i=e.updateType===s.UpdateType.ATTRIBUTE_QUANTITY?this.convertQuantity(r,e.configId):this.convertAttribute(r,e.configId),i}convertQuantity(e,r){const i=lt.getUpdateInformation(e);return{configurationId:r,standardAttributeCode:i.standardAttributeCode,changeAttributeValue:{quantity:e.quantity},tabId:i.tabId}}convertAttribute(e,r){const i=lt.getUpdateInformation(e),a={configurationId:r,standardAttributeCode:i.standardAttributeCode,changeAttributeValue:{},tabId:i.tabId};return e.uiType===s.UiType.DROPDOWN||e.uiType===s.UiType.DROPDOWN_PRODUCT||e.uiType===s.UiType.RADIOBUTTON||e.uiType===s.UiType.RADIOBUTTON_PRODUCT||e.uiType===s.UiType.SINGLE_SELECTION_IMAGE?a.changeAttributeValue.attributeValueIds=this.processSelectedSingleValue(e.selectedSingleValue):e.uiType===s.UiType.CHECKBOXLIST||e.uiType===s.UiType.CHECKBOXLIST_PRODUCT||e.uiType===s.UiType.CHECKBOX||e.uiType===s.UiType.MULTI_SELECTION_IMAGE?a.changeAttributeValue.attributeValueIds=this.prepareValueIds(e):(e.uiType===s.UiType.STRING||e.uiType===s.UiType.NUMERIC)&&(a.changeAttributeValue.userInput=e.userInput,a.changeAttributeValue?.userInput||(a.changeAttributeValue.userInput=" ")),a}processSelectedSingleValue(e){let r=e;return r||(r=","),r}prepareValueIds(e){let r="";const i=e.values?.filter(a=>a.selected);return i&&i.length>0?i.forEach(a=>{r+=a.valueCode+","}):r=",",r}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Mc=(()=>{class n{convert(e){const r=lt.findFirstChangedAttribute(e);return this.convertAttribute(r,e.configId)}convertAttribute(e,r){const i=lt.getUpdateInformation(e),a=this.findFirstChangedValue(e);return{configurationId:r,standardAttributeCode:i.standardAttributeCode,attributeValueId:a.valueCode,quantity:a.quantity??1,tabId:i.tabId}}findFirstChangedValue(e){if(e.values&&e.values.length>0)return e.values[0];throw new Error("No values present")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();const pt=new t.OlP("CpqConfiguratorNormalizer"),Rn=new t.OlP("CpqConfiguratorSerializer"),Dn=new t.OlP("CpqConfiguratorValueSerializer"),Fn=new t.OlP("CpqConfiguratorOverviewNormalizer");let Gc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:function(e){let r=null;return r=e?new(e||n):t.LFG(c.DeH),r},providedIn:"root"}),n})(),Pc=(()=>{class n{constructor(e){this.config=e,this.CPQ_MARKER_HEADER={headers:new Z.WM({[Ac.O4]:"x"})}}buildUrl(e,r,i){const a=this.config.backend?.cpq?.endpoints;let u;switch(e){case"configurationInit":u=a?.configurationInit;break;case"configurationDisplay":u=a?.configurationDisplay;break;case"attributeUpdate":u=a?.attributeUpdate;break;case"valueUpdate":u=a?.valueUpdate}u||(u="configurations",console.warn(`${e} endpoint configuration missing for cpq backend, please provide it via key: "backend.cpq.endpoints.${e}"`));let d=this.config.backend?.cpq?.prefix+u;return d=r?c.leO.resolve(d,r):d,d=i?this.appendQueryParameters(d,i):d,d}appendQueryParameters(e,r){let i=e+"?";return r.forEach((a,u)=>{i=u>0?i+"&":i,i=`${i}${a.name}=${a.value}`}),i}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Gc))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Lc=(()=>{class n{constructor(e,r,i){this.http=e,this.converterService=r,this.endpointService=i}createConfiguration(e){return this.callConfigurationInit(e).pipe((0,v.w)(r=>this.callConfigurationDisplay(r.configurationId).pipe(this.converterService.pipeable(pt),(0,h.U)(i=>({...i,configId:r.configurationId})))))}readConfiguration(e,r){return this.callConfigurationDisplay(e,r).pipe(this.converterService.pipeable(pt),(0,h.U)(i=>({...i,configId:e})))}readConfigurationOverview(e){return this.getConfigurationWithAllTabsAndAttributes(e).pipe(this.converterService.pipeable(Fn),(0,h.U)(r=>({...r,configId:e})))}getConfigurationWithAllTabsAndAttributes(e){return this.callConfigurationDisplay(e).pipe((0,v.w)(r=>{const i=[];return r.tabs&&r.tabs.length>0?r.tabs.forEach(a=>{i.push(a.isSelected?(0,L.of)(r):this.callConfigurationDisplay(e,a.id.toString()))}):i.push((0,L.of)(r)),(0,Oc.D)(i)}),(0,h.U)(this.mergeTabResults))}mergeTabResults(e){const r={...e[e.length-1]};return r.attributes=void 0,r.tabs=[],e.forEach(i=>{let a;const u=i.tabs?.find(d=>d.isSelected);a=u&&i.tabs&&i.tabs.length>0?{...u}:{id:0},a.attributes=i.attributes,r.tabs?.push(a)}),r}updateAttribute(e){const r=this.converterService.convert(e,Rn);return this.callUpdateAttribute(r).pipe((0,v.w)(()=>this.callConfigurationDisplay(e.configId,r.tabId).pipe(this.converterService.pipeable(pt),(0,h.U)(i=>({...i,configId:e.configId})))))}updateValueQuantity(e){const r=this.converterService.convert(e,Dn);return this.callUpdateValue(r).pipe((0,v.w)(()=>this.callConfigurationDisplay(e.configId,r.tabId).pipe(this.converterService.pipeable(pt),(0,h.U)(i=>({...i,configId:e.configId})))))}callUpdateValue(e){return this.http.patch(this.endpointService.buildUrl("valueUpdate",{configId:e.configurationId,attributeCode:e.standardAttributeCode,valueCode:e.attributeValueId}),{Quantity:e.quantity},this.endpointService.CPQ_MARKER_HEADER)}callConfigurationInit(e){return this.http.post(this.endpointService.buildUrl("configurationInit"),{ProductSystemId:e},this.endpointService.CPQ_MARKER_HEADER)}callConfigurationDisplay(e,r){return this.http.get(this.endpointService.buildUrl("configurationDisplay",{configId:e},r?[{name:"tabId",value:r}]:void 0),this.endpointService.CPQ_MARKER_HEADER)}callUpdateAttribute(e){return this.http.patch(this.endpointService.buildUrl("attributeUpdate",{configId:e.configurationId,attributeCode:e.standardAttributeCode}),e.changeAttributeValue,this.endpointService.CPQ_MARKER_HEADER)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Z.eN),t.LFG(c.IXI),t.LFG(Pc))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qc=(()=>{class n{constructor(e,r){this.cpqRestService=e,this.cpqOccService=r}getConfiguratorType(){return"CLOUDCPQCONFIGURATOR"}createConfiguration(e){return this.cpqRestService.createConfiguration(e.id).pipe((0,h.U)(r=>(r.owner=e,r)))}readConfiguration(e,r,i){return this.cpqRestService.readConfiguration(e,r).pipe((0,h.U)(a=>(a.owner=i,a)))}updateConfiguration(e){return(e.updateType===s.UpdateType.VALUE_QUANTITY?this.cpqRestService.updateValueQuantity:this.cpqRestService.updateAttribute).call(this.cpqRestService,e).pipe((0,h.U)(i=>(i.owner=e.owner,i)))}addToCart(e){return this.cpqOccService.addToCart(e)}readConfigurationForCartEntry(e){return this.cpqOccService.getConfigIdForCartEntry(e).pipe((0,v.w)(r=>this.cpqRestService.readConfiguration(r).pipe((0,h.U)(i=>(i.owner=e.owner,i)))))}updateConfigurationForCartEntry(e){return this.cpqOccService.updateCartEntry(e)}readConfigurationForOrderEntry(e){return this.cpqOccService.getConfigIdForOrderEntry(e).pipe((0,v.w)(r=>this.cpqRestService.readConfiguration(r).pipe((0,h.U)(i=>(i.owner=e.owner,i)))))}readPriceSummary(e){return(0,L.of)(e)}getConfigurationOverview(e){return this.cpqRestService.readConfigurationOverview(e)}searchVariants(){throw new Error("searchVariants is not supported for the CPQ configurator")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Lc),t.LFG(Nc))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();const Bc={backend:{cpq:{endpoints:{configurationInit:"configurations",configurationDisplay:"configurations/${configId}/display",attributeUpdate:"configurations/${configId}/attributes/${attributeCode}",valueUpdate:"configurations/${configId}/attributes/${attributeCode}/attributeValues/${valueCode}"},prefix:"/api/configuration/v1/"}}};let Zc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:N.CONFIGURATOR_ADAPTER_LIST,useClass:qc,multi:!0},{provide:pt,useClass:Rc,multi:!0},{provide:Rn,useClass:Fc,multi:!0},{provide:Dn,useClass:Mc,multi:!0},{provide:Fn,useClass:Dc,multi:!0},(0,c.i51)(Bc)],imports:[p.ez]}),n})(),Vc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Uc,Zc]}),n})();var kc=b(988);const Mn=[];kc.N.cpq&&Mn.push(Vc);let Qc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Ic,Mn]}),n})()}}]);